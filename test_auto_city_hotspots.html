<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŸå¸‚çƒ­é—¨åœ°ç‚¹è‡ªåŠ¨æ›´æ–°æµ‹è¯•</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 18px;
            margin-bottom: 10px;
        }

        .city-selector {
            background: rgba(255,255,255,0.2);
            border-radius: 25px;
            padding: 10px 20px;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .city-selector:hover {
            background: rgba(255,255,255,0.3);
        }

        .content {
            padding: 20px;
        }

        .test-controls {
            margin-bottom: 30px;
        }

        .test-controls h3 {
            margin-bottom: 15px;
            color: #333;
            font-size: 16px;
        }

        .city-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .city-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 12px 16px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .city-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }

        .city-btn.active {
            background: linear-gradient(135deg, #52C41A 0%, #73D13D 100%);
        }

        .categories-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .category-group {
            margin-bottom: 20px;
        }

        .category-group:last-child {
            margin-bottom: 0;
        }

        .category-header {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid #e9ecef;
        }

        .category-badge {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-size: 14px;
        }

        .category-badge.attractions {
            background: linear-gradient(135deg, #FF6B35 0%, #F7931E 100%);
        }

        .category-badge.stations {
            background: linear-gradient(135deg, #007AFF 0%, #5AC8FA 100%);
        }

        .category-badge.subway {
            background: linear-gradient(135deg, #52C41A 0%, #73D13D 100%);
        }

        .category-badge.business {
            background: linear-gradient(135deg, #9C27B0 0%, #E91E63 100%);
        }

        .category-title {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            flex: 1;
        }

        .category-count {
            font-size: 12px;
            color: #666;
            background: rgba(0, 122, 255, 0.1);
            padding: 4px 8px;
            border-radius: 8px;
        }

        .category-items {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .category-item {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 20px;
            padding: 8px 12px;
            font-size: 13px;
            color: #333;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .category-item:hover {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: translateY(-1px);
        }

        .status {
            background: #e8f5e8;
            border: 1px solid #52c41a;
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 20px;
            font-size: 14px;
            color: #52c41a;
        }

        .log {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            max-height: 200px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.4;
        }

        .log-entry {
            margin-bottom: 5px;
            padding: 2px 0;
        }

        .log-entry.success {
            color: #52c41a;
        }

        .log-entry.warning {
            color: #fa8c16;
        }

        .log-entry.error {
            color: #f5222d;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #666;
        }

        .empty-state .icon {
            font-size: 48px;
            margin-bottom: 15px;
            opacity: 0.5;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ™ï¸ åŸå¸‚çƒ­é—¨åœ°ç‚¹æµ‹è¯•</h1>
            <div class="city-selector" onclick="showCitySelector()">
                <span id="currentCity">éƒ‘å·</span>
                <span>â–¼</span>
            </div>
        </div>

        <div class="content">
            <div class="test-controls">
                <h3>ğŸ¯ é€‰æ‹©æµ‹è¯•åŸå¸‚</h3>
                <div class="city-buttons">
                    <button class="city-btn active" onclick="switchCity('éƒ‘å·')">éƒ‘å·</button>
                    <button class="city-btn" onclick="switchCity('åŒ—äº¬')">åŒ—äº¬</button>
                    <button class="city-btn" onclick="switchCity('ä¸Šæµ·')">ä¸Šæµ·</button>
                    <button class="city-btn" onclick="switchCity('é”¦å·')">é”¦å·</button>
                    <button class="city-btn" onclick="switchCity('å¹¿å·')">å¹¿å·</button>
                    <button class="city-btn" onclick="switchCity('æ·±åœ³')">æ·±åœ³</button>
                    <button class="city-btn" onclick="switchCity('æ­å·')">æ­å·</button>
                    <button class="city-btn" onclick="switchCity('å—äº¬')">å—äº¬</button>
                </div>
            </div>

            <div class="status" id="status">
                âœ… å½“å‰æ˜¾ç¤ºï¼šéƒ‘å·çš„çƒ­é—¨åœ°ç‚¹
            </div>

            <div class="categories-section" id="categoriesSection">
                <!-- åŠ¨æ€ç”Ÿæˆçš„åˆ†ç±»å†…å®¹ -->
            </div>

            <div class="log" id="log">
                <div class="log-entry success">âœ… é¡µé¢åˆå§‹åŒ–å®Œæˆ</div>
                <div class="log-entry">ğŸ“ å½“å‰åŸå¸‚ï¼šéƒ‘å·</div>
                <div class="log-entry">ğŸ”„ æ­£åœ¨åŠ è½½åŸå¸‚åˆ†ç±»æ•°æ®...</div>
            </div>
        </div>
    </div>

    <script>
        // åŸå¸‚åˆ†ç±»æ•°æ®é…ç½®
        const cityCategories = {
            'éƒ‘å·': {
                attractions: ['ç¾æ™¯å¤©åŸ', 'å¤§å«åŸ', 'å›½è´¸360', 'ä¸‡ç‰¹', 'å°‘æ—å¯º', 'é“¶åŸºåŠ¨ç‰©ç‹å›½'],
                stations: ['éƒ‘å·ç«™', 'éƒ‘å·ä¸œç«™', 'æ–°éƒ‘å›½é™…æœºåœº'],
                subwayStations: ['äºŒä¸ƒå¹¿åœº', 'é™‡æµ·è·¯åœ°é“ç«™', 'èˆªæµ·å¹¿åœºç«™', 'ç´«è†å±±ç«™', 'äººæ°‘è·¯ç«™'],
                businessAreas: ['ç†™åœ°æ¸¯è´­ç‰©ä¸­å¿ƒ', 'äºŒä¸ƒå¹¿åœº', 'æ­£å¼˜åŸ', 'ä¸‡è¾¾å¹¿åœº', 'å›½è´¸360']
            },
            'åŒ—äº¬': {
                attractions: ['å¤©å®‰é—¨', 'æ•…å®«', 'é¢å’Œå›­', 'å¤©å›', 'é•¿åŸ', 'é¸Ÿå·¢'],
                stations: ['åŒ—äº¬ç«™', 'åŒ—äº¬è¥¿ç«™', 'åŒ—äº¬å—ç«™', 'é¦–éƒ½å›½é™…æœºåœº', 'å¤§å…´å›½é™…æœºåœº'],
                subwayStations: ['å¤©å®‰é—¨ä¸œ', 'ç‹åºœäº•', 'è¥¿å•', 'å›½è´¸', 'ä¸‰é‡Œå±¯'],
                businessAreas: ['ç‹åºœäº•', 'è¥¿å•', 'å›½è´¸', 'ä¸‰é‡Œå±¯', 'ä¸­å…³æ‘']
            },
            'ä¸Šæµ·': {
                attractions: ['å¤–æ»©', 'ä¸œæ–¹æ˜ç ', 'è±«å›­', 'åŸéšåº™', 'æœ±å®¶è§’', 'è¿ªå£«å°¼'],
                stations: ['ä¸Šæµ·ç«™', 'ä¸Šæµ·è™¹æ¡¥ç«™', 'ä¸Šæµ·å—ç«™', 'æµ¦ä¸œå›½é™…æœºåœº', 'è™¹æ¡¥æœºåœº'],
                subwayStations: ['äººæ°‘å¹¿åœº', 'å—äº¬è·¯', 'é™†å®¶å˜´', 'å¾å®¶æ±‡', 'é™å®‰å¯º'],
                businessAreas: ['å—äº¬è·¯', 'æ·®æµ·è·¯', 'é™†å®¶å˜´', 'å¾å®¶æ±‡', 'é™å®‰å¯º']
            },
            'é”¦å·': {
                attractions: ['é”¦å·å¤åŸ', 'ç¬”æ¶å±±', 'åŒ»å·«é—¾å±±', 'é”¦å·ä¸–åšå›­', 'è¾½æ²ˆæˆ˜å½¹çºªå¿µé¦†', 'åŒ—æ™®é™€å±±'],
                stations: ['é”¦å·ç«™', 'é”¦å·å—ç«™', 'é”¦å·æœºåœº'],
                subwayStations: ['é”¦å·ç«è½¦ç«™', 'å¸‚æ”¿åºœ', 'é”¦å·åŒ»ç§‘å¤§å­¦', 'æ¸¤æµ·å¤§å­¦', 'é”¦å·æ¸¯'],
                businessAreas: ['ä¸‡è¾¾å¹¿åœº', 'é”¦å·å•†ä¸šåŸ', 'å‡Œæ²³å¤œå¸‚', 'é”¦å·æ­¥è¡Œè¡—']
            },
            'å¹¿å·': {
                attractions: ['å¹¿å·å¡”', 'é™ˆå®¶ç¥ ', 'æ²™é¢', 'ç™½äº‘å±±', 'é•¿éš†', 'ç æ±Ÿå¤œæ¸¸'],
                stations: ['å¹¿å·ç«™', 'å¹¿å·å—ç«™', 'å¹¿å·ä¸œç«™', 'ç™½äº‘å›½é™…æœºåœº'],
                subwayStations: ['ä½“è‚²è¥¿è·¯', 'ç æ±Ÿæ–°åŸ', 'åŒ—äº¬è·¯', 'ä¸Šä¸‹ä¹', 'å¤©æ²³åŸ'],
                businessAreas: ['å¤©æ²³åŸ', 'åŒ—äº¬è·¯', 'ä¸Šä¸‹ä¹', 'ç æ±Ÿæ–°åŸ', 'ä¸‡è±æ±‡']
            },
            'æ·±åœ³': {
                attractions: ['ä¸–ç•Œä¹‹çª—', 'æ¬¢ä¹è°·', 'å¤§æ¢…æ²™', 'è²èŠ±å±±', 'åä¾¨åŸ', 'ä¸œéƒ¨åä¾¨åŸ'],
                stations: ['æ·±åœ³ç«™', 'æ·±åœ³åŒ—ç«™', 'æ·±åœ³ä¸œç«™', 'å®å®‰å›½é™…æœºåœº'],
                subwayStations: ['ç½—æ¹–', 'å›½è´¸', 'åå¼ºåŒ—', 'è½¦å…¬åº™', 'ä¸–ç•Œä¹‹çª—'],
                businessAreas: ['åå¼ºåŒ—', 'ä¸œé—¨', 'æµ·å²¸åŸ', 'ä¸‡è±¡åŸ', 'ç›Šç”°å‡æ—¥å¹¿åœº']
            },
            'æ­å·': {
                attractions: ['è¥¿æ¹–', 'çµéšå¯º', 'é›·å³°å¡”', 'åƒå²›æ¹–', 'è¥¿æºªæ¹¿åœ°', 'å®‹åŸ'],
                stations: ['æ­å·ç«™', 'æ­å·ä¸œç«™', 'æ­å·å—ç«™', 'è§å±±å›½é™…æœºåœº'],
                subwayStations: ['è¥¿æ¹–æ–‡åŒ–å¹¿åœº', 'æ­¦æ—å¹¿åœº', 'é’±æ±Ÿæ–°åŸ', 'æ»¨æ±Ÿ', 'åŸç«™'],
                businessAreas: ['æ­¦æ—å¹¿åœº', 'æ¹–æ»¨', 'é’±æ±Ÿæ–°åŸ', 'è¥¿æºª', 'æ»¨æ±Ÿ']
            },
            'å—äº¬': {
                attractions: ['ä¸­å±±é™µ', 'å¤«å­åº™', 'ç„æ­¦æ¹–', 'æ€»ç»Ÿåºœ', 'æ˜å­é™µ', 'ç§¦æ·®æ²³'],
                stations: ['å—äº¬ç«™', 'å—äº¬å—ç«™', 'ç¦„å£å›½é™…æœºåœº'],
                subwayStations: ['æ–°è¡—å£', 'å¤«å­åº™', 'é¼“æ¥¼', 'ç„æ­¦é—¨', 'ä¸­åé—¨'],
                businessAreas: ['æ–°è¡—å£', 'å¤«å­åº™', 'æ¹–å—è·¯', 'æ±Ÿå®ä¸‡è¾¾', 'ä»™æ—']
            }
        };

        let currentCity = 'éƒ‘å·';

        // é¡µé¢åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            updateCityCategories();
        });

        // åˆ‡æ¢åŸå¸‚
        function switchCity(cityName) {
            addLog(`ğŸ”„ åˆ‡æ¢åˆ°åŸå¸‚ï¼š${cityName}`, 'success');
            
            // æ›´æ–°å½“å‰åŸå¸‚
            currentCity = cityName;
            document.getElementById('currentCity').textContent = cityName;
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.city-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.textContent === cityName) {
                    btn.classList.add('active');
                }
            });
            
            // æ›´æ–°çŠ¶æ€
            document.getElementById('status').innerHTML = `âœ… å½“å‰æ˜¾ç¤ºï¼š${cityName}çš„çƒ­é—¨åœ°ç‚¹`;
            
            // æ›´æ–°åˆ†ç±»æ•°æ®
            updateCityCategories();
            
            addLog(`âœ… ${cityName}çš„çƒ­é—¨åœ°ç‚¹å·²æ›´æ–°`, 'success');
        }

        // æ›´æ–°åŸå¸‚åˆ†ç±»æ•°æ®
        function updateCityCategories() {
            addLog(`ğŸ”„ æ›´æ–°${currentCity}çš„åˆ†ç±»æ•°æ®...`);
            
            const cityData = cityCategories[currentCity];
            const categoriesSection = document.getElementById('categoriesSection');
            
            if (cityData) {
                let html = '';
                
                // æ™¯ç‚¹åˆ†ç±»
                if (cityData.attractions && cityData.attractions.length > 0) {
                    html += generateCategoryHTML('attractions', 'ğŸ¡', 'æ™¯ç‚¹', cityData.attractions);
                }
                
                // æœºåœºè½¦ç«™åˆ†ç±»
                if (cityData.stations && cityData.stations.length > 0) {
                    html += generateCategoryHTML('stations', 'ğŸš‚', 'æœºåœºè½¦ç«™', cityData.stations);
                }
                
                // åœ°é“ç«™åˆ†ç±»
                if (cityData.subwayStations && cityData.subwayStations.length > 0) {
                    html += generateCategoryHTML('subway', 'ğŸš‡', 'åœ°é“ç«™', cityData.subwayStations);
                }
                
                // å•†åœˆåˆ†ç±»
                if (cityData.businessAreas && cityData.businessAreas.length > 0) {
                    html += generateCategoryHTML('business', 'ğŸ¢', 'å•†åœˆ', cityData.businessAreas);
                }
                
                categoriesSection.innerHTML = html;
                addLog(`âœ… ${currentCity}åˆ†ç±»æ•°æ®åŠ è½½å®Œæˆ`, 'success');
                
            } else {
                // å¦‚æœæ²¡æœ‰æ‰¾åˆ°åŸå¸‚æ•°æ®ï¼Œç”Ÿæˆé»˜è®¤æ•°æ®
                addLog(`âš ï¸ æœªæ‰¾åˆ°${currentCity}çš„åˆ†ç±»æ•°æ®ï¼Œè‡ªåŠ¨ç”Ÿæˆ`, 'warning');
                const generatedData = generateCityCategories(currentCity);
                
                let html = '';
                html += generateCategoryHTML('attractions', 'ğŸ¡', 'æ™¯ç‚¹', generatedData.attractions);
                html += generateCategoryHTML('stations', 'ğŸš‚', 'æœºåœºè½¦ç«™', generatedData.stations);
                html += generateCategoryHTML('subway', 'ğŸš‡', 'åœ°é“ç«™', generatedData.subwayStations);
                html += generateCategoryHTML('business', 'ğŸ¢', 'å•†åœˆ', generatedData.businessAreas);
                
                categoriesSection.innerHTML = html;
                addLog(`âœ… ${currentCity}åˆ†ç±»æ•°æ®è‡ªåŠ¨ç”Ÿæˆå®Œæˆ`, 'success');
            }
        }

        // ç”Ÿæˆåˆ†ç±»HTML
        function generateCategoryHTML(type, icon, title, items) {
            const itemsHTML = items.map(item => 
                `<div class="category-item" onclick="searchLocation('${item}')">
                    <span>${icon}</span>
                    <span>${item}</span>
                </div>`
            ).join('');
            
            return `
                <div class="category-group">
                    <div class="category-header">
                        <div class="category-badge ${type}">${icon}</div>
                        <div class="category-title">${title}</div>
                        <div class="category-count">${items.length}ä¸ª</div>
                    </div>
                    <div class="category-items">
                        ${itemsHTML}
                    </div>
                </div>
            `;
        }

        // ä¸ºæ–°åŸå¸‚è‡ªåŠ¨ç”Ÿæˆåˆ†ç±»æ•°æ®
        function generateCityCategories(cityName) {
            const cleanCityName = cityName.replace(/[å¸‚çœåŒºå¿]/g, '');
            
            return {
                attractions: [
                    `${cleanCityName}å…¬å›­`,
                    `${cleanCityName}å¹¿åœº`,
                    `${cleanCityName}åšç‰©é¦†`,
                    `${cleanCityName}å¤åŸ`,
                    `${cleanCityName}é£æ™¯åŒº`,
                    `${cleanCityName}æ–‡åŒ–ä¸­å¿ƒ`
                ],
                stations: [
                    `${cleanCityName}ç«™`,
                    `${cleanCityName}ä¸œç«™`,
                    `${cleanCityName}æœºåœº`
                ],
                subwayStations: [
                    `${cleanCityName}ä¸­å¿ƒç«™`,
                    `${cleanCityName}å¹¿åœºç«™`,
                    `${cleanCityName}ç«è½¦ç«™`,
                    `${cleanCityName}æ±½è½¦ç«™`,
                    `${cleanCityName}ä½“è‚²é¦†ç«™`
                ],
                businessAreas: [
                    `${cleanCityName}ä¸‡è¾¾`,
                    `${cleanCityName}è´­ç‰©ä¸­å¿ƒ`,
                    `${cleanCityName}å•†ä¸šè¡—`,
                    `${cleanCityName}æ­¥è¡Œè¡—`
                ]
            };
        }

        // æœç´¢ä½ç½®
        function searchLocation(location) {
            addLog(`ğŸ” æœç´¢ä½ç½®ï¼š${location}`, 'success');
            alert(`æ¨¡æ‹Ÿæœç´¢ï¼š${location}\n\nåœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œä¼šè·³è½¬åˆ°æœç´¢é¡µé¢å¹¶æ˜¾ç¤ºç›¸å…³çš„å¯„å­˜ç‚¹ã€‚`);
        }

        // æ˜¾ç¤ºåŸå¸‚é€‰æ‹©å™¨
        function showCitySelector() {
            addLog('ğŸ“ æ‰“å¼€åŸå¸‚é€‰æ‹©å™¨');
            alert('åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œä¼šæ‰“å¼€åŸå¸‚é€‰æ‹©é¡µé¢');
        }

        // æ·»åŠ æ—¥å¿—
        function addLog(message, type = 'info') {
            const log = document.getElementById('log');
            const entry = document.createElement('div');
            entry.className = `log-entry ${type}`;
            entry.textContent = `${new Date().toLocaleTimeString()} - ${message}`;
            log.appendChild(entry);
            log.scrollTop = log.scrollHeight;
        }

        // æµ‹è¯•æ‰€æœ‰åŸå¸‚
        function testAllCities() {
            const cities = Object.keys(cityCategories);
            let index = 0;
            
            function testNext() {
                if (index < cities.length) {
                    switchCity(cities[index]);
                    index++;
                    setTimeout(testNext, 2000);
                } else {
                    addLog('ğŸ‰ æ‰€æœ‰åŸå¸‚æµ‹è¯•å®Œæˆ', 'success');
                }
            }
            
            testNext();
        }

        // æ·»åŠ æµ‹è¯•æŒ‰é’®
        setTimeout(() => {
            const controls = document.querySelector('.test-controls');
            const testBtn = document.createElement('button');
            testBtn.className = 'city-btn';
            testBtn.style.gridColumn = 'span 2';
            testBtn.style.background = 'linear-gradient(135deg, #52C41A 0%, #73D13D 100%)';
            testBtn.textContent = 'ğŸ§ª è‡ªåŠ¨æµ‹è¯•æ‰€æœ‰åŸå¸‚';
            testBtn.onclick = testAllCities;
            controls.appendChild(testBtn);
        }, 1000);
    </script>
</body>
</html>