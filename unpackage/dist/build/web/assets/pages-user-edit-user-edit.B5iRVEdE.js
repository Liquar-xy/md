import{y as a,a as e,z as s,g as t,c as l,b as r,h as n,A as o,p as i,e as u,w as c,i as m,o as h,f as d,j as p,u as v,k as f,I as U,l as b}from"./index-C_HCjYUn.js";import{_}from"./_plugin-vue_export-helper.BCo6x5W8.js";const N=_({data:()=>({username:"智慧存0987",phoneNumber:"18512345678",avatarUrl:""}),onLoad(a){this.loadUserData(),!this.username&&a.username&&(this.username=a.username),!this.phoneNumber&&a.phoneNumber&&(this.phoneNumber=a.phoneNumber),!this.avatarUrl&&a.avatarUrl&&(this.avatarUrl=a.avatarUrl)},methods:{handleAvatarClick(){a({count:1,sizeType:["compressed"],sourceType:["album","camera"],success:a=>{console.log("选择的图片:",a.tempFilePaths[0]),this.avatarUrl=a.tempFilePaths[0],e({title:"头像选择成功",icon:"success"})},fail:a=>{console.log("选择图片失败:",a),e({title:"选择图片失败",icon:"none"})}})},uploadAvatar(a){s({url:"YOUR_UPLOAD_URL",filePath:a,name:"avatar",success:a=>{console.log("头像上传成功:",a)},fail:a=>{console.log("头像上传失败:",a),e({title:"头像上传失败",icon:"none"})}})},loadUserData(){try{const a=t("userData");if(a){const e=JSON.parse(a);this.username=e.username||"",this.phoneNumber=e.phoneNumber||"",this.avatarUrl=e.avatarUrl||""}}catch(a){console.log("加载用户数据失败:",a)}},saveUserData(){try{const a={username:this.username,phoneNumber:this.phoneNumber,avatarUrl:this.avatarUrl};l("userData",JSON.stringify(a)),console.log("用户数据已保存到本地存储")}catch(a){console.log("保存用户数据失败:",a)}},handleSave(){if(!this.username.trim())return void e({title:"请输入用户名",icon:"none"});if(!this.phoneNumber)return void e({title:"请输入手机号",icon:"none"});/^1[3-9]\d{9}$/.test(this.phoneNumber)?(r({title:"保存中..."}),this.saveUserData(),setTimeout((()=>{n(),console.log("保存的用户信息:",{username:this.username,phoneNumber:this.phoneNumber,avatarUrl:this.avatarUrl}),e({title:"保存成功",icon:"success",success:()=>{setTimeout((()=>{const a=o(),e=a[a.length-2];e&&e.$vm&&(e.$vm.username=this.username,e.$vm.phoneNumber=this.phoneNumber,e.$vm.avatarUrl=this.avatarUrl,e.$vm.$forceUpdate()),i()}),1500)}})}),1e3)):e({title:"请输入正确的手机号",icon:"none"})}}},[["render",function(a,e,s,t,l,r){const n=v,o=f,i=m,_=U,N=b;return h(),u(i,{class:"edit-container"},{default:c((()=>[d(i,{class:"avatar-section"},{default:c((()=>[d(i,{class:"avatar-container",onClick:r.handleAvatarClick},{default:c((()=>[d(i,{class:"avatar"},{default:c((()=>[l.avatarUrl?(h(),u(n,{key:0,src:l.avatarUrl,class:"avatar-image",mode:"aspectFill"},null,8,["src"])):(h(),u(o,{key:1,class:"avatar-icon"},{default:c((()=>[p("👤")])),_:1}))])),_:1}),d(i,{class:"edit-overlay"},{default:c((()=>[d(o,{class:"edit-text"},{default:c((()=>[p("点击修改")])),_:1})])),_:1})])),_:1},8,["onClick"])])),_:1}),d(i,{class:"info-section"},{default:c((()=>[d(i,{class:"info-item"},{default:c((()=>[d(o,{class:"info-label"},{default:c((()=>[p("用户名")])),_:1}),d(_,{class:"info-input",type:"text",placeholder:"请输入用户名",modelValue:l.username,"onUpdate:modelValue":e[0]||(e[0]=a=>l.username=a),maxlength:"20"},null,8,["modelValue"])])),_:1}),d(i,{class:"info-item"},{default:c((()=>[d(o,{class:"info-label"},{default:c((()=>[p("手机号")])),_:1}),d(_,{class:"info-input",type:"number",placeholder:"请输入手机号",modelValue:l.phoneNumber,"onUpdate:modelValue":e[1]||(e[1]=a=>l.phoneNumber=a),maxlength:"11"},null,8,["modelValue"])])),_:1})])),_:1}),d(i,{class:"button-section"},{default:c((()=>[d(N,{class:"save-btn",onClick:r.handleSave},{default:c((()=>[p("保存修改")])),_:1},8,["onClick"])])),_:1})])),_:1})}],["__scopeId","data-v-d0b9499a"]]);export{N as default};
