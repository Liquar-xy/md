import{g as e,r as a,a as o,m as t,q as i,v as n,y as s,c as l,p as d,P as p,e as c,w as r,i as u,o as m,f,j as h,t as g,n as I,C as b,D as v,F as T,k as _,u as S,l as M,x as y}from"./index-C_HCjYUn.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";const P=C({data:()=>({pointId:null,pointName:"",pointInfo:{name:"",address:"",pointType:"",availableLarge:0,availableMedium:0,availableSmall:0,openTime:"",status:1,pointImage:"",photos:[]},isSaving:!1}),onLoad(a){if(this.pointId=a.id||"new",this.pointName=decodeURIComponent(a.name||""),"new"===this.pointId)console.log("æ–°å¢ç½‘ç‚¹æ¨¡å¼"),this.pointInfo={name:"",address:"",pointType:"",availableLarge:0,availableMedium:0,availableSmall:0,openTime:"",status:1,pointImage:"",photos:[]};else{console.log("ä¿®æ”¹ç½‘ç‚¹æ¨¡å¼ï¼ŒID:",this.pointId);const a=e("lastEditTime"),o=e("latestPointData"),t=Date.now();console.log("ç¼–è¾‘é¡µé¢åŠ è½½ - æ£€æŸ¥æœ¬åœ°æ•°æ®"),console.log("ç¼–è¾‘æ—¶é—´:",a,"å½“å‰æ—¶é—´:",t,"æ—¶é—´å·®:",t-a),console.log("æœ¬åœ°æœ€æ–°æ•°æ®:",o),a&&o&&t-a<1e4&&(o.id==this.pointId||o.Id==this.pointId)?(console.log("ä½¿ç”¨æœ¬åœ°æœ€æ–°æ•°æ®åŠ è½½ç¼–è¾‘é¡µé¢"),this.pointInfo={name:o.name||"",address:o.address||"",pointType:o.pointType||"",availableLarge:o.availableLarge||0,availableMedium:o.availableMedium||0,availableSmall:o.availableSmall||0,openTime:o.openTime||"",status:o.status||1,pointImage:o.pointImage||"",photos:o.photos||[]},console.log("ç¼–è¾‘é¡µé¢ä½¿ç”¨æœ¬åœ°æ•°æ®:",this.pointInfo)):"new"!==this.pointId?this.getPointInfo():console.log("æ–°å¢ç½‘ç‚¹æ¨¡å¼ï¼Œä¸éœ€è¦è·å–ç°æœ‰æ•°æ®")}},methods:{getPointInfo(){"new"!==this.pointId?(console.log("æ­£åœ¨è·å–ç½‘ç‚¹ä¿¡æ¯ï¼ŒID:",this.pointId),a({url:"http://localhost:8000/point_info",method:"POST",data:{id:parseInt(this.pointId)||this.pointId},header:{"Content-Type":"application/json",Authorization:"Bearer "+e("adminToken")},success:e=>{var a;if(console.log("ç½‘ç‚¹ä¿¡æ¯æ¥å£è¿”å›æ•°æ®:",e),!e.data||200!==e.data.code&&"200"!==e.data.code)console.error("æ¥å£è¿”å›é”™è¯¯:",e.data),o({title:(null==(a=e.data)?void 0:a.msg)||"è·å–ç½‘ç‚¹ä¿¡æ¯å¤±è´¥",icon:"none"});else{const a=e.data.data||e.data;console.log("åç«¯è¿”å›çš„åŸå§‹æ•°æ®:",a),this.pointInfo={name:a.name||a.Name||"",address:a.address||a.Address||"",pointType:a.pointType||a.PointType||a.point_type||"",availableLarge:parseInt(a.availableLarge||a.AvailableLarge||a.available_large)||0,availableMedium:parseInt(a.availableMedium||a.AvailableMedium||a.available_medium)||0,availableSmall:parseInt(a.availableSmall||a.AvailableSmall||a.available_small)||0,openTime:a.openTime||a.OpenTime||a.open_time||"",status:parseInt(a.status||a.Status)||1,pointImage:a.pointImage||a.PointImage||a.point_image||"",photos:a.photos||a.Photos||[]},console.log("å¤„ç†åçš„ç½‘ç‚¹ä¿¡æ¯:",this.pointInfo),o({title:"æ•°æ®åŠ è½½æˆåŠŸ",icon:"success",duration:1e3})}},fail:e=>{console.error("ç½‘ç‚¹ä¿¡æ¯è¯·æ±‚å¤±è´¥:",e),o({title:"ç½‘ç»œè¯·æ±‚å¤±è´¥",icon:"none"})}})):console.log("æ–°å¢ç½‘ç‚¹æ¨¡å¼ï¼Œè·³è¿‡è·å–ç½‘ç‚¹ä¿¡æ¯")},getCabinetInfo(){const{availableLarge:e,availableMedium:a,availableSmall:o}=this.pointInfo;return`${e}ç»„${a}ä¸»æœº${o}æŸœé—¨`},editField(e){console.log("ç‚¹å‡»ç¼–è¾‘å­—æ®µ:",e);const a={name:"ç½‘ç‚¹åç§°",address:"ç½‘ç‚¹åœ°å€",pointType:"ç½‘ç‚¹ç±»å‹",cabinet:"ç®¡ç†æŸœç»„",openTime:"è¥ä¸šæ—¶é—´",status:"ç½‘ç‚¹çŠ¶æ€"}[e]||e;if("cabinet"!==e)if("status"!==e){switch(e){case"name":this.pointInfo.name;break;case"address":this.pointInfo.address;break;case"pointType":this.pointInfo.pointType;break;case"openTime":this.pointInfo.openTime}t({title:`ç¼–è¾‘${a}`,content:"",editable:!0,placeholderText:`è¯·è¾“å…¥${a}`,success:a=>{if(a.confirm){const t=a.content.trim();if(t){switch(e){case"name":this.pointInfo.name=t;break;case"address":this.pointInfo.address=t;break;case"pointType":this.pointInfo.pointType=t;break;case"openTime":this.pointInfo.openTime=t}o({title:"ä¿®æ”¹æˆåŠŸ",icon:"success"})}}}})}else this.editStatus();else this.editCabinet()},editCabinet(){console.log("ç¼–è¾‘æŸœç»„ä¿¡æ¯è¢«è°ƒç”¨"),t({title:"ç¼–è¾‘æŸœç»„ä¿¡æ¯",content:"",editable:!0,placeholderText:"è¯·è¾“å…¥ï¼šç»„æ•°,ä¸»æœºæ•°,æŸœé—¨æ•°ï¼ˆä¾‹å¦‚ï¼š10,15,20ï¼‰",success:e=>{console.log("è¾“å…¥ç»“æœ:",e),e.confirm&&e.content&&this.processCabinetInput(e.content)}})},processCabinetInput(e){console.log("ç”¨æˆ·è¾“å…¥:",e);const a=e.split(/[,ï¼Œ\s]+/).map((e=>parseInt(e.trim())||0));console.log("è§£æç»“æœ:",a),3===a.length?(this.pointInfo.availableLarge=a[0],this.pointInfo.availableMedium=a[1],this.pointInfo.availableSmall=a[2],console.log("æ›´æ–°åçš„æŸœç»„æ•°æ®:",this.pointInfo.availableLarge,this.pointInfo.availableMedium,this.pointInfo.availableSmall),o({title:`å·²è®¾ç½®ä¸ºï¼š${a[0]}ç»„${a[1]}ä¸»æœº${a[2]}æŸœé—¨`,icon:"success",duration:2e3})):o({title:"æ ¼å¼é”™è¯¯ï¼Œè¯·è¾“å…¥ä¸‰ä¸ªæ•°å­—ï¼Œç”¨é€—å·åˆ†éš”",icon:"none",duration:3e3})},editStatus(){const e=[{text:"æ­£å¸¸",value:1},{text:"æš‚åœè¥ä¸š",value:0}];i({itemList:e.map((e=>e.text)),success:a=>{const t=e[a.tapIndex];this.pointInfo.status=t.value,o({title:`çŠ¶æ€å·²è®¾ç½®ä¸º${t.text}`,icon:"success"})}})},viewChargingRules(){n({url:`/pages/price-rule/price-rule?id=${this.pointId}&name=${encodeURIComponent(this.pointInfo.name||this.pointName)}`})},uploadPhoto(){s({count:1,success:e=>{const a=e.tempFilePaths[0];this.pointInfo.pointImage=a,this.pointInfo.photos.includes(a)||this.pointInfo.photos.unshift(a),o({title:"ç…§ç‰‡ä¸Šä¼ æˆåŠŸ",icon:"success"})}})},addPhoto(){s({count:1,success:e=>{const a=e.tempFilePaths[0];this.pointInfo.photos.push(a),o({title:"ç…§ç‰‡æ·»åŠ æˆåŠŸ",icon:"success"})}})},removePhoto(e){const a=this.pointInfo.photos[e];this.pointInfo.pointImage===a&&(this.pointInfo.pointImage=""),this.pointInfo.photos.splice(e,1),o({title:"ç…§ç‰‡åˆ é™¤æˆåŠŸ",icon:"success"})},setMainPhoto(e){this.pointInfo.pointImage=e,o({title:"å·²è®¾ç½®ä¸ºä¸»ç…§ç‰‡",icon:"success"})},savePoint(){if(console.log("å¼€å§‹éªŒè¯ç¼–è¾‘æ•°æ®:",this.pointInfo),!this.pointInfo.name||""===this.pointInfo.name.trim())return void o({title:"è¯·è¾“å…¥ç½‘ç‚¹åç§°",icon:"none"});if(!this.pointInfo.address||""===this.pointInfo.address.trim())return void o({title:"è¯·è¾“å…¥ç½‘ç‚¹åœ°å€",icon:"none"});if(!this.pointInfo.pointType||""===this.pointInfo.pointType.trim())return void o({title:"è¯·è¾“å…¥ç½‘ç‚¹ç±»å‹",icon:"none"});console.log("âœ… æ•°æ®éªŒè¯é€šè¿‡"),this.isSaving=!0;const t=e("adminToken");if(!t)return this.isSaving=!1,void o({title:"è¯·å…ˆç™»å½•ç®¡ç†å‘˜è´¦å·",icon:"none"});const i=this.pointId&&"new"!==this.pointId,n=i?"http://localhost:8000/admin/updatePoint":"http://localhost:8000/admin/addPoint";console.log("æ£€æŸ¥åç«¯æœåŠ¡çŠ¶æ€..."),a({url:"http://localhost:8000/point_list",method:"GET",timeout:5e3,success:e=>{console.log("âœ… åç«¯æœåŠ¡æ­£å¸¸ï¼Œå¯ä»¥å‘é€ä¿®æ”¹è¯·æ±‚");const a=i?{point:{id:parseInt(this.pointId),name:this.pointInfo.name.trim(),address:this.pointInfo.address.trim(),point_type:this.pointInfo.pointType.trim(),available_large:parseInt(this.pointInfo.availableLarge)||0,available_medium:parseInt(this.pointInfo.availableMedium)||0,available_small:parseInt(this.pointInfo.availableSmall)||0,open_time:this.pointInfo.openTime.trim(),status:(parseInt(this.pointInfo.status)||1).toString(),mobile:"13800138000",latitude:39.984699,longitude:116.307198,point_image:""}}:{name:this.pointInfo.name.trim(),address:this.pointInfo.address.trim(),point_type:this.pointInfo.pointType.trim(),available_large:parseInt(this.pointInfo.availableLarge)||0,available_medium:parseInt(this.pointInfo.availableMedium)||0,available_small:parseInt(this.pointInfo.availableSmall)||0,open_time:this.pointInfo.openTime.trim(),status:(parseInt(this.pointInfo.status)||1).toString(),mobile:"13800138000",latitude:39.984699,longitude:116.307198,point_image:""};console.log("=== è¯·æ±‚æ ¼å¼è°ƒè¯• ==="),console.log("æ˜¯å¦ä¿®æ”¹æ¨¡å¼:",i),console.log("è¯·æ±‚URL:",n),console.log("è¯·æ±‚æ•°æ®æ ¼å¼:",i?"ä½¿ç”¨pointåŒ…è£…å™¨":"ç›´æ¥å‘é€æ•°æ®"),console.log("æœ€ç»ˆè¯·æ±‚æ•°æ®:",a),console.log("=== è¯·æ±‚æ ¼å¼è°ƒè¯•ç»“æŸ ==="),this.sendUpdateRequest(n,a,t,i)},fail:e=>{console.error("âŒ åç«¯æœåŠ¡ä¸å¯ç”¨:",e),o({title:"åç«¯æœåŠ¡ä¸å¯ç”¨ï¼Œè¯·æ£€æŸ¥æœåŠ¡çŠ¶æ€",icon:"none",duration:3e3})}})},refreshPointList(){console.log("å¼ºåˆ¶åˆ·æ–°ç½‘ç‚¹åˆ—è¡¨æ•°æ®"),a({url:"http://localhost:8000/point_list",method:"GET",header:{"Content-Type":"application/json",Authorization:"Bearer "+e("adminToken")},success:e=>{if(console.log("åˆ·æ–°ç½‘ç‚¹åˆ—è¡¨æˆåŠŸ:",e),e.data&&(200===e.data.code||"200"===e.data.code)){const a=(e.data.list||e.data.data||[]).map((e=>({id:e.Id||e.id,name:e.name||e.Name,address:e.address||e.Address,pointType:e.pointType||e.PointType,availableLarge:e.availableLarge||e.AvailableLarge,availableMedium:e.availableMedium||e.AvailableMedium,availableSmall:e.availableSmall||e.AvailableSmall,openTime:e.openTime||e.OpenTime,status:e.status||e.Status,cabinetInfo:`${e.availableLarge||e.AvailableLarge}ç»„${e.availableMedium||e.AvailableMedium}ä¸»æœº${e.availableSmall||e.AvailableSmall}æŸœé—¨`})));l("pointList",a),console.log("ç½‘ç‚¹åˆ—è¡¨å·²æ›´æ–°:",a)}},fail:e=>{console.error("åˆ·æ–°ç½‘ç‚¹åˆ—è¡¨å¤±è´¥:",e)}})},refreshPointDetail(){console.log("å¼ºåˆ¶åˆ·æ–°ç½‘ç‚¹è¯¦æƒ…æ•°æ®ï¼ŒéªŒè¯æ•°æ®åº“æ›´æ–°"),"new"!==this.pointId&&"undefined"!==this.pointId&&this.pointId?a({url:"http://localhost:8000/point_info",method:"POST",data:{id:parseInt(this.pointId)||this.pointId},header:{"Content-Type":"application/json",Authorization:"Bearer "+e("adminToken")},success:e=>{if(console.log("éªŒè¯æ•°æ®åº“æ›´æ–°æˆåŠŸ:",e),!e.data||200!==e.data.code&&"200"!==e.data.code)console.error("æ•°æ®åº“éªŒè¯å¤±è´¥:",e.data),o({title:"æ•°æ®åº“éªŒè¯å¤±è´¥",icon:"none",duration:1500});else{const a=e.data.data||e.data,t={id:this.pointId,name:a.name||a.Name||"",address:a.address||a.Address||"",pointType:a.pointType||a.PointType||a.point_type||"",availableLarge:parseInt(a.availableLarge||a.AvailableLarge||a.available_large)||0,availableMedium:parseInt(a.availableMedium||a.AvailableMedium||a.available_medium)||0,availableSmall:parseInt(a.availableSmall||a.AvailableSmall||a.available_small)||0,openTime:a.openTime||a.OpenTime||a.open_time||"",status:parseInt(a.status||a.Status)||1,pointImage:a.pointImage||a.PointImage||a.point_image||""};l("currentPointData",t),l("dataUpdateTime",Date.now()),l("latestPointData",t),l("lastEditTime",Date.now()),console.log("æ•°æ®åº“éªŒè¯æˆåŠŸï¼Œæœ€æ–°æ•°æ®:",t),console.log("æ•°æ®åº“æ•°æ®ä¸å‰ç«¯æ•°æ®å·²å®Œå…¨åŒæ­¥"),o({title:"æ•°æ®åº“æ›´æ–°éªŒè¯æˆåŠŸ",icon:"success",duration:1500})}},fail:e=>{console.error("æ•°æ®åº“éªŒè¯è¯·æ±‚å¤±è´¥:",e),o({title:"æ•°æ®åº“éªŒè¯å¤±è´¥",icon:"none",duration:1500})}}):console.log("æ–°å¢ç½‘ç‚¹æ¨¡å¼ï¼Œè·³è¿‡åˆ·æ–°è¯¦æƒ…")},goBack(){d()},sendUpdateRequest(i,s,c,r){if(console.log("å¼€å§‹å‘é€ä¿®æ”¹è¯·æ±‚..."),console.log("å‘é€çš„æ•°æ®:",s),console.log("ä½¿ç”¨çš„Token:",c),console.log("è¯·æ±‚URL:",i),!c||"undefined"===c||"null"===c)return console.error("âŒ Tokenæ— æ•ˆ:",c),void o({title:"è¯·é‡æ–°ç™»å½•ç®¡ç†å‘˜è´¦å·",icon:"none",duration:3e3});a({url:i,method:"POST",data:s,header:{"Content-Type":"application/json",Authorization:"Bearer "+c},timeout:3e4,dataType:"json",responseType:"text",success:a=>{var t;if(console.log("=== ä¿®æ”¹å“åº”è¯¦æƒ… ==="),console.log("å®Œæ•´å“åº”å¯¹è±¡:",a),console.log("å“åº”çŠ¶æ€ç :",a.statusCode),console.log("å“åº”æ•°æ®:",a.data),console.log("=== å“åº”è¯¦æƒ…ç»“æŸ ==="),200===a.statusCode&&a.data)if(console.log("HTTPè¯·æ±‚æˆåŠŸï¼Œæ£€æŸ¥ä¸šåŠ¡çŠ¶æ€ç "),console.log("ä¸šåŠ¡çŠ¶æ€ç :",a.data.code),console.log("å“åº”æ¶ˆæ¯:",a.data.msg),200===a.data.code||"200"===a.data.code){console.log("âœ… æ•°æ®åº“ä¿®æ”¹æˆåŠŸï¼Œå“åº”æ•°æ®:",a.data),o({title:r?"ç½‘ç‚¹æ•°æ®ä¿®æ”¹æˆåŠŸ":"æ–°å¢æˆåŠŸ",icon:"success",duration:2e3});const i={id:r?this.pointId:(null==(t=a.data.data)?void 0:t.id)||a.data.id,name:this.pointInfo.name.trim(),address:this.pointInfo.address.trim(),pointType:this.pointInfo.pointType.trim(),availableLarge:parseInt(this.pointInfo.availableLarge)||0,availableMedium:parseInt(this.pointInfo.availableMedium)||0,availableSmall:parseInt(this.pointInfo.availableSmall)||0,openTime:this.pointInfo.openTime.trim(),status:parseInt(this.pointInfo.status)||1,pointImage:this.pointInfo.pointImage||""};console.log("âœ… æ•°æ®å·²æˆåŠŸä¿®æ”¹åˆ°æ•°æ®åº“"),console.log("ä¿®æ”¹çš„æ•°æ®:",i),l("latestPointData",i),l("lastEditTime",Date.now());const s=e("pointList")||[];if(r){const e=s.findIndex((e=>e.id==i.id||e.Id==i.id));-1!==e&&(s[e]={...s[e],name:i.name,address:i.address,pointType:i.pointType,availableLarge:i.availableLarge,availableMedium:i.availableMedium,availableSmall:i.availableSmall,openTime:i.openTime,status:i.status,cabinetInfo:`${i.availableLarge}ç»„${i.availableMedium}ä¸»æœº${i.availableSmall}æŸœé—¨`},l("pointList",s),console.log("âœ… å·²æ›´æ–°ç½‘ç‚¹åˆ—è¡¨æ•°æ®"))}else{const e={id:i.id,name:i.name,address:i.address,pointType:i.pointType,availableLarge:i.availableLarge,availableMedium:i.availableMedium,availableSmall:i.availableSmall,openTime:i.openTime,status:i.status,cabinetInfo:`${i.availableLarge}ç»„${i.availableMedium}ä¸»æœº${i.availableSmall}æŸœé—¨`};s.unshift(e),l("pointList",s),console.log("âœ… å·²æ·»åŠ æ–°ç½‘ç‚¹åˆ°åˆ—è¡¨:",e)}l("currentPointData",i),l("dataUpdateTime",Date.now()),p("updatePointList",i),setTimeout((()=>{var e;const o=r?this.pointId:(null==(e=a.data.data)?void 0:e.id)||a.data.id;console.log("è·³è½¬åˆ°è¯¦æƒ…é¡µé¢ï¼Œä½¿ç”¨ID:",o,"æ˜¯å¦æ–°å¢æ¨¡å¼:",!r),n({url:`/pages/point-detail/point-detail?id=${o}&name=${encodeURIComponent(this.pointInfo.name)}&fromEdit=true`,success:()=>{console.log("âœ… æˆåŠŸè·³è½¬åˆ°è¯¦æƒ…é¡µé¢")},fail:e=>{console.error("è·³è½¬åˆ°è¯¦æƒ…é¡µé¢å¤±è´¥:",e),d()}})}),1e3)}else console.error("âŒ ä¸šåŠ¡é”™è¯¯:",a.data),o({title:a.data.msg||"ä¿®æ”¹å¤±è´¥",icon:"none",duration:3e3});else console.error("HTTPé”™è¯¯:",a.statusCode,a.data),o({title:`HTTPé”™è¯¯: ${a.statusCode}`,icon:"none"})},fail:e=>{console.error("âŒ ä¿®æ”¹è¯·æ±‚å¤±è´¥:",e),console.error("é”™è¯¯è¯¦æƒ…:",{errMsg:e.errMsg,statusCode:e.statusCode,data:e.data}),console.log("=== è¯·æ±‚è°ƒè¯•ä¿¡æ¯ ==="),console.log("è¯·æ±‚URL:",i),console.log("è¯·æ±‚æ•°æ®:",s),console.log("è¯·æ±‚å¤´:",{"Content-Type":"application/json",Authorization:"Bearer "+c}),console.log("Tokené•¿åº¦:",c?c.length:0),console.log("=== è°ƒè¯•ä¿¡æ¯ç»“æŸ ===");let a="ç½‘ç»œè¿æ¥å¤±è´¥",n=!1;e.errMsg&&e.errMsg.includes("ERR_EMPTY_RESPONSE")?(a="è¯·æ±‚æ ¼å¼å·²ä¿®æ­£ï¼Œè¯·é‡è¯•",console.error("å·²ä½¿ç”¨ä¸ApiPostç›¸åŒçš„è¯·æ±‚æ ¼å¼ï¼Œå¦‚æœä»ç„¶å¤±è´¥ï¼Œå¯èƒ½æ˜¯ï¼š"),console.error("1. åç«¯æœåŠ¡é—®é¢˜"),console.error("2. ç½‘ç»œè¿æ¥é—®é¢˜"),console.error("3. å…¶ä»–ç¯å¢ƒé—®é¢˜")):e.errMsg&&e.errMsg.includes("timeout")?a="è¯·æ±‚è¶…æ—¶ï¼Œè¯·é‡è¯•":e.errMsg&&e.errMsg.includes("fail")?(a="æœåŠ¡å™¨è¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡",n=!0):e.errMsg&&e.errMsg.includes("abort")&&(a="è¯·æ±‚è¢«ä¸­æ–­"),console.error("æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯:",a),o({title:a,icon:"none",duration:3e3}),n&&setTimeout((()=>{t({title:"åç«¯æœåŠ¡é—®é¢˜",content:"æ£€æµ‹åˆ°åç«¯æœåŠ¡é—®é¢˜ï¼Œè¯·æ£€æŸ¥æœåŠ¡çŠ¶æ€",showCancel:!1,confirmText:"çŸ¥é“äº†"})}),2e3)},complete:()=>{this.isSaving=!1}})},debugRequest(){console.log("=== è°ƒè¯•è¯·æ±‚æ ¼å¼ ===");const t=e("adminToken");console.log("Token:",t);const i={id:parseInt(this.pointId),name:this.pointInfo.name.trim(),address:this.pointInfo.address.trim(),point_type:this.pointInfo.pointType.trim(),available_large:parseInt(this.pointInfo.availableLarge)||0,available_medium:parseInt(this.pointInfo.availableMedium)||0,available_small:parseInt(this.pointInfo.availableSmall)||0,open_time:this.pointInfo.openTime.trim(),status:(parseInt(this.pointInfo.status)||1).toString(),mobile:"",latitude:0,longitude:0};console.log("è¯·æ±‚æ•°æ®:",i),console.log("è¯·æ±‚URL:","http://localhost:8000/admin/updatePoint"),console.log("è¯·æ±‚æ–¹æ³•:","POST"),console.log("è¯·æ±‚å¤´:",{"Content-Type":"application/json",Authorization:"Bearer "+t}),a({url:"http://localhost:8000/admin/updatePoint",method:"POST",data:i,header:{"Content-Type":"application/json",Authorization:"Bearer "+t},timeout:1e4,success:e=>{console.log("âœ… è°ƒè¯•è¯·æ±‚æˆåŠŸ:",e),o({title:"è¯·æ±‚æ ¼å¼æ­£ç¡®",icon:"success",duration:2e3})},fail:e=>{console.error("âŒ è°ƒè¯•è¯·æ±‚å¤±è´¥:",e),console.error("é”™è¯¯è¯¦æƒ…:",{errMsg:e.errMsg,statusCode:e.statusCode,data:e.data});let a="è¯·æ±‚å¤±è´¥";e.errMsg&&e.errMsg.includes("ERR_EMPTY_RESPONSE")?a="åç«¯è¿”å›ç©ºå“åº”ï¼Œå¯èƒ½æ˜¯æ•°æ®æ ¼å¼é—®é¢˜":e.errMsg&&e.errMsg.includes("timeout")?a="è¯·æ±‚è¶…æ—¶":e.errMsg&&e.errMsg.includes("fail")&&(a="è¯·æ±‚å¤±è´¥"),o({title:a,icon:"none",duration:3e3})}})}}},[["render",function(e,a,o,t,i,n){const s=_,l=u,d=S,p=M;return m(),c(l,{class:"point-edit"},{default:r((()=>[f(l,{class:"header"},{default:r((()=>[f(l,{class:"back-btn",onClick:n.goBack},{default:r((()=>[f(s,{class:"back-icon"},{default:r((()=>[h("â†")])),_:1})])),_:1},8,["onClick"]),f(l,{class:"title"},{default:r((()=>[h(g("new"===i.pointId?"æ–°å¢ç½‘ç‚¹":"ç¼–è¾‘ç½‘ç‚¹"),1)])),_:1}),f(l,{class:"header-right"},{default:r((()=>[f(s,{class:"menu-icon"},{default:r((()=>[h("â‹¯")])),_:1}),f(s,{class:"target-icon"},{default:r((()=>[h("â—")])),_:1})])),_:1})])),_:1}),f(l,{class:"photo-section"},{default:r((()=>[f(l,{class:"photo-placeholder",onClick:n.uploadPhoto},{default:r((()=>[i.pointInfo.pointImage?(m(),c(d,{key:0,src:i.pointInfo.pointImage,mode:"aspectFill",class:"main-photo"},null,8,["src"])):(m(),c(l,{key:1,class:"photo-upload"},{default:r((()=>[f(s,{class:"photo-icon"},{default:r((()=>[h("ğŸ“·")])),_:1}),f(s,{class:"photo-text"},{default:r((()=>[h("ç½‘ç‚¹ç…§ç‰‡")])),_:1})])),_:1}))])),_:1},8,["onClick"])])),_:1}),f(l,{class:"info-section"},{default:r((()=>[f(l,{class:"section-header"},{default:r((()=>[f(s,{class:"section-title"},{default:r((()=>[h("ç½‘ç‚¹ä¿¡æ¯")])),_:1}),f(s,{class:"section-tip"},{default:r((()=>[h("ç‚¹å‡»å„é¡¹å¯ç¼–è¾‘")])),_:1})])),_:1}),f(l,{class:"info-item",onClick:a[0]||(a[0]=e=>n.editField("name"))},{default:r((()=>[f(s,{class:"info-label"},{default:r((()=>[h("ç½‘ç‚¹åç§°")])),_:1}),f(s,{class:"info-value"},{default:r((()=>[h(g(i.pointInfo.name||"æœªè®¾ç½®"),1)])),_:1}),f(s,{class:"arrow"},{default:r((()=>[h(">")])),_:1})])),_:1}),f(l,{class:"info-item",onClick:a[1]||(a[1]=e=>n.editField("address"))},{default:r((()=>[f(s,{class:"info-label"},{default:r((()=>[h("ç½‘ç‚¹åœ°å€")])),_:1}),f(l,{class:"address-container"},{default:r((()=>[f(s,{class:"location-icon"},{default:r((()=>[h("ğŸ“")])),_:1}),f(s,{class:"info-value"},{default:r((()=>[h(g(i.pointInfo.address||"æœªè®¾ç½®"),1)])),_:1})])),_:1}),f(s,{class:"arrow"},{default:r((()=>[h(">")])),_:1})])),_:1}),f(l,{class:"info-item",onClick:a[2]||(a[2]=e=>n.editField("pointType"))},{default:r((()=>[f(s,{class:"info-label"},{default:r((()=>[h("ç½‘ç‚¹ç±»å‹")])),_:1}),f(s,{class:"info-value"},{default:r((()=>[h(g(i.pointInfo.pointType||"æœªè®¾ç½®"),1)])),_:1}),f(s,{class:"arrow"},{default:r((()=>[h(">")])),_:1})])),_:1}),f(l,{class:"info-item",onClick:a[3]||(a[3]=e=>n.editField("cabinet"))},{default:r((()=>[f(s,{class:"info-label"},{default:r((()=>[h("ç®¡ç†æŸœç»„")])),_:1}),f(s,{class:"info-value"},{default:r((()=>[h(g(n.getCabinetInfo()),1)])),_:1}),f(s,{class:"arrow"},{default:r((()=>[h(">")])),_:1})])),_:1}),f(l,{class:"info-item",onClick:a[4]||(a[4]=e=>n.editField("openTime"))},{default:r((()=>[f(s,{class:"info-label"},{default:r((()=>[h("è¥ä¸šæ—¶é—´")])),_:1}),f(s,{class:"info-value"},{default:r((()=>[h(g(i.pointInfo.openTime||"æœªè®¾ç½®"),1)])),_:1}),f(s,{class:"arrow"},{default:r((()=>[h(">")])),_:1})])),_:1}),f(l,{class:"info-item",onClick:a[5]||(a[5]=e=>n.editField("status"))},{default:r((()=>[f(s,{class:"info-label"},{default:r((()=>[h("ç½‘ç‚¹çŠ¶æ€")])),_:1}),f(s,{class:I(["info-value",1==i.pointInfo.staus?"status-normal":"status-closed"])},{default:r((()=>[h(g(1==i.pointInfo.staus?"æ­£å¸¸":"æš‚åœè¥ä¸š"),1)])),_:1},8,["class"]),f(s,{class:"arrow"},{default:r((()=>[h(">")])),_:1})])),_:1}),f(l,{class:"info-item",onClick:n.viewChargingRules},{default:r((()=>[f(s,{class:"info-label"},{default:r((()=>[h("æ”¶è´¹è§„åˆ™")])),_:1}),f(s,{class:"info-value"},{default:r((()=>[h("æŸ¥çœ‹")])),_:1}),f(s,{class:"arrow"},{default:r((()=>[h(">")])),_:1})])),_:1},8,["onClick"])])),_:1}),f(l,{class:"photo-list-section"},{default:r((()=>[f(s,{class:"section-title"},{default:r((()=>[h("ç½‘ç‚¹ç…§ç‰‡")])),_:1}),f(l,{class:"photo-list"},{default:r((()=>[(m(!0),b(T,null,v(i.pointInfo.photos,((e,a)=>(m(),c(l,{key:a,class:"photo-item"},{default:r((()=>[f(d,{src:e,mode:"aspectFill",class:"list-photo",onClick:a=>n.setMainPhoto(e)},null,8,["src","onClick"]),f(s,{class:"remove-btn",onClick:e=>n.removePhoto(a)},{default:r((()=>[h("Ã—")])),_:2},1032,["onClick"]),i.pointInfo.pointImage===e?(m(),c(s,{key:0,class:"main-photo-label"},{default:r((()=>[h("ä¸»å›¾")])),_:1})):y("",!0)])),_:2},1024)))),128)),f(l,{class:"add-photo",onClick:n.addPhoto},{default:r((()=>[f(s,{class:"add-icon"},{default:r((()=>[h("+")])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1}),f(l,{class:"save-section"},{default:r((()=>[f(p,{class:"save-btn",onClick:n.savePoint,disabled:i.isSaving},{default:r((()=>[h(g(i.isSaving?"æ­£åœ¨ä¿å­˜...":"new"===i.pointId?"æ–°å¢ç½‘ç‚¹":"ä¿å­˜"),1)])),_:1},8,["onClick","disabled"])])),_:1})])),_:1})}],["__scopeId","data-v-f26cc631"]]);export{P as default};
