import{g as t,r as e,a,m as s,p as l,v as o,e as i,w as n,i as c,o as r,f as d,j as u,t as h,x as p,G as g,H as m,n as k,C as f,D as y,F as _,k as w,S as L,l as M}from"./index-BgeTyoVd.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";const v=C({data:()=>({currentCity:"郑州",totalLockers:0,mapInstance:null,mapReady:!1,isLoading:!0,loadingText:"正在加载地图...",lockers:[],selectedLocker:null,mapMarkers:[],showFilter:!1,statusFilter:"all",showList:!1}),computed:{filteredLockers(){let t=this.lockers;return"all"!==this.statusFilter&&(t=t.filter((t=>(t.status||"available")===this.statusFilter))),t}},onLoad(){console.log("寄存点分布图页面加载");const e=t("selectedCity");e&&(this.currentCity=e.name),this.$nextTick((()=>{this.initMap().catch((t=>{console.error("地图初始化失败:",t),this.handleError("地图初始化失败: "+t.message)}))}))},onUnload(){console.log("页面卸载，清理地图资源"),this.mapInstance&&(this.mapInstance=null)},methods:{async initMap(){console.log("🗺️ 开始初始化寄存点分布图"),this.loadingText="正在加载百度地图...",this.isLoading=!0;try{await this.loadBaiduMapAPI(),this.createMapInstance(),setTimeout((()=>{this.mapReady?this.loadLockersData():console.log("等待地图加载完成...")}),1500)}catch(t){console.error("地图初始化失败:",t),this.isLoading=!1,this.handleNetworkError()}},loadBaiduMapAPI:()=>new Promise(((t,e)=>{if(void 0!==window.BMap)return void t();console.log("📡 加载百度地图JavaScript API");const a=setTimeout((()=>{e(new Error("百度地图API加载超时"))}),1e4),s=document.createElement("script");s.type="text/javascript",s.src="https://api.map.baidu.com/api?v=3.0&ak=9jnxn6bIxVgX1u4KffC5Cc83dTMzzYIA&callback=initLockerMapCallback",s.onerror=()=>{clearTimeout(a),e(new Error("百度地图API加载失败"))},window.initLockerMapCallback=()=>{clearTimeout(a),console.log("✅ 百度地图API加载完成"),delete window.initLockerMapCallback,t()},document.head.appendChild(s)})),createMapInstance(){console.log("🗺️ 创建百度地图实例"),this.loadingText="正在创建地图...";try{if(void 0===window.BMap)throw new Error("百度地图API未加载");const e=document.getElementById("lockerMapContainer");if(!e)throw new Error("地图容器未找到");const a=t("selectedCity"),s=(null==a?void 0:a.coordinates)||{longitude:113.6253,latitude:34.7466};this.mapInstance=new window.BMap.Map(e);const l=new window.BMap.Point(s.longitude,s.latitude);this.mapInstance.centerAndZoom(l,12),this.mapInstance.enableScrollWheelZoom(!0),this.mapInstance.addControl(new window.BMap.NavigationControl),this.mapInstance.addControl(new window.BMap.ScaleControl),this.mapInstance.addEventListener("tilesloaded",(()=>{console.log("✅ 地图瓦片加载完成"),this.mapReady=!0,this.loadingText="",0===this.lockers.length&&setTimeout((()=>{this.loadLockersData()}),500)})),setTimeout((()=>{this.mapReady||(console.log("⚠️ 地图瓦片加载超时，强制设置为就绪状态"),this.mapReady=!0,this.loadingText="",0===this.lockers.length&&this.loadLockersData())}),5e3),console.log("✅ 百度地图实例创建完成")}catch(e){console.error("❌ 创建地图实例失败:",e),this.handleError("创建地图实例失败: "+e.message)}},loadLockersData(){console.log("📍 开始加载寄存点分布数据"),this.loadingText="正在加载寄存点数据...",this.isLoading=!0;const e=t("selectedCity"),a=(null==e?void 0:e.coordinates)||{longitude:113.6253,latitude:34.7466};this.tryLoadFromAPI(a)},tryLoadFromAPI(t){const l=.1,o={northLat:t.latitude+l,southLat:t.latitude-l,eastLng:t.longitude+l,westLng:t.longitude-l},i=`http://localhost:8000/api/nearby/city/map?${new URLSearchParams({city_name:this.currentCity,north_lat:o.northLat.toString(),south_lat:o.southLat.toString(),east_lng:o.eastLng.toString(),west_lng:o.westLng.toString(),zoom_level:"12",enable_cluster:"false"}).toString()}`;console.log("📡 尝试调用寄存点分布图接口:",{url:i,method:"GET",params:{city_name:this.currentCity,bounds:o,zoom_level:12,enable_cluster:!1}}),console.log("🔍 API调用详情:"),console.log("- 城市名称:",this.currentCity),console.log("- 边界坐标:",o),console.log("- 完整URL:",i),e({url:i,method:"GET",header:{"Content-Type":"application/json",Accept:"application/json"},timeout:8e3,success:t=>{if(console.log("=== 寄存点分布图接口响应 ==="),console.log("HTTP状态码:",t.statusCode),console.log("响应数据:",t.data),console.log("响应数据类型:",typeof t.data),console.log("响应数据结构:",Object.keys(t.data||{})),this.isLoading=!1,200===t.statusCode&&t.data)this.handleLockersDataSuccess(t.data);else if(401===t.statusCode)console.log("⚠️ API需要认证，后端服务可能需要重启"),this.loadingText="正在连接服务器，请稍后重试...",a({title:"正在连接服务器...",icon:"loading",duration:3e3}),setTimeout((()=>{this.handleNetworkError()}),3e3);else{console.log("⚠️ API返回非200状态码:",t.statusCode),console.log("⚠️ 错误响应数据:",t.data),this.loadingText=`服务器返回错误: ${t.statusCode}`;let e=`服务器错误 (${t.statusCode})`;t.data&&t.data.message?e+=`: ${t.data.message}`:t.data&&t.data.error&&(e+=`: ${t.data.error}`),s({title:"请求失败",content:e,showCancel:!1,confirmText:"确定"}),this.handleNetworkError()}},fail:t=>{console.log("⚠️ API调用失败:",t),console.log("错误详情:",{errMsg:t.errMsg,statusCode:t.statusCode,data:t.data}),this.isLoading=!1,this.loadingText="网络连接失败，显示模拟数据",a({title:"网络连接失败",icon:"none",duration:2e3}),this.handleNetworkError()}})},handleLockersDataSuccess(t){console.log("✅ 寄存点数据加载成功"),console.log("原始响应数据:",t);try{let e=[];if(t.points&&Array.isArray(t.points))e=t.points;else{if(t.clusters&&Array.isArray(t.clusters))return console.log("⚠️ 收到聚合数据，但当前版本不支持聚合显示"),this.loadingText="不支持聚合数据显示",this.isLoading=!1,this.lockers=[],this.totalLockers=0,void a({title:"数据格式不支持",icon:"none",duration:2e3});t.data&&Array.isArray(t.data)?e=t.data:t.locker_points&&Array.isArray(t.locker_points)?e=t.locker_points:t.results&&Array.isArray(t.results)?e=t.results:t.lockers&&Array.isArray(t.lockers)?e=t.lockers:Array.isArray(t)?e=t:(console.log("⚠️ 未识别的响应数据格式，尝试提取所有可能的数组字段"),Object.keys(t).forEach((a=>{Array.isArray(t[a])&&t[a].length>0&&(console.log(`发现数组字段: ${a}`,t[a]),0===e.length&&(e=t[a]))})))}const s=this.processMapPointsData(e);this.lockers=s,this.totalLockers=s.length,console.log(`📍 成功加载 ${this.totalLockers} 个寄存点`),console.log("处理后的寄存点数据:",s),s.length>0?(this.displayLockersOnMap(),a({title:`加载了${this.totalLockers}个寄存点`,icon:"success",duration:2e3})):(console.log("⚠️ 处理后无有效寄存点数据"),this.loadingText="未找到寄存点数据",this.isLoading=!1,this.lockers=[],this.totalLockers=0,a({title:"未找到寄存点",icon:"none",duration:2e3}))}catch(e){console.error("❌ 处理寄存点数据失败:",e),this.handleError("处理寄存点数据失败: "+e.message)}},processLockersData:t=>(console.log("🔄 处理寄存点数据格式"),Array.isArray(t)&&0!==t.length?t.map(((t,e)=>{console.log(`处理第${e+1}个寄存点:`,t);const a={id:t.id||t.locker_id||t.point_id||`map_${e+1}`,name:t.name||t.locker_name||t.point_name||t.location_name||`寄存点${e+1}`,address:t.address||t.location||t.location_address||t.full_address||"地址信息待完善",longitude:parseFloat(t.longitude||t.lng||t.lon||113.6253),latitude:parseFloat(t.latitude||t.lat||34.7466),large:parseInt(t.large_count||t.large||t.large_capacity||t.big_count||0),medium:parseInt(t.medium_count||t.medium||t.medium_capacity||t.mid_count||0),small:parseInt(t.small_count||t.small||t.small_capacity||0),status:t.status||t.state||(t.available?"available":"unavailable")||"available",distance:t.distance||t.dist||"0km",rating:t.rating||t.score||0,rawData:t};return console.log(`处理后的第${e+1}个寄存点:`,a),a})):[]),processMapPointsData(t){return console.log("🔄 处理地图API点位数据格式"),Array.isArray(t)&&0!==t.length?t.map(((t,e)=>{console.log(`处理第${e+1}个地图点位:`,t);const a={id:t.id||`map_${e+1}`,name:t.name||`寄存点${e+1}`,address:t.address||"地址信息待完善",longitude:parseFloat(t.longitude||113.6253),latitude:parseFloat(t.latitude||34.7466),totalAvailable:parseInt(t.total_available||0),large:Math.floor(.3*(t.total_available||0)),medium:Math.floor(.4*(t.total_available||0)),small:Math.floor(.3*(t.total_available||0)),status:this.mapPointStatusToLockerStatus(t.status),distance:"0km",rating:0,rawData:t};return console.log(`处理后的第${e+1}个地图点位:`,a),a})):[]},mapPointStatusToLockerStatus(t){switch(t){case"available":case"busy":default:return"available";case"full":return"unavailable"}},handleNetworkError(){console.log("❌ 后端API调用失败"),this.loadingText="后端服务连接失败",this.isLoading=!1,this.lockers=[],this.totalLockers=0;const t=`无法获取${this.currentCity}的寄存点数据。\n\n可能的原因：\n1. 后端服务未启动\n2. 数据库中没有该城市的数据\n3. 网络连接问题\n\n请联系管理员或重试。`;s({title:"加载失败",content:t,showCancel:!0,cancelText:"返回",confirmText:"重试",success:t=>{t.confirm?this.refreshMap():l()}}),console.log("💡 调试信息:"),console.log("- 当前城市:",this.currentCity),console.log("- API地址: http://localhost:8000/api/nearby/city/map"),console.log("- 建议: 检查后端服务是否运行，数据库是否有城市数据")},generateMockLockers(t){const e=[],a=["郑州东站寄存点","二七广场寄存点","郑州大学寄存点","CBD商务区寄存点","火车站寄存点","紫荆山寄存点","金水路寄存点","花园路寄存点","中原万达寄存点","郑州机场寄存点","高铁站寄存点","市政府寄存点"],s=["郑州东站西广场","二七广场地铁站","郑州大学南门","CBD商务内环路","郑州火车站东广场","紫荆山地铁站","金水路玉凤路","花园路农业路","中原万达广场","新郑国际机场","郑州东站","市政府大楼"];for(let l=0;l<12;l++){const o=.1*(Math.random()-.5),i=.1*(Math.random()-.5);e.push({id:l+1,name:a[l],address:s[l],longitude:t.longitude+o,latitude:t.latitude+i,large:Math.floor(10*Math.random())+5,medium:Math.floor(15*Math.random())+10,small:Math.floor(20*Math.random())+15,status:Math.random()>.2?"available":"unavailable",distance:(10*Math.random()+.5).toFixed(1)+"km",rating:(2*Math.random()+3).toFixed(1)})}return e},displayLockersOnMap(){this.mapInstance?(console.log("📍 在地图上显示寄存点标记"),this.clearMapMarkers(),this.lockers.forEach(((t,e)=>{this.createLockerMarker(t,e)})),this.fitMapToMarkers()):console.error("❌ 地图实例不存在")},createLockerMarker(t,e){try{const e=new BMap.Point(t.longitude,t.latitude),a="available"===t.status?"data:image/svg+xml;charset=utf-8,"+encodeURIComponent('\n\t\t\t\t\t\t\t<svg width="32" height="40" viewBox="0 0 32 40" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t\t\t\t<path d="M16 0C7.2 0 0 7.2 0 16c0 16 16 24 16 24s16-8 16-24C32 7.2 24.8 0 16 0z" fill="#007AFF"/>\n\t\t\t\t\t\t\t\t<circle cx="16" cy="16" r="8" fill="white"/>\n\t\t\t\t\t\t\t\t<circle cx="16" cy="16" r="4" fill="#007AFF"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t'):"data:image/svg+xml;charset=utf-8,"+encodeURIComponent('\n\t\t\t\t\t\t\t<svg width="32" height="40" viewBox="0 0 32 40" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t\t\t\t<path d="M16 0C7.2 0 0 7.2 0 16c0 16 16 24 16 24s16-8 16-24C32 7.2 24.8 0 16 0z" fill="#FF3B30"/>\n\t\t\t\t\t\t\t\t<circle cx="16" cy="16" r="8" fill="white"/>\n\t\t\t\t\t\t\t\t<path d="M12 12 L20 20 M20 12 L12 20" stroke="#FF3B30" stroke-width="2"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t');if(void 0===window.BMap)return void console.error("百度地图API不可用");const s=new window.BMap.Icon(a,new window.BMap.Size(32,40),{anchor:new window.BMap.Size(16,40)}),l=new window.BMap.Marker(e,{icon:s});l.addEventListener("click",(()=>{this.onMarkerClick(t)}));const o=`\n\t\t\t\t\t\t<div style="padding: 10px; min-width: 200px;">\n\t\t\t\t\t\t\t<h4 style="margin: 0 0 8px 0; color: #333;">${t.name||"未知寄存点"}</h4>\n\t\t\t\t\t\t\t<p style="margin: 4px 0; color: #666; font-size: 12px;">地址: ${t.address||"地址未知"}</p>\n\t\t\t\t\t\t\t<div style="margin: 8px 0;">\n\t\t\t\t\t\t\t\t<span style="margin-right: 10px; font-size: 12px;">大柜: ${t.large||0}</span>\n\t\t\t\t\t\t\t\t<span style="margin-right: 10px; font-size: 12px;">中柜: ${t.medium||0}</span>\n\t\t\t\t\t\t\t\t<span style="font-size: 12px;">小柜: ${t.small||0}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div style="margin-top: 8px;">\n\t\t\t\t\t\t\t\t<span style="padding: 2px 6px; border-radius: 4px; font-size: 11px; color: white; background: ${"available"===t.status?"#007AFF":"#FF3B30"};">\n\t\t\t\t\t\t\t\t\t${"available"===t.status?"营业中":"暂停服务"}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`,i=new window.BMap.InfoWindow(o);l.addEventListener("click",(()=>{this.mapInstance&&this.mapInstance.openInfoWindow(i,e)})),this.mapInstance&&(this.mapInstance.addOverlay(l),this.mapMarkers.push(l))}catch(a){console.error("❌ 创建标记失败:",a)}},clearMapMarkers(){this.mapInstance&&this.mapMarkers.length>0&&this.mapMarkers.forEach((t=>{try{this.mapInstance.removeOverlay(t)}catch(e){console.warn("清除标记失败:",e)}})),this.mapMarkers=[]},fitMapToMarkers(){if(this.mapInstance&&0!==this.lockers.length)try{if(void 0===window.BMap)return void console.error("百度地图API不可用");const t=this.lockers.map((t=>new window.BMap.Point(t.longitude,t.latitude)));if(t.length>0){const e=this.mapInstance.getViewport(t);this.mapInstance.centerAndZoom(e.center,e.zoom)}}catch(t){console.error("❌ 调整地图视野失败:",t)}},onMarkerClick(t){console.log("📍 点击寄存点:",t.name),this.selectedLocker=t},selectCity(){o({url:"/pages/city-select/city-select"})},refreshMap(){console.log("🔄 刷新寄存点分布图"),this.isLoading=!0,this.loadingText="正在刷新数据...",this.lockers=[],this.totalLockers=0,this.selectedLocker=null,this.clearMapMarkers(),this.loadLockersData(),a({title:"正在刷新...",icon:"loading",duration:1e3})},centerToCity(){if(this.mapInstance&&void 0!==window.BMap)try{const e=t("selectedCity"),s=(null==e?void 0:e.coordinates)||{longitude:113.6253,latitude:34.7466},l=new window.BMap.Point(s.longitude,s.latitude);this.mapInstance.centerAndZoom(l,12),a({title:"已居中到"+this.currentCity,icon:"success",duration:1500})}catch(e){console.error("居中到城市失败:",e)}else console.warn("地图实例不可用")},showFilterPanel(){this.showFilter=!0},hideFilterPanel(){this.showFilter=!1},setStatusFilter(t){this.statusFilter=t,this.updateMapMarkers(),a({title:"筛选已更新",icon:"success",duration:1e3})},updateMapMarkers(){this.clearMapMarkers(),this.filteredLockers.forEach(((t,e)=>{this.createLockerMarker(t,e)})),this.totalLockers=this.filteredLockers.length},showLockerList(){this.showList=!0},hideLockerList(){this.showList=!1},testAPI(){console.log("🔧 测试API调用");const e=t("selectedCity"),a=(null==e?void 0:e.coordinates)||{longitude:113.6253,latitude:34.7466},l=`当前城市: ${this.currentCity}\n坐标: ${a.longitude}, ${a.latitude}\nAPI: /api/nearby/city/map`;s({title:"测试API",content:l+"\n\n是否重新调用后端API？",showCancel:!0,cancelText:"取消",confirmText:"测试",success:t=>{t.confirm&&this.refreshMap()}})},selectLocker(t){if(console.log("📍 选择寄存点:",t.name),this.selectedLocker=t,this.showList=!1,this.mapInstance&&void 0!==window.BMap)try{const e=new window.BMap.Point(t.longitude,t.latitude);this.mapInstance.centerAndZoom(e,15)}catch(e){console.error("地图居中失败:",e)}},clearSelection(){this.selectedLocker=null},goToDetail(){this.selectedLocker&&o({url:`/pages/locker-detail/locker-detail?id=${this.selectedLocker.id}`})},getDirections(){this.selectedLocker&&s({title:"获取路线",content:`是否打开地图应用获取到"${this.selectedLocker.name}"的路线？`,success:t=>{if(t.confirm){const t=`https://uri.amap.com/navigation?to=${this.selectedLocker.longitude},${this.selectedLocker.latitude}&toname=${this.selectedLocker.name}&mode=car`;window.open(t)}}})},handleError(t){console.error("❌ 错误:",t),console.log("🔄 自动切换到模拟数据模式"),this.handleNetworkError()}}},[["render",function(t,e,a,s,l,o){const C=w,v=c,b=L,x=M;return r(),i(v,{class:"page"},{default:n((()=>[d(v,{class:"header-section"},{default:n((()=>[d(v,{class:"city-info"},{default:n((()=>[d(v,{class:"city-selector",onClick:o.selectCity},{default:n((()=>[d(C,{class:"city-icon"},{default:n((()=>[u("📍")])),_:1}),d(C,{class:"city-name"},{default:n((()=>[u(h(l.currentCity),1)])),_:1}),d(C,{class:"dropdown-icon"},{default:n((()=>[u("▼")])),_:1})])),_:1},8,["onClick"]),d(v,{class:"locker-stats"},{default:n((()=>[d(C,{class:"stats-text"},{default:n((()=>[u("共找到 "+h(l.totalLockers)+" 个寄存点",1)])),_:1})])),_:1})])),_:1}),d(v,{class:"refresh-btn",onClick:o.refreshMap},{default:n((()=>[d(C,{class:"refresh-icon"},{default:n((()=>[u("🔄")])),_:1}),d(C,{class:"refresh-text"},{default:n((()=>[u("刷新")])),_:1})])),_:1},8,["onClick"])])),_:1}),d(v,{class:"map-container"},{default:n((()=>[l.mapReady?p("",!0):(r(),i(v,{key:0,class:"map-placeholder"},{default:n((()=>[d(v,{class:"placeholder-content"},{default:n((()=>[d(C,{class:"placeholder-icon"},{default:n((()=>[u("🗺️")])),_:1}),d(C,{class:"placeholder-text"},{default:n((()=>[u(h(l.loadingText),1)])),_:1}),l.isLoading?(r(),i(v,{key:0,class:"loading-spinner"})):p("",!0)])),_:1})])),_:1})),g(d(v,{id:"lockerMapContainer",class:"baidu-map-container"},null,512),[[m,l.mapReady]]),d(v,{class:"map-controls"},{default:n((()=>[d(v,{class:"control-btn center-btn",onClick:o.centerToCity},{default:n((()=>[d(C,{class:"btn-icon"},{default:n((()=>[u("🎯")])),_:1}),d(C,{class:"btn-text"},{default:n((()=>[u("居中")])),_:1})])),_:1},8,["onClick"]),d(v,{class:"control-btn filter-btn",onClick:o.showFilterPanel},{default:n((()=>[d(C,{class:"btn-icon"},{default:n((()=>[u("🔍")])),_:1}),d(C,{class:"btn-text"},{default:n((()=>[u("筛选")])),_:1})])),_:1},8,["onClick"]),d(v,{class:"control-btn list-btn",onClick:o.showLockerList},{default:n((()=>[d(C,{class:"btn-icon"},{default:n((()=>[u("📋")])),_:1}),d(C,{class:"btn-text"},{default:n((()=>[u("列表")])),_:1})])),_:1},8,["onClick"]),d(v,{class:"control-btn debug-btn",onClick:o.testAPI,style:{background:"#FF6B35"}},{default:n((()=>[d(C,{class:"btn-icon"},{default:n((()=>[u("🔧")])),_:1}),d(C,{class:"btn-text"},{default:n((()=>[u("测试API")])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1}),l.showFilter?(r(),i(v,{key:0,class:"filter-panel"},{default:n((()=>[d(v,{class:"filter-header"},{default:n((()=>[d(C,{class:"filter-title"},{default:n((()=>[u("筛选条件")])),_:1}),d(C,{class:"close-btn",onClick:o.hideFilterPanel},{default:n((()=>[u("✕")])),_:1},8,["onClick"])])),_:1}),d(v,{class:"filter-content"},{default:n((()=>[d(v,{class:"filter-item"},{default:n((()=>[d(C,{class:"filter-label"},{default:n((()=>[u("营业状态")])),_:1}),d(v,{class:"filter-options"},{default:n((()=>[d(v,{class:k(["filter-option",{active:"all"===l.statusFilter}]),onClick:e[0]||(e[0]=t=>o.setStatusFilter("all"))},{default:n((()=>[d(C,{class:"option-text"},{default:n((()=>[u("全部")])),_:1})])),_:1},8,["class"]),d(v,{class:k(["filter-option",{active:"available"===l.statusFilter}]),onClick:e[1]||(e[1]=t=>o.setStatusFilter("available"))},{default:n((()=>[d(C,{class:"option-text"},{default:n((()=>[u("营业中")])),_:1})])),_:1},8,["class"]),d(v,{class:k(["filter-option",{active:"unavailable"===l.statusFilter}]),onClick:e[2]||(e[2]=t=>o.setStatusFilter("unavailable"))},{default:n((()=>[d(C,{class:"option-text"},{default:n((()=>[u("暂停服务")])),_:1})])),_:1},8,["class"])])),_:1})])),_:1})])),_:1})])),_:1})):p("",!0),l.showList?(r(),i(v,{key:1,class:"locker-list-panel"},{default:n((()=>[d(v,{class:"list-header"},{default:n((()=>[d(C,{class:"list-title"},{default:n((()=>[u(h(l.currentCity)+"寄存点列表",1)])),_:1}),d(C,{class:"close-btn",onClick:o.hideLockerList},{default:n((()=>[u("✕")])),_:1},8,["onClick"])])),_:1}),d(b,{class:"list-content","scroll-y":"true"},{default:n((()=>[(r(!0),f(_,null,y(o.filteredLockers,((t,e)=>(r(),i(v,{class:"locker-item",key:e,onClick:e=>o.selectLocker(t)},{default:n((()=>[d(v,{class:"locker-info"},{default:n((()=>[d(C,{class:"locker-name"},{default:n((()=>[u(h(t.name),1)])),_:2},1024),d(C,{class:"locker-address"},{default:n((()=>[u("📍 "+h(t.address),1)])),_:2},1024),d(v,{class:"locker-capacity"},{default:n((()=>[d(C,{class:"capacity-item large"},{default:n((()=>[u("大"+h(t.large||0),1)])),_:2},1024),d(C,{class:"capacity-item medium"},{default:n((()=>[u("中"+h(t.medium||0),1)])),_:2},1024),d(C,{class:"capacity-item small"},{default:n((()=>[u("小"+h(t.small||0),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),d(v,{class:k(["locker-status",t.status||"available"])},{default:n((()=>[d(C,{class:"status-text"},{default:n((()=>[u(h("available"!==t.status&&t.status?"暂停服务":"营业中"),1)])),_:2},1024)])),_:2},1032,["class"])])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})):p("",!0),l.selectedLocker?(r(),i(v,{key:2,class:"selected-locker-info"},{default:n((()=>[d(v,{class:"info-header"},{default:n((()=>[d(C,{class:"locker-name"},{default:n((()=>[u(h(l.selectedLocker.name),1)])),_:1}),d(C,{class:"close-btn",onClick:o.clearSelection},{default:n((()=>[u("✕")])),_:1},8,["onClick"])])),_:1}),d(v,{class:"info-content"},{default:n((()=>[d(C,{class:"locker-address"},{default:n((()=>[u("📍 "+h(l.selectedLocker.address),1)])),_:1}),d(v,{class:"capacity-info"},{default:n((()=>[d(v,{class:"capacity-item"},{default:n((()=>[d(C,{class:"capacity-label"},{default:n((()=>[u("大柜")])),_:1}),d(C,{class:"capacity-value"},{default:n((()=>[u(h(l.selectedLocker.large||0),1)])),_:1})])),_:1}),d(v,{class:"capacity-item"},{default:n((()=>[d(C,{class:"capacity-label"},{default:n((()=>[u("中柜")])),_:1}),d(C,{class:"capacity-value"},{default:n((()=>[u(h(l.selectedLocker.medium||0),1)])),_:1})])),_:1}),d(v,{class:"capacity-item"},{default:n((()=>[d(C,{class:"capacity-label"},{default:n((()=>[u("小柜")])),_:1}),d(C,{class:"capacity-value"},{default:n((()=>[u(h(l.selectedLocker.small||0),1)])),_:1})])),_:1})])),_:1}),d(v,{class:"info-actions"},{default:n((()=>[d(x,{class:"action-btn primary",onClick:o.goToDetail},{default:n((()=>[u("查看详情")])),_:1},8,["onClick"]),d(x,{class:"action-btn secondary",onClick:o.getDirections},{default:n((()=>[u("获取路线")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})):p("",!0),l.isLoading?(r(),i(v,{key:3,class:"loading-overlay"},{default:n((()=>[d(v,{class:"loading-content"},{default:n((()=>[d(v,{class:"loading-spinner"}),d(C,{class:"loading-text"},{default:n((()=>[u(h(l.loadingText),1)])),_:1})])),_:1})])),_:1})):p("",!0)])),_:1})}],["__scopeId","data-v-55d2acda"]]);export{v as default};
