import{g as e,d as a,v as s,m as l,b as t,h as o,a as n,N as r,s as c,e as i,w as d,i as u,o as h,f as m,j as f,t as g,x as _,u as v,k}from"./index-BgeTyoVd.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";const p=C({data:()=>({isLoggedIn:!0,username:"智慧存0987",phoneNumber:"18512345678",avatarUrl:""}),computed:{maskedPhone(){return this.phoneNumber?this.phoneNumber.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2"):""}},onLoad(){this.checkLoginStatus()},onShow(){this.checkLoginStatus()},methods:{checkLoginStatus(){const s=e("token"),l=e("userData");if(!s||!l)return console.log("用户未登录，跳转到登录页"),this.isLoggedIn=!1,void a({url:"/pages/login/login"});this.loadUserData(l)},loadUserData(e){try{e&&(this.username=e.username||e.nickname||"智慧存用户",this.phoneNumber=e.phone||"",this.avatarUrl=e.avatar||"",this.isLoggedIn=!0,console.log("用户数据加载成功:",{username:this.username,phone:this.phoneNumber}))}catch(a){console.error("加载用户数据失败:",a),this.handleLogout()}},handleUserClick(){this.isLoggedIn?s({url:`/pages/user-edit/user-edit?username=${encodeURIComponent(this.username)}&phoneNumber=${encodeURIComponent(this.phoneNumber)}&avatarUrl=${encodeURIComponent(this.avatarUrl)}`}):s({url:"/pages/login/login"})},handleViewAllOrders(){console.log("跳转到订单页面"),s({url:"/pages/orders/orders"})},handleRetrieve(){l({title:"确认取件",content:"确定要取出寄存的物品吗？",success:e=>{e.confirm&&(t({title:"处理中..."}),setTimeout((()=>{o(),n({title:"取件成功",icon:"success"}),setTimeout((()=>{this.loadUserData()}),1500)}),2e3))}})},handleCustomerService(){s({url:"/pages/customer-service/customer-service"})},handleUserGuide(){s({url:"/pages/user-guide/user-guide"})},handleCoupons(){s({url:"/pages/coupons/coupons"})},handleUserAgreement(){s({url:"/pages/user-agreement/user-agreement"})},handleBackToLogin(){r.showBackToLoginConfirm()},handleLogout(){r.showLogoutConfirm((()=>{this.isLoggedIn=!1,this.username="",this.phoneNumber="",this.avatarUrl=""}))},handleHomeClick(){c({url:"/pages/index/index"})},handleOrdersClick(){s({url:"/pages/order-detail/order-detail"})},handleMyClick(){console.log("当前在我的页面")}}},[["render",function(e,a,s,l,t,o){const n=v,r=k,c=u;return h(),i(c,{class:"my-container"},{default:d((()=>[m(c,{class:"user-section",onClick:o.handleUserClick},{default:d((()=>[m(c,{class:"avatar-container"},{default:d((()=>[m(c,{class:"avatar"},{default:d((()=>[t.avatarUrl?(h(),i(n,{key:0,src:t.avatarUrl,class:"avatar-image",mode:"aspectFill"},null,8,["src"])):(h(),i(r,{key:1,class:"avatar-icon"},{default:d((()=>[f("👤")])),_:1}))])),_:1})])),_:1}),m(c,{class:"user-info"},{default:d((()=>[t.isLoggedIn?(h(),i(r,{key:1,class:"username"},{default:d((()=>[f(g(t.username),1)])),_:1})):(h(),i(r,{key:0,class:"login-text"},{default:d((()=>[f("点击登录")])),_:1})),t.isLoggedIn?(h(),i(r,{key:2,class:"phone-number"},{default:d((()=>[f(g(o.maskedPhone),1)])),_:1})):_("",!0)])),_:1})])),_:1},8,["onClick"]),m(c,{class:"orders-section"},{default:d((()=>[m(c,{class:"section-header",onClick:o.handleViewAllOrders},{default:d((()=>[m(r,{class:"section-title"},{default:d((()=>[f("我的订单")])),_:1}),m(r,{class:"view-all"},{default:d((()=>[f("全部订单>")])),_:1})])),_:1},8,["onClick"])])),_:1}),m(c,{class:"services-section"},{default:d((()=>[m(r,{class:"section-title"},{default:d((()=>[f("我的服务")])),_:1}),m(c,{class:"service-list"},{default:d((()=>[m(c,{class:"service-item",onClick:o.handleCustomerService},{default:d((()=>[m(r,{class:"service-text"},{default:d((()=>[f("在线客服")])),_:1}),m(r,{class:"arrow"},{default:d((()=>[f(">")])),_:1})])),_:1},8,["onClick"]),m(c,{class:"service-item",onClick:o.handleUserGuide},{default:d((()=>[m(r,{class:"service-text"},{default:d((()=>[f("使用指南")])),_:1}),m(r,{class:"arrow"},{default:d((()=>[f(">")])),_:1})])),_:1},8,["onClick"]),m(c,{class:"service-item",onClick:o.handleCoupons},{default:d((()=>[m(r,{class:"service-text"},{default:d((()=>[f("优惠卡券")])),_:1}),m(r,{class:"dev-tag"},{default:d((()=>[f("开发中")])),_:1}),m(r,{class:"arrow"},{default:d((()=>[f(">")])),_:1})])),_:1},8,["onClick"]),m(c,{class:"service-item",onClick:o.handleUserAgreement},{default:d((()=>[m(r,{class:"service-text"},{default:d((()=>[f("用户协议")])),_:1}),m(r,{class:"arrow"},{default:d((()=>[f(">")])),_:1})])),_:1},8,["onClick"]),m(c,{class:"service-item",onClick:o.handleBackToLogin},{default:d((()=>[m(r,{class:"service-text"},{default:d((()=>[f("回到登录页")])),_:1}),m(r,{class:"arrow"},{default:d((()=>[f(">")])),_:1})])),_:1},8,["onClick"]),m(c,{class:"service-item",onClick:o.handleLogout},{default:d((()=>[m(r,{class:"service-text"},{default:d((()=>[f("退出登录")])),_:1}),m(r,{class:"arrow"},{default:d((()=>[f(">")])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1}),m(c,{class:"bottom-nav"},{default:d((()=>[m(c,{class:"nav-item",onClick:o.handleHomeClick},{default:d((()=>[m(r,{class:"nav-icon"},{default:d((()=>[f("🏠")])),_:1}),m(r,{class:"nav-text"},{default:d((()=>[f("首页")])),_:1})])),_:1},8,["onClick"]),m(c,{class:"nav-item",onClick:o.handleOrdersClick},{default:d((()=>[m(r,{class:"nav-icon"},{default:d((()=>[f("📋")])),_:1}),m(r,{class:"nav-text"},{default:d((()=>[f("订单")])),_:1})])),_:1},8,["onClick"]),m(c,{class:"nav-item active",onClick:o.handleMyClick},{default:d((()=>[m(r,{class:"nav-icon"},{default:d((()=>[f("👤")])),_:1}),m(r,{class:"nav-text"},{default:d((()=>[f("我的")])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1})}],["__scopeId","data-v-f5e4f62a"]]);export{p as default};
