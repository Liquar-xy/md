import{g as a,r as e,a as t,v as o,p as i,e as l,w as s,i as n,o as d,f as c,j as r,x as u,t as p,n as f,k as g,u as h}from"./index-BAOqw0gZ.js";import{_ as m}from"./_plugin-vue_export-helper.BCo6x5W8.js";const _=m({data:()=>({pointId:null,pointName:"",pointDetail:{name:"",address:"",pointType:"",availableLarge:0,availableMedium:0,availableSmall:0,openTime:"",staus:1,pointImage:""},isLoading:!0,error:"",isNavigating:!1}),onLoad(e){this.pointId=e.id||1,this.pointName=decodeURIComponent(e.name||""),console.log("ç½‘ç‚¹è¯¦æƒ…é¡µé¢åŠ è½½ - ID:",this.pointId,"åç§°:",this.pointName),console.log("å®Œæ•´options:",e);const t=a("adminToken");console.log("å½“å‰token:",t),this.getPointDetail()},onShow(){this.isNavigating=!1,console.log("é¡µé¢æ˜¾ç¤ºï¼Œé‡ç½®å¯¼èˆªçŠ¶æ€")},methods:{getPointDetail(){this.isLoading=!0,this.error="",console.log("æ­£åœ¨èŽ·å–ç½‘ç‚¹è¯¦æƒ…ï¼ŒID:",this.pointId),this.pointDetail={name:"",address:"",pointType:"",availableLarge:0,availableMedium:0,availableSmall:0,openTime:"",staus:1,pointImage:""};const o={id:this.pointId};console.log("å‘é€çš„è¯·æ±‚æ•°æ®:",o),e({url:"http://localhost:8000/point_info",method:"POST",data:o,header:{"Content-Type":"application/json",Authorization:"Bearer "+a("adminToken")},success:a=>{var e;if(this.isLoading=!1,console.log("ç½‘ç‚¹è¯¦æƒ…æŽ¥å£è¿”å›žæ•°æ®:",a),!a.data||200!==a.data.code&&"200"!==a.data.code)this.error=(null==(e=a.data)?void 0:e.msg)||"èŽ·å–ç½‘ç‚¹è¯¦æƒ…å¤±è´¥",console.error("æŽ¥å£è¿”å›žé”™è¯¯:",a.data),t({title:this.error,icon:"none"});else{console.log("åŽŸå§‹æŽ¥å£è¿”å›žæ•°æ®:",a.data);const e=a.data.data||a.data;console.log("åŽç«¯è¿”å›žçš„åŽŸå§‹æ•°æ®:",e),this.pointDetail=e,console.log("å¤„ç†åŽçš„ç½‘ç‚¹è¯¦æƒ…:",this.pointDetail),t({title:"æ•°æ®åŠ è½½æˆåŠŸ",icon:"success",duration:1e3})}},fail:a=>{this.isLoading=!1,console.error("ç½‘ç‚¹è¯¦æƒ…è¯·æ±‚å¤±è´¥:",a),this.error="ç½‘ç»œè¯·æ±‚å¤±è´¥",t({title:this.error,icon:"none"})}})},getCabinetInfo(){if(!this.pointDetail)return"0ç»„0ä¸»æœº0æŸœé—¨";const{availableLarge:a,availableMedium:e,availableSmall:t}=this.pointDetail;return`${parseInt(a)||0}ç»„${parseInt(e)||0}ä¸»æœº${parseInt(t)||0}æŸœé—¨`},editPoint(){console.log("ç‚¹å‡»ç¼–è¾‘ç½‘ç‚¹ï¼ŒID:",this.pointId,"åç§°:",this.pointName),o({url:`/pages/point-edit/point-edit?id=${this.pointId}&name=${encodeURIComponent(this.pointName)}`})},openBaiduMap(){if(!this.pointDetail.address)return void t({title:"ç½‘ç‚¹åœ°å€ä¸ºç©º",icon:"none"});console.log("æ‰“å¼€åœ°å›¾é¡µé¢ï¼Œåœ°å€:",this.pointDetail.address);const a=encodeURIComponent(this.pointDetail.name||"ç½‘ç‚¹ä½ç½®"),e=encodeURIComponent(this.pointDetail.address);o({url:`/pages/map-view/map-view?name=${a}&address=${e}`,success:()=>{console.log("è·³è½¬åˆ°åœ°å›¾é¡µé¢æˆåŠŸ")},fail:a=>{console.error("è·³è½¬åˆ°åœ°å›¾é¡µé¢å¤±è´¥:",a),t({title:"è·³è½¬å¤±è´¥",icon:"none"})}})},goToPriceRule(){this.isNavigating?console.log("æ­£åœ¨è·³è½¬ä¸­ï¼Œå¿½ç•¥é‡å¤ç‚¹å‡»"):(this.isNavigating=!0,console.log("ç‚¹å‡»æ”¶è´¹è§„åˆ™ï¼Œç½‘ç‚¹ID:",this.pointId,"åç§°:",this.pointName),o({url:`/pages/price-rule/price-rule?id=${this.pointId}&name=${encodeURIComponent(this.pointName)}`,success:()=>{console.log("è·³è½¬æˆåŠŸ"),setTimeout((()=>{this.isNavigating=!1}),500)},fail:a=>{console.error("è·³è½¬å¤±è´¥:",a),this.isNavigating=!1,t({title:"è·³è½¬å¤±è´¥",icon:"none"})}}))},goBack(){i()}}},[["render",function(a,e,t,o,i,m){const _=g,v=n,I=h;return d(),l(v,{class:"point-detail"},{default:s((()=>[c(v,{class:"header"},{default:s((()=>[c(v,{class:"back-btn",onClick:m.goBack},{default:s((()=>[c(_,{class:"back-icon"},{default:s((()=>[r("â†")])),_:1})])),_:1},8,["onClick"]),c(v,{class:"title"},{default:s((()=>[r("æˆ‘çš„ç½‘ç‚¹")])),_:1}),c(v,{class:"header-right"},{default:s((()=>[c(_,{class:"edit-btn",onClick:m.editPoint},{default:s((()=>[r("ç¼–è¾‘")])),_:1},8,["onClick"])])),_:1})])),_:1}),i.pointDetail?(d(),l(v,{key:0,class:"photo-section"},{default:s((()=>[c(v,{class:"photo-placeholder"},{default:s((()=>[i.pointDetail.pointImage?(d(),l(I,{key:0,src:i.pointDetail.pointImage,mode:"aspectFill",class:"main-photo"},null,8,["src"])):(d(),l(v,{key:1,class:"photo-upload"},{default:s((()=>[c(_,{class:"photo-icon"},{default:s((()=>[r("ðŸ“·")])),_:1}),c(_,{class:"photo-text"},{default:s((()=>[r("ç½‘ç‚¹ç…§ç‰‡")])),_:1})])),_:1}))])),_:1})])),_:1})):u("",!0),i.pointDetail?(d(),l(v,{key:1,class:"info-section"},{default:s((()=>[c(v,{class:"info-item"},{default:s((()=>[c(_,{class:"info-label"},{default:s((()=>[r("ç½‘ç‚¹åç§°")])),_:1}),c(_,{class:"info-value"},{default:s((()=>[r(p(i.pointDetail.name),1)])),_:1}),c(_,{class:"arrow"},{default:s((()=>[r(">")])),_:1})])),_:1}),c(v,{class:"info-item clickable",onClick:m.openBaiduMap},{default:s((()=>[c(_,{class:"info-label"},{default:s((()=>[r("ç½‘ç‚¹åœ°å€")])),_:1}),c(v,{class:"address-container"},{default:s((()=>[c(_,{class:"location-icon"},{default:s((()=>[r("ðŸ“")])),_:1}),c(_,{class:"info-value"},{default:s((()=>[r(p(i.pointDetail.address),1)])),_:1})])),_:1}),c(_,{class:"arrow"},{default:s((()=>[r(">")])),_:1})])),_:1},8,["onClick"]),c(v,{class:"info-item"},{default:s((()=>[c(_,{class:"info-label"},{default:s((()=>[r("ç½‘ç‚¹ç±»åž‹")])),_:1}),c(_,{class:"info-value"},{default:s((()=>[r(p(i.pointDetail.pointType),1)])),_:1}),c(_,{class:"arrow"},{default:s((()=>[r(">")])),_:1})])),_:1}),c(v,{class:"info-item"},{default:s((()=>[c(_,{class:"info-label"},{default:s((()=>[r("ç®¡ç†æŸœç»„")])),_:1}),c(_,{class:"info-value"},{default:s((()=>[r(p(m.getCabinetInfo()),1)])),_:1}),c(_,{class:"arrow"},{default:s((()=>[r(">")])),_:1})])),_:1}),c(v,{class:"info-item"},{default:s((()=>[c(_,{class:"info-label"},{default:s((()=>[r("è¥ä¸šæ—¶é—´")])),_:1}),c(_,{class:"info-value"},{default:s((()=>[r(p(i.pointDetail.openTime),1)])),_:1}),c(_,{class:"arrow"},{default:s((()=>[r(">")])),_:1})])),_:1}),c(v,{class:"info-item"},{default:s((()=>[c(_,{class:"info-label"},{default:s((()=>[r("ç½‘ç‚¹çŠ¶æ€")])),_:1}),c(_,{class:f(["info-value",1===i.pointDetail.staus?"status-normal":"status-closed"])},{default:s((()=>[r(p(1===i.pointDetail.staus?"æ­£å¸¸":"æš‚åœè¥ä¸š"),1)])),_:1},8,["class"]),c(_,{class:"arrow"},{default:s((()=>[r(">")])),_:1})])),_:1}),c(v,{class:"info-item clickable",onClick:m.goToPriceRule},{default:s((()=>[c(_,{class:"info-label"},{default:s((()=>[r("æ”¶è´¹è§„åˆ™")])),_:1}),c(_,{class:"info-value"},{default:s((()=>[r("æŸ¥çœ‹")])),_:1}),c(_,{class:"arrow"},{default:s((()=>[r(">")])),_:1})])),_:1},8,["onClick"])])),_:1})):u("",!0),i.isLoading?(d(),l(v,{key:2,class:"loading"},{default:s((()=>[c(_,null,{default:s((()=>[r("åŠ è½½ä¸­...")])),_:1})])),_:1})):u("",!0),i.error?(d(),l(v,{key:3,class:"error"},{default:s((()=>[c(_,null,{default:s((()=>[r(p(i.error),1)])),_:1})])),_:1})):u("",!0)])),_:1})}],["__scopeId","data-v-e94e1d4c"]]);export{_ as default};
