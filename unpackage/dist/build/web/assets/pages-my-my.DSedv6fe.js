import{g as e,d as s,v as a,s as l,m as t,b as o,h as n,a as c,N as r,e as i,w as d,i as u,o as h,f as m,j as g,t as f,x as _,u as v,k}from"./index-C_HCjYUn.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";const p=C({data:()=>({isLoggedIn:!0,username:"智慧存0987",phoneNumber:"18512345678",avatarUrl:""}),computed:{maskedPhone(){return this.phoneNumber?this.phoneNumber.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2"):""}},onLoad(){this.checkLoginStatus()},onShow(){this.checkLoginStatus()},methods:{checkLoginStatus(){const a=e("token"),l=e("userData");if(!a||!l)return console.log("用户未登录，跳转到登录页"),this.isLoggedIn=!1,void s({url:"/pages/login/login"});this.loadUserData(l)},loadUserData(e){try{e&&(this.username=e.username||e.nickname||"智慧存用户",this.phoneNumber=e.phone||"",this.avatarUrl=e.avatar||"",this.isLoggedIn=!0,console.log("用户数据加载成功:",{username:this.username,phone:this.phoneNumber}))}catch(s){console.error("加载用户数据失败:",s),this.handleLogout()}},handleUserClick(){this.isLoggedIn?a({url:`/pages/user-edit/user-edit?username=${encodeURIComponent(this.username)}&phoneNumber=${encodeURIComponent(this.phoneNumber)}&avatarUrl=${encodeURIComponent(this.avatarUrl)}`}):a({url:"/pages/login/login"})},handleViewAllOrders(){console.log("跳转到订单页面"),console.log("尝试使用switchTab跳转到订单页面"),l({url:"/pages/orders/orders",success:()=>{console.log("switchTab跳转成功")},fail:e=>{console.error("switchTab跳转失败:",e),t({title:"跳转失败",content:`错误信息: ${e.errMsg||"未知错误"}`,showCancel:!1})}})},handleRetrieve(){t({title:"确认取件",content:"确定要取出寄存的物品吗？",success:e=>{e.confirm&&(o({title:"处理中..."}),setTimeout((()=>{n(),c({title:"取件成功",icon:"success"}),setTimeout((()=>{this.loadUserData()}),1500)}),2e3))}})},handleCustomerService(){a({url:"/pages/customer-service/customer-service"})},handleUserGuide(){a({url:"/pages/user-guide/user-guide"})},handleCoupons(){a({url:"/pages/coupons/coupons"})},handleUserAgreement(){a({url:"/pages/user-agreement/user-agreement"})},handleBackToLogin(){r.showBackToLoginConfirm()},handleLogout(){r.showLogoutConfirm((()=>{this.isLoggedIn=!1,this.username="",this.phoneNumber="",this.avatarUrl=""}))},handleHomeClick(){l({url:"/pages/index/index"})},handleOrdersClick(){console.log("底部导航：跳转到订单页面"),l({url:"/pages/orders/orders",success:()=>{console.log("底部导航：switchTab跳转成功")},fail:e=>{console.error("底部导航：切换到订单页面失败:",e),t({title:"跳转失败",content:`错误信息: ${e.errMsg||"未知错误"}`,showCancel:!1})}})},handleMyClick(){console.log("当前在我的页面")}}},[["render",function(e,s,a,l,t,o){const n=v,c=k,r=u;return h(),i(r,{class:"my-container"},{default:d((()=>[m(r,{class:"user-section",onClick:o.handleUserClick},{default:d((()=>[m(r,{class:"avatar-container"},{default:d((()=>[m(r,{class:"avatar"},{default:d((()=>[t.avatarUrl?(h(),i(n,{key:0,src:t.avatarUrl,class:"avatar-image",mode:"aspectFill"},null,8,["src"])):(h(),i(c,{key:1,class:"avatar-icon"},{default:d((()=>[g("👤")])),_:1}))])),_:1})])),_:1}),m(r,{class:"user-info"},{default:d((()=>[t.isLoggedIn?(h(),i(c,{key:1,class:"username"},{default:d((()=>[g(f(t.username),1)])),_:1})):(h(),i(c,{key:0,class:"login-text"},{default:d((()=>[g("点击登录")])),_:1})),t.isLoggedIn?(h(),i(c,{key:2,class:"phone-number"},{default:d((()=>[g(f(o.maskedPhone),1)])),_:1})):_("",!0)])),_:1})])),_:1},8,["onClick"]),m(r,{class:"orders-section"},{default:d((()=>[m(r,{class:"section-header",onClick:o.handleViewAllOrders},{default:d((()=>[m(c,{class:"section-title"},{default:d((()=>[g("我的订单")])),_:1}),m(c,{class:"view-all"},{default:d((()=>[g("全部订单>")])),_:1})])),_:1},8,["onClick"])])),_:1}),m(r,{class:"services-section"},{default:d((()=>[m(c,{class:"section-title"},{default:d((()=>[g("我的服务")])),_:1}),m(r,{class:"service-list"},{default:d((()=>[m(r,{class:"service-item",onClick:o.handleCustomerService},{default:d((()=>[m(c,{class:"service-text"},{default:d((()=>[g("在线客服")])),_:1}),m(c,{class:"arrow"},{default:d((()=>[g(">")])),_:1})])),_:1},8,["onClick"]),m(r,{class:"service-item",onClick:o.handleUserGuide},{default:d((()=>[m(c,{class:"service-text"},{default:d((()=>[g("使用指南")])),_:1}),m(c,{class:"arrow"},{default:d((()=>[g(">")])),_:1})])),_:1},8,["onClick"]),m(r,{class:"service-item",onClick:o.handleCoupons},{default:d((()=>[m(c,{class:"service-text"},{default:d((()=>[g("优惠卡券")])),_:1}),m(c,{class:"dev-tag"},{default:d((()=>[g("开发中")])),_:1}),m(c,{class:"arrow"},{default:d((()=>[g(">")])),_:1})])),_:1},8,["onClick"]),m(r,{class:"service-item",onClick:o.handleUserAgreement},{default:d((()=>[m(c,{class:"service-text"},{default:d((()=>[g("用户协议")])),_:1}),m(c,{class:"arrow"},{default:d((()=>[g(">")])),_:1})])),_:1},8,["onClick"]),m(r,{class:"service-item",onClick:o.handleBackToLogin},{default:d((()=>[m(c,{class:"service-text"},{default:d((()=>[g("回到登录页")])),_:1}),m(c,{class:"arrow"},{default:d((()=>[g(">")])),_:1})])),_:1},8,["onClick"]),m(r,{class:"service-item",onClick:o.handleLogout},{default:d((()=>[m(c,{class:"service-text"},{default:d((()=>[g("退出登录")])),_:1}),m(c,{class:"arrow"},{default:d((()=>[g(">")])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1}),m(r,{class:"bottom-nav"},{default:d((()=>[m(r,{class:"nav-item",onClick:o.handleHomeClick},{default:d((()=>[m(c,{class:"nav-icon"},{default:d((()=>[g("🏠")])),_:1}),m(c,{class:"nav-text"},{default:d((()=>[g("首页")])),_:1})])),_:1},8,["onClick"]),m(r,{class:"nav-item",onClick:o.handleOrdersClick},{default:d((()=>[m(c,{class:"nav-icon"},{default:d((()=>[g("📋")])),_:1}),m(c,{class:"nav-text"},{default:d((()=>[g("订单")])),_:1})])),_:1},8,["onClick"]),m(r,{class:"nav-item active",onClick:o.handleMyClick},{default:d((()=>[m(c,{class:"nav-icon"},{default:d((()=>[g("👤")])),_:1}),m(c,{class:"nav-text"},{default:d((()=>[g("我的")])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1})}],["__scopeId","data-v-555a786b"]]);export{p as default};
