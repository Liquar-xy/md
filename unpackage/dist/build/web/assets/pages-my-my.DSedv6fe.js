import{g as e,d as s,v as a,s as l,m as t,b as o,h as n,a as c,N as r,e as i,w as d,i as u,o as h,f as m,j as g,t as f,x as _,u as v,k}from"./index-C_HCjYUn.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";const p=C({data:()=>({isLoggedIn:!0,username:"æ™ºæ…§å­˜0987",phoneNumber:"18512345678",avatarUrl:""}),computed:{maskedPhone(){return this.phoneNumber?this.phoneNumber.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2"):""}},onLoad(){this.checkLoginStatus()},onShow(){this.checkLoginStatus()},methods:{checkLoginStatus(){const a=e("token"),l=e("userData");if(!a||!l)return console.log("ç”¨æˆ·æœªç™»å½•ï¼Œè·³è½¬åˆ°ç™»å½•é¡µ"),this.isLoggedIn=!1,void s({url:"/pages/login/login"});this.loadUserData(l)},loadUserData(e){try{e&&(this.username=e.username||e.nickname||"æ™ºæ…§å­˜ç”¨æˆ·",this.phoneNumber=e.phone||"",this.avatarUrl=e.avatar||"",this.isLoggedIn=!0,console.log("ç”¨æˆ·æ•°æ®åŠ è½½æˆåŠŸ:",{username:this.username,phone:this.phoneNumber}))}catch(s){console.error("åŠ è½½ç”¨æˆ·æ•°æ®å¤±è´¥:",s),this.handleLogout()}},handleUserClick(){this.isLoggedIn?a({url:`/pages/user-edit/user-edit?username=${encodeURIComponent(this.username)}&phoneNumber=${encodeURIComponent(this.phoneNumber)}&avatarUrl=${encodeURIComponent(this.avatarUrl)}`}):a({url:"/pages/login/login"})},handleViewAllOrders(){console.log("è·³è½¬åˆ°è®¢å•é¡µé¢"),console.log("å°è¯•ä½¿ç”¨switchTabè·³è½¬åˆ°è®¢å•é¡µé¢"),l({url:"/pages/orders/orders",success:()=>{console.log("switchTabè·³è½¬æˆåŠŸ")},fail:e=>{console.error("switchTabè·³è½¬å¤±è´¥:",e),t({title:"è·³è½¬å¤±è´¥",content:`é”™è¯¯ä¿¡æ¯: ${e.errMsg||"æœªçŸ¥é”™è¯¯"}`,showCancel:!1})}})},handleRetrieve(){t({title:"ç¡®è®¤å–ä»¶",content:"ç¡®å®šè¦å–å‡ºå¯„å­˜çš„ç‰©å“å—ï¼Ÿ",success:e=>{e.confirm&&(o({title:"å¤„ç†ä¸­..."}),setTimeout((()=>{n(),c({title:"å–ä»¶æˆåŠŸ",icon:"success"}),setTimeout((()=>{this.loadUserData()}),1500)}),2e3))}})},handleCustomerService(){a({url:"/pages/customer-service/customer-service"})},handleUserGuide(){a({url:"/pages/user-guide/user-guide"})},handleCoupons(){a({url:"/pages/coupons/coupons"})},handleUserAgreement(){a({url:"/pages/user-agreement/user-agreement"})},handleBackToLogin(){r.showBackToLoginConfirm()},handleLogout(){r.showLogoutConfirm((()=>{this.isLoggedIn=!1,this.username="",this.phoneNumber="",this.avatarUrl=""}))},handleHomeClick(){l({url:"/pages/index/index"})},handleOrdersClick(){console.log("åº•éƒ¨å¯¼èˆªï¼šè·³è½¬åˆ°è®¢å•é¡µé¢"),l({url:"/pages/orders/orders",success:()=>{console.log("åº•éƒ¨å¯¼èˆªï¼šswitchTabè·³è½¬æˆåŠŸ")},fail:e=>{console.error("åº•éƒ¨å¯¼èˆªï¼šåˆ‡æ¢åˆ°è®¢å•é¡µé¢å¤±è´¥:",e),t({title:"è·³è½¬å¤±è´¥",content:`é”™è¯¯ä¿¡æ¯: ${e.errMsg||"æœªçŸ¥é”™è¯¯"}`,showCancel:!1})}})},handleMyClick(){console.log("å½“å‰åœ¨æˆ‘çš„é¡µé¢")}}},[["render",function(e,s,a,l,t,o){const n=v,c=k,r=u;return h(),i(r,{class:"my-container"},{default:d((()=>[m(r,{class:"user-section",onClick:o.handleUserClick},{default:d((()=>[m(r,{class:"avatar-container"},{default:d((()=>[m(r,{class:"avatar"},{default:d((()=>[t.avatarUrl?(h(),i(n,{key:0,src:t.avatarUrl,class:"avatar-image",mode:"aspectFill"},null,8,["src"])):(h(),i(c,{key:1,class:"avatar-icon"},{default:d((()=>[g("ðŸ‘¤")])),_:1}))])),_:1})])),_:1}),m(r,{class:"user-info"},{default:d((()=>[t.isLoggedIn?(h(),i(c,{key:1,class:"username"},{default:d((()=>[g(f(t.username),1)])),_:1})):(h(),i(c,{key:0,class:"login-text"},{default:d((()=>[g("ç‚¹å‡»ç™»å½•")])),_:1})),t.isLoggedIn?(h(),i(c,{key:2,class:"phone-number"},{default:d((()=>[g(f(o.maskedPhone),1)])),_:1})):_("",!0)])),_:1})])),_:1},8,["onClick"]),m(r,{class:"orders-section"},{default:d((()=>[m(r,{class:"section-header",onClick:o.handleViewAllOrders},{default:d((()=>[m(c,{class:"section-title"},{default:d((()=>[g("æˆ‘çš„è®¢å•")])),_:1}),m(c,{class:"view-all"},{default:d((()=>[g("å…¨éƒ¨è®¢å•>")])),_:1})])),_:1},8,["onClick"])])),_:1}),m(r,{class:"services-section"},{default:d((()=>[m(c,{class:"section-title"},{default:d((()=>[g("æˆ‘çš„æœåŠ¡")])),_:1}),m(r,{class:"service-list"},{default:d((()=>[m(r,{class:"service-item",onClick:o.handleCustomerService},{default:d((()=>[m(c,{class:"service-text"},{default:d((()=>[g("åœ¨çº¿å®¢æœ")])),_:1}),m(c,{class:"arrow"},{default:d((()=>[g(">")])),_:1})])),_:1},8,["onClick"]),m(r,{class:"service-item",onClick:o.handleUserGuide},{default:d((()=>[m(c,{class:"service-text"},{default:d((()=>[g("ä½¿ç”¨æŒ‡å—")])),_:1}),m(c,{class:"arrow"},{default:d((()=>[g(">")])),_:1})])),_:1},8,["onClick"]),m(r,{class:"service-item",onClick:o.handleCoupons},{default:d((()=>[m(c,{class:"service-text"},{default:d((()=>[g("ä¼˜æƒ å¡åˆ¸")])),_:1}),m(c,{class:"dev-tag"},{default:d((()=>[g("å¼€å‘ä¸­")])),_:1}),m(c,{class:"arrow"},{default:d((()=>[g(">")])),_:1})])),_:1},8,["onClick"]),m(r,{class:"service-item",onClick:o.handleUserAgreement},{default:d((()=>[m(c,{class:"service-text"},{default:d((()=>[g("ç”¨æˆ·åè®®")])),_:1}),m(c,{class:"arrow"},{default:d((()=>[g(">")])),_:1})])),_:1},8,["onClick"]),m(r,{class:"service-item",onClick:o.handleBackToLogin},{default:d((()=>[m(c,{class:"service-text"},{default:d((()=>[g("å›žåˆ°ç™»å½•é¡µ")])),_:1}),m(c,{class:"arrow"},{default:d((()=>[g(">")])),_:1})])),_:1},8,["onClick"]),m(r,{class:"service-item",onClick:o.handleLogout},{default:d((()=>[m(c,{class:"service-text"},{default:d((()=>[g("é€€å‡ºç™»å½•")])),_:1}),m(c,{class:"arrow"},{default:d((()=>[g(">")])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1}),m(r,{class:"bottom-nav"},{default:d((()=>[m(r,{class:"nav-item",onClick:o.handleHomeClick},{default:d((()=>[m(c,{class:"nav-icon"},{default:d((()=>[g("ðŸ ")])),_:1}),m(c,{class:"nav-text"},{default:d((()=>[g("é¦–é¡µ")])),_:1})])),_:1},8,["onClick"]),m(r,{class:"nav-item",onClick:o.handleOrdersClick},{default:d((()=>[m(c,{class:"nav-icon"},{default:d((()=>[g("ðŸ“‹")])),_:1}),m(c,{class:"nav-text"},{default:d((()=>[g("è®¢å•")])),_:1})])),_:1},8,["onClick"]),m(r,{class:"nav-item active",onClick:o.handleMyClick},{default:d((()=>[m(c,{class:"nav-icon"},{default:d((()=>[g("ðŸ‘¤")])),_:1}),m(c,{class:"nav-text"},{default:d((()=>[g("æˆ‘çš„")])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1})}],["__scopeId","data-v-555a786b"]]);export{p as default};
