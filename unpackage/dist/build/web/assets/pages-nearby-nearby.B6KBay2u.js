import{g as t,a as e,c as a,v as o,r as n,b as s,h as i,m as c,e as l,w as r,i as d,o as u,f as h,j as p,t as g,x as m,G as y,H as L,n as k,k as f,l as I}from"./index-BgeTyoVd.js";import{_ as M}from"./_plugin-vue_export-helper.BCo6x5W8.js";const w="9jnxn6bIxVgX1u4KffC5Cc83dTMzzYIA";const b=M({data:()=>({currentCity:"å®šä½ä¸­...",mapInstance:null,mapStatus:"åˆå§‹åŒ–ä¸­",mapError:!1,mapErrorMessage:"",mapReady:!1,locationStatus:"å‡†å¤‡å®šä½",currentLocation:null,watchId:null,nearbyLockers:[],selectedLocker:null,loadingText:"æ­£åœ¨åˆå§‹åŒ–..."}),onLoad(){console.log("=== å®æ—¶å®šä½åœ°å›¾é¡µé¢åŠ è½½ ==="),console.log("ç™¾åº¦åœ°å›¾APIå¯†é’¥:",w)},onReady(){console.log("=== é¡µé¢æ¸²æŸ“å®Œæˆï¼Œå¼€å§‹åˆå§‹åŒ– ==="),this.startInitialization()},onUnload(){console.log("ğŸ“± é¡µé¢å¸è½½ï¼Œæ¸…ç†èµ„æº"),this.watchId&&(clearInterval(this.watchId),console.log("âœ… ä½ç½®ç›‘å¬å®šæ—¶å™¨å·²æ¸…ç†"))},onHide(){console.log("ğŸ“± é¡µé¢éšè—")},onShow(){console.log("ğŸ“± é¡µé¢æ˜¾ç¤º");const o=t("selectedCity");if(o)o.name!==this.currentCity?(console.log("ğŸ™ï¸ æ£€æµ‹åˆ°åŸå¸‚å˜åŒ–:",this.currentCity,"->",o.name),this.currentCity=o.name,e({title:`å·²åˆ‡æ¢åˆ°${o.name}`,icon:"success",duration:2e3}),this.mapInstance?this.setCityLocation(o):this.startInitialization()):console.log("ğŸ™ï¸ åŸå¸‚æœªå˜åŒ–ï¼Œä¿æŒå½“å‰çŠ¶æ€:",this.currentCity);else{console.log("âš ï¸ æœªæ‰¾åˆ°é€‰æ‹©çš„åŸå¸‚ï¼Œä½¿ç”¨é»˜è®¤åŸå¸‚");const t={name:"éƒ‘å·",coordinates:{longitude:113.6253,latitude:34.7466}};a("selectedCity",t),this.currentCity=t.name,this.mapInstance?this.setCityLocation(t):this.startInitialization()}},methods:{selectCity(){console.log("é€‰æ‹©åŸå¸‚"),o({url:"/pages/city-select/city-select?from=nearby"})},startInitialization(){console.log("ğŸš€ å¼€å§‹åˆå§‹åŒ–"),this.loadingText="æ­£åœ¨åˆå§‹åŒ–åœ°å›¾...",this.mapStatus="åˆå§‹åŒ–ä¸­";const e=t("selectedCity");e&&e.coordinates?(console.log("ğŸ“ ä½¿ç”¨é€‰æ‹©çš„åŸå¸‚:",e.name),this.currentCity=e.name,this.initMapWithCity(e)):(console.log("ğŸ“ æœªæ‰¾åˆ°é€‰æ‹©çš„åŸå¸‚ï¼Œä½¿ç”¨é»˜è®¤åŸå¸‚"),this.currentCity="éƒ‘å·",this.initMapWithDefaultCity())},async initMapWithCity(t){console.log("ğŸ—ºï¸ åŸºäºé€‰æ‹©åŸå¸‚åˆå§‹åŒ–åœ°å›¾:",t.name),this.mapStatus="åŠ è½½åœ°å›¾API",this.loadingText="æ­£åœ¨åŠ è½½ç™¾åº¦åœ°å›¾API...";try{await this.loadBaiduMapAPI(),this.createMapInstance(),setTimeout((()=>{this.setCityLocation(t)}),1e3)}catch(e){console.error("åœ°å›¾åˆå§‹åŒ–å¤±è´¥:",e),this.handleError("åœ°å›¾åˆå§‹åŒ–å¤±è´¥: "+e.message)}},async initMapWithDefaultCity(){console.log("ğŸ—ºï¸ ä½¿ç”¨é»˜è®¤åŸå¸‚åˆå§‹åŒ–åœ°å›¾");const t={name:"éƒ‘å·",coordinates:{longitude:113.6253,latitude:34.7466}};a("selectedCity",t),await this.initMapWithCity(t)},setCityLocation(t){console.log("ğŸ“ è®¾ç½®åŸå¸‚ä½ç½®:",t.name);const{longitude:a,latitude:o}=t.coordinates;if(this.locationStatus=`å½“å‰åŸå¸‚: ${t.name}`,this.currentLocation={longitude:a.toFixed(6),latitude:o.toFixed(6),accuracy:1e3,timestamp:(new Date).toLocaleTimeString(),address:`${t.name}å¸‚ä¸­å¿ƒ`,source:"åŸå¸‚é€‰æ‹©"},this.mapInstance){const e=new BMap.Point(a,o);this.mapInstance.centerAndZoom(e,13),this.addCityLocationMarker(e,t.name)}this.loadNearbyLockers(a,o),e({title:`å·²å®šä½åˆ°${t.name}`,icon:"success",duration:2e3}),console.log("âœ… åŸå¸‚ä½ç½®è®¾ç½®å®Œæˆ")},addCityLocationMarker(t,e){if(!this.mapInstance)return;this.mapInstance.clearOverlays();const a=new BMap.Marker(t),o=new BMap.Icon("data:image/svg+xml;base64,"+btoa('\n\t\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32">\n\t\t\t\t\t\t\t<circle cx="16" cy="16" r="12" fill="#FF6B35" stroke="#FFFFFF" stroke-width="4"/>\n\t\t\t\t\t\t\t<circle cx="16" cy="16" r="4" fill="#FFFFFF"/>\n\t\t\t\t\t\t\t<circle cx="16" cy="16" r="14" fill="none" stroke="#FF6B35" stroke-width="2" opacity="0.3"/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t'),new BMap.Size(32,32),{anchor:new BMap.Size(16,16)});a.setIcon(o),this.mapInstance.addOverlay(a);const n=`\n\t\t\t\t\t<div style="padding: 15px; min-width: 250px;">\n\t\t\t\t\t\t<h4 style="margin: 0 0 10px 0; color: #FF6B35;">ğŸ™ï¸ ${e}</h4>\n\t\t\t\t\t\t<p style="margin: 5px 0;"><strong>ç»åº¦:</strong> ${t.lng.toFixed(6)}</p>\n\t\t\t\t\t\t<p style="margin: 5px 0;"><strong>çº¬åº¦:</strong> ${t.lat.toFixed(6)}</p>\n\t\t\t\t\t\t<p style="margin: 5px 0;"><strong>å®šä½æ–¹å¼:</strong> åŸå¸‚é€‰æ‹©</p>\n\t\t\t\t\t\t<p style="margin: 5px 0;"><strong>æ›´æ–°æ—¶é—´:</strong> ${(new Date).toLocaleTimeString()}</p>\n\t\t\t\t\t\t<p style="margin: 5px 0; word-break: break-all;"><strong>åœ°å€:</strong> ${e}å¸‚ä¸­å¿ƒåŒºåŸŸ</p>\n\t\t\t\t\t</div>\n\t\t\t\t`,s=new BMap.InfoWindow(n);a.addEventListener("click",(()=>{this.mapInstance.openInfoWindow(s,t)})),console.log("ğŸ“ åŸå¸‚ä½ç½®æ ‡è®°å·²æ·»åŠ ")},startBaiduGeolocation(){if(console.log("ğŸ“ å¼€å§‹ç™¾åº¦åœ°å›¾å®šä½"),this.loadingText="æ­£åœ¨ä½¿ç”¨ç™¾åº¦å®šä½è·å–æ‚¨çš„ä½ç½®...",this.mapStatus="ç™¾åº¦å®šä½ä¸­",this.locationStatus="æ­£åœ¨å®šä½",!this.mapInstance)return console.error("âŒ åœ°å›¾å®ä¾‹æœªåˆ›å»º"),void this.fallbackToHTML5Location();try{const t=new BMap.GeolocationControl({anchor:BMAP_ANCHOR_BOTTOM_RIGHT,offset:new BMap.Size(10,10),enableAutoLocation:!1,locationIcon:null});this.mapInstance.addControl(t);const e=new BMap.Geolocation;e.getCurrentPosition((t=>{e.getStatus()==BMAP_STATUS_SUCCESS?(console.log("âœ… ç™¾åº¦å®šä½æˆåŠŸ:",t),this.handleBaiduLocationSuccess(t)):(console.error("âŒ ç™¾åº¦å®šä½å¤±è´¥:",e.getStatus()),this.fallbackToHTML5Location())}),{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4}),console.log("âœ… ç™¾åº¦å®šä½å·²å¯åŠ¨")}catch(t){console.error("âŒ ç™¾åº¦å®šä½åˆå§‹åŒ–å¤±è´¥:",t),this.fallbackToHTML5Location()}},handleBaiduLocationSuccess(t){console.log("ğŸ“ ç™¾åº¦å®šä½è¯¦ç»†ä¿¡æ¯:",t);const a=t.point,o=t.accuracy||100;this.currentLocation={longitude:a.lng.toFixed(6),latitude:a.lat.toFixed(6),accuracy:Math.round(o),timestamp:(new Date).toLocaleTimeString(),address:"æ­£åœ¨è§£æåœ°å€...",source:"ç™¾åº¦å®šä½"},this.locationStatus=`ç™¾åº¦å®šä½æˆåŠŸ (ç²¾åº¦: ${Math.round(o)}ç±³)`,this.mapInstance.centerAndZoom(a,16),this.addBaiduLocationMarker(a,o),this.reverseGeocode(a.lng,a.lat),this.loadNearbyLockers(a.lng,a.lat),this.startBaiduLocationWatch(),e({title:`å®šä½æˆåŠŸ (${Math.round(o)}ç±³)`,icon:"success",duration:2e3}),console.log("âœ… ç™¾åº¦å®šä½å¤„ç†å®Œæˆ")},addBaiduLocationMarker(t,e){var a;if(!this.mapInstance)return;this.mapInstance.clearOverlays();const o=new BMap.Marker(t),n=new BMap.Icon("data:image/svg+xml;base64,"+btoa('\n\t\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32">\n\t\t\t\t\t\t\t<circle cx="16" cy="16" r="12" fill="#007AFF" stroke="#FFFFFF" stroke-width="4"/>\n\t\t\t\t\t\t\t<circle cx="16" cy="16" r="4" fill="#FFFFFF"/>\n\t\t\t\t\t\t\t<circle cx="16" cy="16" r="14" fill="none" stroke="#007AFF" stroke-width="2" opacity="0.3"/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t'),new BMap.Size(32,32),{anchor:new BMap.Size(16,16)});o.setIcon(n),this.mapInstance.addOverlay(o);const s=new BMap.Circle(t,e,{strokeColor:"#007AFF",strokeWeight:2,strokeOpacity:.6,fillColor:"#007AFF",fillOpacity:.2});this.mapInstance.addOverlay(s);const i=`\n\t\t\t\t\t<div style="padding: 15px; min-width: 250px;">\n\t\t\t\t\t\t<h4 style="margin: 0 0 10px 0; color: #007AFF;">ğŸ“ å½“å‰ä½ç½® (ç™¾åº¦å®šä½)</h4>\n\t\t\t\t\t\t<p style="margin: 5px 0;"><strong>ç»åº¦:</strong> ${t.lng.toFixed(6)}</p>\n\t\t\t\t\t\t<p style="margin: 5px 0;"><strong>çº¬åº¦:</strong> ${t.lat.toFixed(6)}</p>\n\t\t\t\t\t\t<p style="margin: 5px 0;"><strong>ç²¾åº¦:</strong> ${Math.round(e)}ç±³</p>\n\t\t\t\t\t\t<p style="margin: 5px 0;"><strong>æ›´æ–°æ—¶é—´:</strong> ${(new Date).toLocaleTimeString()}</p>\n\t\t\t\t\t\t<p style="margin: 5px 0; word-break: break-all;"><strong>åœ°å€:</strong> ${(null==(a=this.currentLocation)?void 0:a.address)||"è§£æä¸­..."}</p>\n\t\t\t\t\t</div>\n\t\t\t\t`,c=new BMap.InfoWindow(i);o.addEventListener("click",(()=>{this.mapInstance.openInfoWindow(c,t)})),console.log("ğŸ“ ç™¾åº¦å®šä½æ ‡è®°å·²æ·»åŠ ")},startBaiduLocationWatch(){console.log("ğŸ‘ï¸ å¼€å§‹ç™¾åº¦ä½ç½®ç›‘å¬"),this.watchId&&clearInterval(this.watchId),this.watchId=setInterval((()=>{console.log("ğŸ”„ å®šæ—¶æ›´æ–°ä½ç½®"),this.updateBaiduLocation()}),3e4),console.log("âœ… ç™¾åº¦ä½ç½®ç›‘å¬å·²å¯åŠ¨")},updateBaiduLocation(){if(!this.mapInstance)return;const t=new BMap.Geolocation;t.getCurrentPosition((e=>{if(t.getStatus()==BMAP_STATUS_SUCCESS){console.log("ğŸ”„ ä½ç½®æ›´æ–°æˆåŠŸ:",e);const t=e.point,a=this.currentLocation;if(a){const e=this.calculateDistance(parseFloat(a.latitude),parseFloat(a.longitude),t.lat,t.lng);if(e<50)return void console.log("ğŸ“ ä½ç½®å˜åŒ–è¾ƒå°ï¼Œè·³è¿‡æ›´æ–°:",e,"ç±³");console.log("ğŸ“ ä½ç½®æ˜¾è‘—å˜åŒ–:",e,"ç±³")}this.handleBaiduLocationSuccess(e),console.log("ğŸ“ ä½ç½®æ˜¾è‘—å˜åŒ–ï¼Œé‡æ–°æœç´¢é™„è¿‘å¯„å­˜ç‚¹"),this.loadNearbyLockers(t.lng,t.lat)}}),{enableHighAccuracy:!0,timeout:5e3})},fallbackToHTML5Location(){console.log("ğŸ”„ ä½¿ç”¨HTML5å®šä½ä½œä¸ºå¤‡ç”¨æ–¹æ¡ˆ"),this.loadingText="æ­£åœ¨ä½¿ç”¨æµè§ˆå™¨å®šä½...",this.locationStatus="æµè§ˆå™¨å®šä½ä¸­",navigator.geolocation?navigator.geolocation.getCurrentPosition((t=>{console.log("âœ… HTML5å®šä½æˆåŠŸ:",t),this.handleHTML5LocationSuccess(t)}),(t=>{console.error("âŒ HTML5å®šä½ä¹Ÿå¤±è´¥:",t),this.useDefaultLocation()}),{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4}):this.useDefaultLocation()},handleHTML5LocationSuccess(t){const a=t.coords;if(this.currentLocation={longitude:a.longitude.toFixed(6),latitude:a.latitude.toFixed(6),accuracy:Math.round(a.accuracy),timestamp:(new Date).toLocaleTimeString(),address:"æ­£åœ¨è§£æåœ°å€...",source:"HTML5å®šä½"},this.locationStatus=`HTML5å®šä½æˆåŠŸ (ç²¾åº¦: ${Math.round(a.accuracy)}ç±³)`,this.mapInstance){const t=new BMap.Point(a.longitude,a.latitude);this.mapInstance.centerAndZoom(t,16),this.addBaiduLocationMarker(t,a.accuracy)}this.reverseGeocode(a.longitude,a.latitude),this.loadNearbyLockers(a.longitude,a.latitude),e({title:`å®šä½æˆåŠŸ (${Math.round(a.accuracy)}ç±³)`,icon:"success",duration:2e3})},async initMap(){console.log("ğŸ—ºï¸ å¼€å§‹åˆå§‹åŒ–ç™¾åº¦åœ°å›¾"),this.mapStatus="åŠ è½½åœ°å›¾API",this.loadingText="æ­£åœ¨åŠ è½½ç™¾åº¦åœ°å›¾API...";try{await this.loadBaiduMapAPI(),this.createMapInstance(),setTimeout((()=>{this.startBaiduGeolocation()}),1e3)}catch(t){console.error("åœ°å›¾åˆå§‹åŒ–å¤±è´¥:",t),this.handleError("åœ°å›¾åˆå§‹åŒ–å¤±è´¥: "+t.message)}},loadBaiduMapAPI(){return new Promise(((t,e)=>{if(void 0!==window.BMap)return console.log("âœ… ç™¾åº¦åœ°å›¾APIå·²å­˜åœ¨"),void t();console.log("ğŸ“¡ å¼€å§‹åŠ è½½ç™¾åº¦åœ°å›¾JavaScript API"),console.log("APIå¯†é’¥:",w),window.initBaiduMapCallback&&delete window.initBaiduMapCallback;const a=document.createElement("script");a.type="text/javascript",a.src=`https://api.map.baidu.com/api?v=3.0&ak=${w}&callback=initBaiduMapCallback`;const o=setTimeout((()=>{console.error("âŒ ç™¾åº¦åœ°å›¾APIåŠ è½½è¶…æ—¶"),this.handleMapError("ç™¾åº¦åœ°å›¾APIåŠ è½½è¶…æ—¶ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥"),e(new Error("ç™¾åº¦åœ°å›¾APIåŠ è½½è¶…æ—¶"))}),15e3);window.initBaiduMapCallback=()=>{console.log("âœ… ç™¾åº¦åœ°å›¾APIåŠ è½½å®Œæˆ"),clearTimeout(o),void 0!==window.BMap&&window.BMap.Map?(console.log("âœ… ç™¾åº¦åœ°å›¾APIéªŒè¯æˆåŠŸ"),this.mapStatus="APIåŠ è½½å®Œæˆ",delete window.initBaiduMapCallback,t()):(console.error("âŒ ç™¾åº¦åœ°å›¾APIåŠ è½½ä¸å®Œæ•´"),this.handleMapError("ç™¾åº¦åœ°å›¾APIåŠ è½½ä¸å®Œæ•´"),e(new Error("ç™¾åº¦åœ°å›¾APIåŠ è½½ä¸å®Œæ•´")))},a.onerror=t=>{console.error("âŒ ç™¾åº¦åœ°å›¾APIè„šæœ¬åŠ è½½å¤±è´¥:",t),clearTimeout(o),this.handleMapError("ç™¾åº¦åœ°å›¾APIè„šæœ¬åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥"),e(new Error("ç™¾åº¦åœ°å›¾APIè„šæœ¬åŠ è½½å¤±è´¥"))};try{document.head.appendChild(a),console.log("ğŸ“¡ ç™¾åº¦åœ°å›¾APIè„šæœ¬å·²æ·»åŠ åˆ°é¡µé¢")}catch(n){console.error("âŒ æ·»åŠ ç™¾åº¦åœ°å›¾APIè„šæœ¬å¤±è´¥:",n),clearTimeout(o),this.handleMapError("æ·»åŠ ç™¾åº¦åœ°å›¾APIè„šæœ¬å¤±è´¥"),e(n)}}))},createMapInstance(){console.log("ğŸ—ºï¸ åˆ›å»ºç™¾åº¦åœ°å›¾å®ä¾‹"),this.mapStatus="åˆ›å»ºåœ°å›¾";try{if(void 0===window.BMap)throw new Error("ç™¾åº¦åœ°å›¾APIæœªåŠ è½½");this.$nextTick((()=>{try{const t=document.getElementById("baiduMapContainer");if(!t)return console.error("âŒ åœ°å›¾å®¹å™¨æœªæ‰¾åˆ°ï¼Œå°è¯•å»¶è¿Ÿåˆ›å»º"),void setTimeout((()=>{this.createMapInstance()}),1e3);const e=t.getBoundingClientRect();if(console.log("åœ°å›¾å®¹å™¨ä¿¡æ¯:",{id:t.id,width:e.width,height:e.height,visible:e.width>0&&e.height>0,display:getComputedStyle(t).display,visibility:getComputedStyle(t).visibility}),0!==e.width&&0!==e.height||(console.warn("âš ï¸ åœ°å›¾å®¹å™¨å°ºå¯¸ä¸º0ï¼Œè®¾ç½®é»˜è®¤å°ºå¯¸"),t.style.width="100%",t.style.height="400px",t.style.minHeight="400px"),console.log("ğŸ—ºï¸ å¼€å§‹åˆ›å»ºBMapå®ä¾‹"),this.mapInstance=new BMap.Map(t),!this.mapInstance)throw new Error("åœ°å›¾å®ä¾‹åˆ›å»ºå¤±è´¥");console.log("âœ… åœ°å›¾å®ä¾‹åˆ›å»ºæˆåŠŸ");const a=new BMap.Point(113.6253,34.7466);this.mapInstance.centerAndZoom(a,15),this.mapInstance.enableScrollWheelZoom(!0),this.mapInstance.enableDragging(!0),this.mapInstance.enableDoubleClickZoom(!0),this.mapInstance.enableKeyboard(!0),this.mapInstance.enableInertialDragging(!0),this.mapInstance.enableContinuousZoom(!0),this.mapInstance.addControl(new BMap.NavigationControl),this.mapInstance.addControl(new BMap.ScaleControl),this.mapInstance.addEventListener("tilesloaded",(()=>{console.log("âœ… åœ°å›¾ç“¦ç‰‡åŠ è½½å®Œæˆ"),this.mapStatus="åœ°å›¾å°±ç»ª",this.mapReady=!0,this.loadingText=""})),this.mapInstance.addEventListener("dragstart",(()=>{console.log("ğŸ–±ï¸ å¼€å§‹æ‹–æ‹½åœ°å›¾")})),this.mapInstance.addEventListener("dragend",(()=>{console.log("ğŸ–±ï¸ æ‹–æ‹½åœ°å›¾ç»“æŸ")})),this.mapInstance.addEventListener("zoomstart",(()=>{console.log("ğŸ” å¼€å§‹ç¼©æ”¾åœ°å›¾")})),this.mapInstance.addEventListener("zoomend",(()=>{console.log("ğŸ” ç¼©æ”¾åœ°å›¾ç»“æŸ");const t=this.mapInstance.getZoom();console.log("å½“å‰ç¼©æ”¾çº§åˆ«:",t)})),this.mapInstance.addEventListener("click",(t=>{console.log("ğŸ–±ï¸ ç‚¹å‡»åœ°å›¾:",t.point)})),console.log("âœ… ç™¾åº¦åœ°å›¾å®ä¾‹åˆ›å»ºå®Œæˆ")}catch(t){console.error("âŒ åœ°å›¾å®ä¾‹åˆ›å»ºå¤±è´¥:",t),this.handleError("åœ°å›¾å®ä¾‹åˆ›å»ºå¤±è´¥: "+t.message)}}))}catch(t){console.error("âŒ åˆ›å»ºåœ°å›¾å®ä¾‹å¤±è´¥:",t),this.handleError("åˆ›å»ºåœ°å›¾å®ä¾‹å¤±è´¥: "+t.message)}},calculateDistance(t,e,a,o){const n=(a-t)*Math.PI/180,s=(o-e)*Math.PI/180,i=Math.sin(n/2)*Math.sin(n/2)+Math.cos(t*Math.PI/180)*Math.cos(a*Math.PI/180)*Math.sin(s/2)*Math.sin(s/2);return 6371e3*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))},handleLocationError(t){let e="å®šä½å¤±è´¥";if(t.code)switch(t.code){case t.PERMISSION_DENIED:e="ç”¨æˆ·æ‹’ç»äº†å®šä½è¯·æ±‚";break;case t.POSITION_UNAVAILABLE:e="ä½ç½®ä¿¡æ¯ä¸å¯ç”¨";break;case t.TIMEOUT:e="å®šä½è¯·æ±‚è¶…æ—¶"}this.locationStatus=e,this.useDefaultLocation()},useDefaultLocation(){if(console.log("ğŸ“ ä½¿ç”¨é»˜è®¤ä½ç½®ï¼ˆéƒ‘å·ï¼‰"),this.currentLocation={longitude:"113.625300",latitude:"34.746600",accuracy:1e3,timestamp:(new Date).toLocaleTimeString(),address:"æ²³å—çœéƒ‘å·å¸‚äºŒä¸ƒåŒº",source:"é»˜è®¤ä½ç½®"},this.currentCity="éƒ‘å·",this.locationStatus="ä½¿ç”¨é»˜è®¤ä½ç½®",this.loadingText="",this.mapInstance){const t=new BMap.Point(113.6253,34.7466);this.mapInstance.centerAndZoom(t,15),this.addBaiduLocationMarker(t,1e3)}this.loadNearbyLockers(113.6253,34.7466),e({title:"ä½¿ç”¨é»˜è®¤ä½ç½®ï¼šéƒ‘å·",icon:"none",duration:2e3}),console.log("âœ… é»˜è®¤ä½ç½®è®¾ç½®å®Œæˆ")},reverseGeocode(t,o){if(console.log("ğŸ” å¼€å§‹è§£æåœ°å€:",{longitude:t,latitude:o}),!this.mapInstance)return void setTimeout((()=>{this.reverseGeocode(t,o)}),1e3);const n=new BMap.Geocoder,s=new BMap.Point(t,o);n.getLocation(s,(n=>{if(n){console.log("âœ… åœ°å€è§£ææˆåŠŸ:",n);const s=n.addressComponents,i=n.address;this.currentLocation&&(this.currentLocation.address=i);const c=s.city||s.district||"æœªçŸ¥åŸå¸‚",l=s.province||"";this.currentCity=c.replace("å¸‚",""),console.log("ğŸ™ï¸ åŸå¸‚ä¿¡æ¯æ›´æ–°:",{province:l,city:c,district:s.district,street:s.street,fullAddress:i}),a("currentCity",{name:this.currentCity,province:l,fullName:c,coordinates:{longitude:t,latitude:o},timestamp:(new Date).getTime()}),e({title:`å½“å‰åŸå¸‚: ${this.currentCity}`,icon:"none",duration:2e3})}else console.warn("âš ï¸ åœ°å€è§£æå¤±è´¥"),this.currentLocation.address="åœ°å€è§£æå¤±è´¥"}))},addCurrentLocationMarker(){if(!this.mapInstance||!this.currentLocation)return;const t=parseFloat(this.currentLocation.longitude),e=parseFloat(this.currentLocation.latitude),a=new BMap.Point(t,e);this.mapInstance.clearOverlays();const o=new BMap.Marker(a),n=new BMap.Icon("data:image/svg+xml;base64,"+btoa('\n\t\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n\t\t\t\t\t\t\t<circle cx="12" cy="12" r="8" fill="#007AFF" stroke="#FFFFFF" stroke-width="3"/>\n\t\t\t\t\t\t\t<circle cx="12" cy="12" r="3" fill="#FFFFFF"/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t'),new BMap.Size(24,24),{anchor:new BMap.Size(12,12)});if(o.setIcon(n),this.mapInstance.addOverlay(o),this.currentLocation.accuracy){const t=new BMap.Circle(a,this.currentLocation.accuracy,{strokeColor:"#007AFF",strokeWeight:2,strokeOpacity:.5,fillColor:"#007AFF",fillOpacity:.1});this.mapInstance.addOverlay(t)}const s=`\n\t\t\t\t\t<div style="padding: 10px; min-width: 200px;">\n\t\t\t\t\t\t<h4 style="margin: 0 0 10px 0; color: #007AFF;">ğŸ“ å½“å‰ä½ç½®</h4>\n\t\t\t\t\t\t<p style="margin: 5px 0;"><strong>ç»åº¦:</strong> ${t}</p>\n\t\t\t\t\t\t<p style="margin: 5px 0;"><strong>çº¬åº¦:</strong> ${e}</p>\n\t\t\t\t\t\t<p style="margin: 5px 0;"><strong>ç²¾åº¦:</strong> ${this.currentLocation.accuracy}ç±³</p>\n\t\t\t\t\t\t${this.currentLocation.altitude?`<p style="margin: 5px 0;"><strong>æµ·æ‹”:</strong> ${this.currentLocation.altitude}ç±³</p>`:""}\n\t\t\t\t\t\t${this.currentLocation.speed?`<p style="margin: 5px 0;"><strong>é€Ÿåº¦:</strong> ${this.currentLocation.speed}km/h</p>`:""}\n\t\t\t\t\t\t<p style="margin: 5px 0;"><strong>æ›´æ–°æ—¶é—´:</strong> ${this.currentLocation.timestamp}</p>\n\t\t\t\t\t\t<p style="margin: 5px 0; word-break: break-all;"><strong>åœ°å€:</strong> ${this.currentLocation.address}</p>\n\t\t\t\t\t</div>\n\t\t\t\t`,i=new BMap.InfoWindow(s);o.addEventListener("click",(()=>{this.mapInstance.openInfoWindow(i,a)})),console.log("ğŸ“ ä½ç½®æ ‡è®°å·²æ›´æ–°")},updateLocationMarker(t,e){this.mapInstance&&(this.addCurrentLocationMarker(),console.log("ğŸ“ ä½ç½®æ ‡è®°å·²æ›´æ–°åˆ°æ–°ä½ç½®:",{longitude:t,latitude:e}))},loadNearbyLockers(t,a){if(!t||!a)return void console.warn("âš ï¸ ç¼ºå°‘ä½ç½®ä¿¡æ¯ï¼Œæ— æ³•æœç´¢é™„è¿‘å¯„å­˜ç‚¹");console.log("ğŸ” å¼€å§‹æœç´¢é™„è¿‘å¯„å­˜ç‚¹"),console.log("æœç´¢ä½ç½®:",{longitude:t,latitude:a}),this.loadingText="æ­£åœ¨æœç´¢é™„è¿‘å¯„å­˜ç‚¹...";const o=`http://localhost:8000/api/nearby/my-nearby?${new URLSearchParams({longitude:t.toString(),latitude:a.toString(),radius:"5",limit:"20"}).toString()}`;console.log("ğŸ“¡ è¯·æ±‚URL:",o),n({url:o,method:"GET",header:{"Content-Type":"application/json"},timeout:1e4,success:t=>{console.log("=== åç«¯é™„è¿‘å¯„å­˜ç‚¹æ¥å£å“åº” ==="),console.log("HTTPçŠ¶æ€ç :",t.statusCode),console.log("å“åº”æ•°æ®:",t.data),200===t.statusCode&&t.data?this.handleNearbyLockersSuccess(t.data):401===t.statusCode?(console.error("âŒ APIéœ€è¦è®¤è¯ï¼Œåç«¯æœåŠ¡å¯èƒ½éœ€è¦é‡å¯"),this.handleNearbyLockersError("æ­£åœ¨è¿æ¥æœåŠ¡å™¨ï¼Œè¯·ç¨åé‡è¯•..."),e({title:"æ­£åœ¨è¿æ¥æœåŠ¡å™¨...",icon:"loading",duration:2e3})):(console.error("âŒ æ¥å£è¿”å›é”™è¯¯:",t.statusCode),this.handleNearbyLockersError("æ¥å£è¿”å›é”™è¯¯: "+t.statusCode))},fail:t=>{console.error("âŒ é™„è¿‘å¯„å­˜ç‚¹æ¥å£è°ƒç”¨å¤±è´¥:",t),this.handleNearbyLockersError("ç½‘ç»œè¯·æ±‚å¤±è´¥: "+(t.errMsg||"æœªçŸ¥é”™è¯¯")),e({title:"ç½‘ç»œè¿æ¥å¤±è´¥",icon:"none",duration:2e3})}})},handleNearbyLockersSuccess(t){console.log("âœ… é™„è¿‘å¯„å­˜ç‚¹æ¥å£è°ƒç”¨æˆåŠŸ"),console.log("åŸå§‹å“åº”æ•°æ®:",t);const a=t.nearby_points||[],o=t.total_count||0,n=t.search_radius||5;t.user_location,console.log("ğŸ“ é™„è¿‘å¯„å­˜ç‚¹æ•°æ®:",{count:a.length,totalCount:o,searchRadius:n}),a&&a.length>0?(this.nearbyLockers=this.processNearbyLockersData(a),this.addLockersToMap(this.nearbyLockers),this.selectedLocker=this.nearbyLockers[0],console.log("âœ… å¯„å­˜ç‚¹æ•°æ®å¤„ç†å®Œæˆ:",this.nearbyLockers.length,"ä¸ª"),e({title:`æ‰¾åˆ°${this.nearbyLockers.length}ä¸ªå¯„å­˜ç‚¹`,icon:"success",duration:2e3})):(console.log("âš ï¸ é™„è¿‘æ²¡æœ‰æ‰¾åˆ°å¯„å­˜ç‚¹"),this.nearbyLockers=[],this.selectedLocker=null,e({title:`é™„è¿‘${n}kmå†…æš‚æ— å¯„å­˜ç‚¹`,icon:"none",duration:2e3})),this.loadingText=""},handleNearbyLockersError(t){var a,o,n,s;console.error("âŒ é™„è¿‘å¯„å­˜ç‚¹åŠ è½½å¤±è´¥:",t),console.log("ğŸ”„ ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ä½œä¸ºå¤‡ç”¨"),this.nearbyLockers=[{id:"mock_1",name:"æ¨¡æ‹Ÿå¯„å­˜ç‚¹1",large:3,medium:5,small:8,address:"æ¨¡æ‹Ÿåœ°å€1",distance:"0.5km",status:"available",longitude:parseFloat((null==(a=this.currentLocation)?void 0:a.longitude)||113.6253)+.005,latitude:parseFloat((null==(o=this.currentLocation)?void 0:o.latitude)||34.7466)+.005},{id:"mock_2",name:"æ¨¡æ‹Ÿå¯„å­˜ç‚¹2",large:2,medium:4,small:6,address:"æ¨¡æ‹Ÿåœ°å€2",distance:"1.2km",status:"available",longitude:parseFloat((null==(n=this.currentLocation)?void 0:n.longitude)||113.6253)-.008,latitude:parseFloat((null==(s=this.currentLocation)?void 0:s.latitude)||34.7466)+.003}],this.selectedLocker=this.nearbyLockers[0],this.addLockersToMap(this.nearbyLockers),this.loadingText="",e({title:"ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®",icon:"none",duration:2e3})},processNearbyLockersData(t){return console.log("ğŸ”„ å¤„ç†å¯„å­˜ç‚¹æ•°æ®ï¼Œæ•°é‡:",t.length),t.map(((t,e)=>(console.log(`å¤„ç†å¯„å­˜ç‚¹ ${e+1}:`,t),{id:t.id||t.point_id||`point_${e+1}`,name:t.name||t.point_name||`å¯„å­˜ç‚¹${e+1}`,large:parseInt(t.large_count||t.large||0),medium:parseInt(t.medium_count||t.medium||0),small:parseInt(t.small_count||t.small||0),address:t.address||t.location||"åœ°å€ä¿¡æ¯å¾…å®Œå–„",distance:this.formatDistance(t.distance),status:t.status||"available",longitude:parseFloat(t.longitude||0),latitude:parseFloat(t.latitude||0),phone:t.phone||t.mobile||"",openTime:t.open_time||t.business_hours||"24å°æ—¶",rating:parseFloat(t.rating||t.score||0),rawData:t})))},formatDistance:t=>"number"==typeof t?t<1?Math.round(1e3*t)+"m":t.toFixed(1)+"km":"string"==typeof t?t:"è·ç¦»æœªçŸ¥",addLockersToMap(t){this.mapInstance&&t&&0!==t.length&&(console.log("ğŸ“ åœ¨åœ°å›¾ä¸Šæ·»åŠ å¯„å­˜ç‚¹æ ‡è®°:",t.length,"ä¸ª"),t.forEach(((t,e)=>{if(!t.longitude||!t.latitude)return void console.warn("âš ï¸ å¯„å­˜ç‚¹ç¼ºå°‘åæ ‡ä¿¡æ¯:",t);const a=new BMap.Point(t.longitude,t.latitude),o=new BMap.Marker(a),n=new BMap.Icon("data:image/svg+xml;base64,"+btoa('\n\t\t\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28">\n\t\t\t\t\t\t\t\t<rect x="2" y="2" width="24" height="24" fill="#FF6B35" stroke="#FFFFFF" stroke-width="2" rx="4"/>\n\t\t\t\t\t\t\t\t<text x="14" y="18" text-anchor="middle" fill="white" font-size="12" font-weight="bold">æŸœ</text>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t'),new BMap.Size(28,28),{anchor:new BMap.Size(14,14)});o.setIcon(n),this.mapInstance.addOverlay(o);const s=`\n\t\t\t\t\t\t<div style="padding: 15px; min-width: 250px;">\n\t\t\t\t\t\t\t<h4 style="margin: 0 0 10px 0; color: #FF6B35;">ğŸª ${t.name}</h4>\n\t\t\t\t\t\t\t<p style="margin: 5px 0;"><strong>åœ°å€:</strong> ${t.address}</p>\n\t\t\t\t\t\t\t<p style="margin: 5px 0;"><strong>è·ç¦»:</strong> ${t.distance}</p>\n\t\t\t\t\t\t\t<div style="margin: 10px 0;">\n\t\t\t\t\t\t\t\t<strong>æŸœå­æ•°é‡:</strong><br>\n\t\t\t\t\t\t\t\tå¤§æŸœ: ${t.large}ä¸ª | ä¸­æŸœ: ${t.medium}ä¸ª | å°æŸœ: ${t.small}ä¸ª\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<p style="margin: 5px 0; color: ${"available"===t.status?"#28a745":"#dc3545"};">\n\t\t\t\t\t\t\t\t<strong>çŠ¶æ€:</strong> ${"available"===t.status?"å¯ç”¨":"ä¸å¯ç”¨"}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`,i=new BMap.InfoWindow(s);o.addEventListener("click",(()=>{this.mapInstance.openInfoWindow(i,a),this.selectedLocker=t,console.log("é€‰ä¸­å¯„å­˜ç‚¹:",t.name)}))})),console.log("âœ… å¯„å­˜ç‚¹æ ‡è®°æ·»åŠ å®Œæˆ"))},getCurrentLocation(){console.log("ğŸ™ï¸ å›åˆ°åŸå¸‚æŒ‰é’®ç‚¹å‡»"),this.locationStatus="æ­£åœ¨å›åˆ°é€‰æ‹©çš„åŸå¸‚...",this.loadingText="æ­£åœ¨å›åˆ°é€‰æ‹©çš„åŸå¸‚...",s({title:"æ­£åœ¨å›åˆ°åŸå¸‚..."});const o=t("selectedCity");console.log("ğŸ” å­˜å‚¨ä¸­çš„é€‰æ‹©åŸå¸‚:",o),console.log("ğŸ” åŸå¸‚åç§°:",null==o?void 0:o.name),console.log("ğŸ” åŸå¸‚åæ ‡:",null==o?void 0:o.coordinates),o&&o.coordinates?(console.log("ğŸ“ å›åˆ°é€‰æ‹©çš„åŸå¸‚:",o.name),console.log("ğŸ“ åŸå¸‚åæ ‡:",o.coordinates),this.currentCity=o.name,setTimeout((()=>{i(),this.setCityLocation(o),e({title:`å·²å›åˆ°${o.name}`,icon:"success",duration:2e3})}),1e3)):(console.log("ğŸ“ æœªæ‰¾åˆ°é€‰æ‹©çš„åŸå¸‚ï¼Œä½¿ç”¨é»˜è®¤åŸå¸‚"),setTimeout((()=>{i();const t={name:"éƒ‘å·",coordinates:{longitude:113.6253,latitude:34.7466}};a("selectedCity",t),this.currentCity=t.name,this.setCityLocation(t),e({title:"å·²å›åˆ°é»˜è®¤åŸå¸‚ï¼šéƒ‘å·",icon:"none",duration:2e3})}),1e3))},manualHTML5Location(){if(console.log("ğŸ§­ æ‰‹åŠ¨HTML5å®šä½"),!navigator.geolocation)return i(),void c({title:"å®šä½å¤±è´¥",content:"æµè§ˆå™¨ä¸æ”¯æŒå®šä½åŠŸèƒ½",showCancel:!1});navigator.geolocation.getCurrentPosition((t=>{i(),console.log("âœ… HTML5æ‰‹åŠ¨å®šä½æˆåŠŸ:",t),this.handleHTML5LocationSuccess(t)}),(t=>{i(),console.error("âŒ HTML5æ‰‹åŠ¨å®šä½å¤±è´¥:",t);let e="å®šä½å¤±è´¥";switch(t.code){case t.PERMISSION_DENIED:e="å®šä½æƒé™è¢«æ‹’ç»ï¼Œè¯·åœ¨æµè§ˆå™¨è®¾ç½®ä¸­å…è®¸ä½ç½®è®¿é—®";break;case t.POSITION_UNAVAILABLE:e="ä½ç½®ä¿¡æ¯ä¸å¯ç”¨ï¼Œè¯·æ£€æŸ¥GPSæˆ–ç½‘ç»œè¿æ¥";break;case t.TIMEOUT:e="å®šä½è¶…æ—¶ï¼Œè¯·é‡è¯•"}c({title:"å®šä½å¤±è´¥",content:e,showCancel:!1})}),{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})},refreshMap(){console.log("ğŸ”„ åˆ·æ–°åœ°å›¾å’Œé™„è¿‘å¯„å­˜ç‚¹"),this.loadingText="æ­£åœ¨åˆ·æ–°...",s({title:"æ­£åœ¨åˆ·æ–°..."});const a=t("selectedCity");if(a&&a.coordinates)console.log("ğŸ”„ åˆ·æ–°åˆ°é€‰æ‹©çš„åŸå¸‚:",a.name),this.currentCity=a.name,setTimeout((()=>{i(),this.setCityLocation(a),e({title:`å·²åˆ·æ–°${a.name}çš„å¯„å­˜ç‚¹`,icon:"success",duration:2e3})}),1e3);else if(this.currentLocation){const t=parseFloat(this.currentLocation.longitude),a=parseFloat(this.currentLocation.latitude);console.log("ğŸ”„ åŸºäºå½“å‰ä½ç½®åˆ·æ–°é™„è¿‘å¯„å­˜ç‚¹"),setTimeout((()=>{i(),this.loadNearbyLockers(t,a),e({title:"å·²åˆ·æ–°é™„è¿‘å¯„å­˜ç‚¹",icon:"success",duration:2e3})}),1e3)}else console.log("ğŸ”„ é‡æ–°åˆå§‹åŒ–åœ°å›¾å’Œå®šä½"),setTimeout((()=>{i(),this.mapReady=!1,this.startInitialization(),e({title:"æ­£åœ¨é‡æ–°åˆå§‹åŒ–åœ°å›¾",icon:"loading",duration:2e3})}),1e3)},refreshNearbyLockers(){if(!this.currentLocation)return void e({title:"è¯·å…ˆè·å–ä½ç½®ä¿¡æ¯",icon:"none",duration:2e3});const t=parseFloat(this.currentLocation.longitude),a=parseFloat(this.currentLocation.latitude);console.log("ğŸ”„ æ‰‹åŠ¨åˆ·æ–°é™„è¿‘å¯„å­˜ç‚¹"),this.loadNearbyLockers(t,a)},handleError(t){console.error("âŒ é”™è¯¯:",t),this.mapError=!0,this.mapErrorMessage=t,this.mapStatus="åŠ è½½å¤±è´¥",this.loadingText=""},handleMapError(t){console.error("âŒ åœ°å›¾é”™è¯¯:",t),this.mapError=!0,this.mapErrorMessage=t,this.mapStatus="APIåŠ è½½å¤±è´¥",this.loadingText="",e({title:"åœ°å›¾åŠ è½½å¤±è´¥",icon:"none",duration:3e3})},retryLoadMap(){console.log("ğŸ”„ é‡è¯•åŠ è½½åœ°å›¾"),this.mapError=!1,this.mapErrorMessage="",this.startInitialization()},openSearch(){console.log("ğŸ” æ‰“å¼€æœç´¢é¡µé¢"),o({url:"/pages/search/search"})},selectLocker(t){console.log("é€‰æ‹©å¯„å­˜ç‚¹:",t),c({title:"ç¡®è®¤é€‰æ‹©",content:`ç¡®å®šé€‰æ‹© ${t.name} å—ï¼Ÿ`,success:t=>{t.confirm&&e({title:"è·³è½¬åˆ°å¯„å­˜ç‚¹è¯¦æƒ…",icon:"success",duration:1500})}})}}},[["render",function(t,e,a,o,n,s){const i=f,c=d,M=I;return u(),l(c,{class:"page"},{default:r((()=>[h(c,{class:"status-bar"},{default:r((()=>[h(i,{class:"status-text"},{default:r((()=>[p("åŸå¸‚å®šä½çŠ¶æ€: "+g(n.locationStatus),1)])),_:1}),h(i,{class:"api-key-text"},{default:r((()=>[p("ç™¾åº¦åœ°å›¾: "+g(n.mapStatus),1)])),_:1})])),_:1}),h(c,{class:"search-section"},{default:r((()=>[h(c,{class:"location-info",onClick:s.selectCity},{default:r((()=>[h(i,{class:"location-icon"},{default:r((()=>[p("ğŸ“")])),_:1}),h(i,{class:"current-city"},{default:r((()=>[p(g(n.currentCity),1)])),_:1}),h(i,{class:"dropdown-icon"},{default:r((()=>[p("â–¼")])),_:1})])),_:1},8,["onClick"]),h(c,{class:"search-box",onClick:s.openSearch},{default:r((()=>[h(i,{class:"search-icon"},{default:r((()=>[p("ğŸ”")])),_:1}),h(i,{class:"search-placeholder"},{default:r((()=>[p("æœç´¢ç«è½¦ç«™/åœ°é“ç«™/æ™¯ç‚¹")])),_:1})])),_:1},8,["onClick"])])),_:1}),h(c,{class:"map-container"},{default:r((()=>[n.mapReady||n.mapError?m("",!0):(u(),l(c,{key:0,class:"map-placeholder"},{default:r((()=>[h(c,{class:"placeholder-content"},{default:r((()=>[h(i,{class:"placeholder-icon"},{default:r((()=>[p("ğŸ—ºï¸")])),_:1}),h(i,{class:"placeholder-text"},{default:r((()=>[p(g(n.loadingText),1)])),_:1}),h(i,{class:"placeholder-status"},{default:r((()=>[p("çŠ¶æ€: "+g(n.mapStatus),1)])),_:1})])),_:1})])),_:1})),y(h(c,{id:"baiduMapContainer",class:"baidu-map-container"},null,512),[[L,!n.mapError]]),h(c,{class:"map-controls"},{default:r((()=>[h(c,{class:"control-btn location-btn",onClick:s.getCurrentLocation},{default:r((()=>[h(i,{class:"btn-icon"},{default:r((()=>[p("ğŸ™ï¸")])),_:1}),h(i,{class:"btn-text"},{default:r((()=>[p("å›åˆ°åŸå¸‚")])),_:1})])),_:1},8,["onClick"]),h(c,{class:"control-btn refresh-btn",onClick:s.refreshMap},{default:r((()=>[h(i,{class:"btn-icon"},{default:r((()=>[p("ğŸ”„")])),_:1}),h(i,{class:"btn-text"},{default:r((()=>[p("åˆ·æ–°")])),_:1})])),_:1},8,["onClick"]),h(c,{class:"control-btn lockers-btn",onClick:s.refreshNearbyLockers},{default:r((()=>[h(i,{class:"btn-icon"},{default:r((()=>[p("ğŸª")])),_:1}),h(i,{class:"btn-text"},{default:r((()=>[p("å¯„å­˜ç‚¹")])),_:1})])),_:1},8,["onClick"])])),_:1}),n.mapError?(u(),l(c,{key:1,class:"map-error"},{default:r((()=>[h(i,{class:"error-title"},{default:r((()=>[p("åœ°å›¾åŠ è½½å¤±è´¥")])),_:1}),h(i,{class:"error-message"},{default:r((()=>[p(g(n.mapErrorMessage),1)])),_:1}),h(c,{class:"error-actions"},{default:r((()=>[h(M,{class:"retry-btn",onClick:s.retryLoadMap},{default:r((()=>[p("é‡è¯•")])),_:1},8,["onClick"])])),_:1})])),_:1})):m("",!0),n.currentLocation?(u(),l(c,{key:2,class:"location-info-panel"},{default:r((()=>[h(i,{class:"location-title"},{default:r((()=>[p("ğŸ™ï¸ å½“å‰åŸå¸‚ä½ç½® ("+g(n.currentLocation.source)+")",1)])),_:1}),h(i,{class:"location-detail"},{default:r((()=>[p("ğŸŒ ç»åº¦: "+g(n.currentLocation.longitude),1)])),_:1}),h(i,{class:"location-detail"},{default:r((()=>[p("ğŸŒ çº¬åº¦: "+g(n.currentLocation.latitude),1)])),_:1}),h(i,{class:"location-detail"},{default:r((()=>[p("ğŸ¯ ç²¾åº¦: "+g(n.currentLocation.accuracy)+"ç±³",1)])),_:1}),n.currentLocation.altitude?(u(),l(i,{key:0,class:"location-detail"},{default:r((()=>[p("â›°ï¸ æµ·æ‹”: "+g(n.currentLocation.altitude)+"ç±³",1)])),_:1})):m("",!0),n.currentLocation.speed?(u(),l(i,{key:1,class:"location-detail"},{default:r((()=>[p("ğŸš— é€Ÿåº¦: "+g(n.currentLocation.speed)+"km/h",1)])),_:1})):m("",!0),h(i,{class:"location-detail"},{default:r((()=>[p("ğŸ• æ›´æ–°: "+g(n.currentLocation.timestamp),1)])),_:1}),h(i,{class:"location-detail address"},{default:r((()=>[p("ğŸ“ "+g(n.currentLocation.address),1)])),_:1})])),_:1})):m("",!0)])),_:1}),n.currentLocation?(u(),l(c,{key:0,class:"locker-panel"},{default:r((()=>[h(c,{class:"panel-header"},{default:r((()=>[h(i,{class:"panel-title"},{default:r((()=>[p("ğŸª é™„è¿‘å¯„å­˜ç‚¹")])),_:1}),n.nearbyLockers.length>0?(u(),l(i,{key:0,class:"panel-count"},{default:r((()=>[p("æ‰¾åˆ° "+g(n.nearbyLockers.length)+" ä¸ªå¯„å­˜ç‚¹",1)])),_:1})):(u(),l(i,{key:1,class:"panel-count"},{default:r((()=>[p("é™„è¿‘æš‚æ— å¯„å­˜ç‚¹")])),_:1})),h(i,{class:"refresh-btn-small",onClick:s.refreshNearbyLockers},{default:r((()=>[p("ğŸ”„")])),_:1},8,["onClick"])])),_:1}),n.selectedLocker?(u(),l(c,{key:0,class:"selected-locker"},{default:r((()=>[h(c,{class:"locker-info"},{default:r((()=>[h(i,{class:"locker-name"},{default:r((()=>[p(g(n.selectedLocker.name),1)])),_:1}),h(i,{class:"locker-address"},{default:r((()=>[p("ğŸ“ "+g(n.selectedLocker.address),1)])),_:1}),h(i,{class:"locker-distance"},{default:r((()=>[p("ğŸ“ è·ç¦»: "+g(n.selectedLocker.distance),1)])),_:1}),h(i,{class:k(["locker-status",n.selectedLocker.status])},{default:r((()=>[p(" ğŸ”˜ çŠ¶æ€: "+g("available"===n.selectedLocker.status?"å¯ç”¨":"ä¸å¯ç”¨"),1)])),_:1},8,["class"])])),_:1}),h(c,{class:"locker-capacity"},{default:r((()=>[h(c,{class:"capacity-item"},{default:r((()=>[h(i,{class:"capacity-label"},{default:r((()=>[p("å¤§æŸœ")])),_:1}),h(i,{class:k(["capacity-value",{zero:0===n.selectedLocker.large}])},{default:r((()=>[p(g(n.selectedLocker.large),1)])),_:1},8,["class"])])),_:1}),h(c,{class:"capacity-item"},{default:r((()=>[h(i,{class:"capacity-label"},{default:r((()=>[p("ä¸­æŸœ")])),_:1}),h(i,{class:k(["capacity-value",{zero:0===n.selectedLocker.medium}])},{default:r((()=>[p(g(n.selectedLocker.medium),1)])),_:1},8,["class"])])),_:1}),h(c,{class:"capacity-item"},{default:r((()=>[h(i,{class:"capacity-label"},{default:r((()=>[p("å°æŸœ")])),_:1}),h(i,{class:k(["capacity-value",{zero:0===n.selectedLocker.small}])},{default:r((()=>[p(g(n.selectedLocker.small),1)])),_:1},8,["class"])])),_:1})])),_:1}),h(c,{class:"locker-actions"},{default:r((()=>[h(M,{class:"action-btn primary",onClick:e[0]||(e[0]=t=>s.selectLocker(n.selectedLocker)),disabled:"available"!==n.selectedLocker.status},{default:r((()=>[p(g("available"===n.selectedLocker.status?"é€‰æ‹©æ­¤å¯„å­˜ç‚¹":"æš‚ä¸å¯ç”¨"),1)])),_:1},8,["disabled"])])),_:1})])),_:1})):(u(),l(c,{key:1,class:"no-lockers"},{default:r((()=>[h(c,{class:"no-lockers-content"},{default:r((()=>[h(i,{class:"no-lockers-icon"},{default:r((()=>[p("ğŸ“")])),_:1}),h(i,{class:"no-lockers-title"},{default:r((()=>[p("é™„è¿‘æš‚æ— å¯„å­˜ç‚¹")])),_:1}),h(i,{class:"no-lockers-desc"},{default:r((()=>[p("åœ¨å½“å‰ä½ç½®5å…¬é‡ŒèŒƒå›´å†…æœªæ‰¾åˆ°å¯ç”¨çš„å¯„å­˜ç‚¹")])),_:1}),h(c,{class:"no-lockers-actions"},{default:r((()=>[h(M,{class:"action-btn secondary",onClick:s.refreshNearbyLockers},{default:r((()=>[p(" ğŸ”„ é‡æ–°æœç´¢ ")])),_:1},8,["onClick"]),h(M,{class:"action-btn primary",onClick:s.openSearch},{default:r((()=>[p(" ğŸ” æœç´¢å…¶ä»–åœ°ç‚¹ ")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}))])),_:1})):m("",!0)])),_:1})}],["__scopeId","data-v-c5cbaf94"]]);export{b as default};
