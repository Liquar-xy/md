import{p as t,v as a,r as i,g as e,c as s,a as o,e as l,w as n,i as d,o as c,f as p,j as r,C as u,D as f,F as g,k as h,t as _}from"./index-BgeTyoVd.js";import{_ as L}from"./_plugin-vue_export-helper.BCo6x5W8.js";const m=L({data:()=>({pointList:[],isLoading:!1}),onLoad(){this.getPointList()},onShow(){this.getPointList()},methods:{goBack(){t({delta:1})},addNewPoint(){console.log("点击新增网点按钮"),a({url:"/pages/point-edit/point-edit?id=new&name=新增网点"})},getPointList(){this.isLoading=!0,i({url:"http://localhost:8000/point_list",method:"GET",header:{Authorization:"Bearer "+e("adminToken")},success:t=>{var a;if(console.log("网点列表接口返回数据:",t),!t.data||200!==t.data.code&&"200"!==t.data.code)this.pointList=[],o({title:(null==(a=t.data)?void 0:a.msg)||"获取网点列表失败",icon:"none"});else{const a=t.data.list||t.data.List||[];a&&Array.isArray(a)?(this.pointList=a.map((t=>(console.log("原始网点数据:",t),{...t,id:t.Id||t.id}))),console.log("网点列表数据:",this.pointList),s("pointList",this.pointList),0===this.pointList.length&&o({title:"暂无网点数据",icon:"none"})):(this.pointList=[],o({title:"暂无网点数据",icon:"none"}))}},fail:t=>{console.error("网点列表请求失败:",t),this.pointList=[],o({title:"网络请求失败",icon:"none"})},complete:()=>{this.isLoading=!1}})},goToPointDetail(t){console.log("点击网点:",t);const i=t.id,e=t.name||t.Name||"";console.log("跳转参数 - ID:",i,"名称:",e),console.log("完整网点数据:",t),console.log("保存到currentPoint的数据:",t),s("currentPoint",t),this.pointList&&this.pointList.length>0&&(s("pointList",this.pointList),console.log("网点列表数据已保存到本地存储")),a({url:`/pages/point-detail/point-detail?id=${i}&name=${encodeURIComponent(e)}`})}}},[["render",function(t,a,i,e,s,o){const L=h,m=d;return c(),l(m,{class:"point-page"},{default:n((()=>[p(m,{class:"header"},{default:n((()=>[p(m,{class:"header-left",onClick:o.goBack},{default:n((()=>[p(L,{class:"back-icon"},{default:n((()=>[r("←")])),_:1})])),_:1},8,["onClick"]),p(m,{class:"header-title"},{default:n((()=>[p(L,{class:"title-text"},{default:n((()=>[r("我的网点")])),_:1})])),_:1}),p(m,{class:"header-right",onClick:o.addNewPoint},{default:n((()=>[p(L,{class:"add-text"},{default:n((()=>[r("新增网点")])),_:1})])),_:1},8,["onClick"])])),_:1}),p(m,{class:"point-list"},{default:n((()=>[s.isLoading?(c(),l(m,{key:0,class:"loading-container"},{default:n((()=>[p(L,{class:"loading-text"},{default:n((()=>[r("加载中...")])),_:1})])),_:1})):s.pointList.length>0?(c(),l(m,{key:1},{default:n((()=>[(c(!0),u(g,null,f(s.pointList,(t=>(c(),l(m,{key:t.id||t.name,class:"point-card",onClick:a=>o.goToPointDetail(t)},{default:n((()=>[p(m,{class:"point-title-section"},{default:n((()=>[p(m,{class:"point-title"},{default:n((()=>[r(_(t.name),1)])),_:2},1024)])),_:2},1024),p(m,{class:"point-divider"}),p(m,{class:"point-info"},{default:n((()=>[p(m,{class:"point-label"},{default:n((()=>[r("柜组数量：")])),_:1}),p(m,{class:"point-value"},{default:n((()=>[r(_(t.cabinetInfo||t.availableLarge+"组"+t.availableMedium+"主机"+t.availableSmall+"柜门"),1)])),_:2},1024)])),_:2},1024),p(m,{class:"point-info"},{default:n((()=>[p(m,{class:"point-label"},{default:n((()=>[r("详细地址：")])),_:1}),p(m,{class:"point-value"},{default:n((()=>[r(_(t.address),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):(c(),l(m,{key:2,class:"empty-container"},{default:n((()=>[p(L,{class:"empty-text"},{default:n((()=>[r("暂无网点数据")])),_:1}),p(L,{class:"empty-tip"},{default:n((()=>[r('点击右上角"新增网点"开始添加')])),_:1})])),_:1}))])),_:1})])),_:1})}],["__scopeId","data-v-bbcab652"]]);export{m as default};
