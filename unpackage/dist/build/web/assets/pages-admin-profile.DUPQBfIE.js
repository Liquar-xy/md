import{g as a,p as e,a as l,c as s,y as t,m as n,J as o,d as c,e as r,w as u,i as d,o as i,f,j as m,k as h,u as p,I as _,l as I}from"./index-BAOqw0gZ.js";import{_ as g}from"./_plugin-vue_export-helper.BCo6x5W8.js";const v=g({data:()=>({userInfo:{username:"管理员",realName:"",phone:"",email:"",adminId:"1",avatar:""}}),onLoad(){this.loadUserInfo()},methods:{loadUserInfo(){try{const e=a("adminData");if(e){const a=JSON.parse(e);this.userInfo.username=a.username||"管理员",this.userInfo.adminId=a.userId||a.account||a.id||"",this.userInfo.realName=a.realName||"",this.userInfo.phone=a.phoneNumber||a.phone||"",this.userInfo.email=a.email||"",this.userInfo.avatar=a.avatar||""}}catch(e){console.log("加载用户信息失败:",e)}},handleBack(){e()},handleSave(){if(this.userInfo.username.trim())try{const a={username:this.userInfo.username,account:this.userInfo.adminId,realName:this.userInfo.realName,phone:this.userInfo.phone,email:this.userInfo.email,avatar:this.userInfo.avatar,loginType:"admin"};s("adminData",JSON.stringify(a)),l({title:"保存成功",icon:"success"})}catch(a){console.log("保存失败:",a),l({title:"保存失败",icon:"none"})}else l({title:"请输入用户名",icon:"none"})},handleChangeAvatar(){t({count:1,sizeType:["compressed"],sourceType:["album","camera"],success:a=>{this.userInfo.avatar=a.tempFilePaths[0],l({title:"头像已更新",icon:"success"})}})},handleChangePassword(){n({title:"修改密码",content:"请联系系统管理员修改密码",showCancel:!1})},handleLogout(){n({title:"确认退出",content:"确定要退出登录吗？",success:a=>{if(a.confirm){try{o("adminData"),console.log("管理员数据已清除")}catch(e){console.log("清除数据失败:",e)}l({title:"已退出登录",icon:"success",success:()=>{setTimeout((()=>{c({url:"/pages/login/login"})}),1500)}})}}})}}},[["render",function(a,e,l,s,t,n){const o=h,c=d,g=p,v=_,b=I;return i(),r(c,{class:"profile-container"},{default:u((()=>[f(c,{class:"header"},{default:u((()=>[f(c,{class:"header-left"},{default:u((()=>[f(o,{class:"back-icon",onClick:n.handleBack},{default:u((()=>[m("←")])),_:1},8,["onClick"])])),_:1}),f(c,{class:"header-center"},{default:u((()=>[f(o,{class:"header-title"},{default:u((()=>[m("个人信息")])),_:1})])),_:1}),f(c,{class:"header-right"},{default:u((()=>[f(o,{class:"save-icon",onClick:n.handleSave},{default:u((()=>[m("💾")])),_:1},8,["onClick"])])),_:1})])),_:1}),f(c,{class:"avatar-section"},{default:u((()=>[f(c,{class:"avatar-container",onClick:n.handleChangeAvatar},{default:u((()=>[f(g,{class:"avatar",src:t.userInfo.avatar||"/static/logo.png",mode:"aspectFill"},null,8,["src"]),f(c,{class:"avatar-edit"},{default:u((()=>[f(o,{class:"edit-icon"},{default:u((()=>[m("📷")])),_:1})])),_:1})])),_:1},8,["onClick"]),f(o,{class:"avatar-tip"},{default:u((()=>[m("点击更换头像")])),_:1})])),_:1}),f(c,{class:"form-section"},{default:u((()=>[f(c,{class:"form-item"},{default:u((()=>[f(o,{class:"form-label"},{default:u((()=>[m("用户名")])),_:1}),f(v,{class:"form-input",modelValue:t.userInfo.username,"onUpdate:modelValue":e[0]||(e[0]=a=>t.userInfo.username=a),placeholder:"请输入用户名"},null,8,["modelValue"])])),_:1}),f(c,{class:"form-item"},{default:u((()=>[f(o,{class:"form-label"},{default:u((()=>[m("真实姓名")])),_:1}),f(v,{class:"form-input",modelValue:t.userInfo.realName,"onUpdate:modelValue":e[1]||(e[1]=a=>t.userInfo.realName=a),placeholder:"请输入真实姓名"},null,8,["modelValue"])])),_:1}),f(c,{class:"form-item"},{default:u((()=>[f(o,{class:"form-label"},{default:u((()=>[m("手机号码")])),_:1}),f(v,{class:"form-input",modelValue:t.userInfo.phone,"onUpdate:modelValue":e[2]||(e[2]=a=>t.userInfo.phone=a),placeholder:"请输入手机号码",type:"number"},null,8,["modelValue"])])),_:1}),f(c,{class:"form-item"},{default:u((()=>[f(o,{class:"form-label"},{default:u((()=>[m("邮箱地址")])),_:1}),f(v,{class:"form-input",modelValue:t.userInfo.email,"onUpdate:modelValue":e[3]||(e[3]=a=>t.userInfo.email=a),placeholder:"请输入邮箱地址",type:"email"},null,8,["modelValue"])])),_:1}),f(c,{class:"form-item"},{default:u((()=>[f(o,{class:"form-label"},{default:u((()=>[m("管理员ID")])),_:1}),f(v,{class:"form-input",modelValue:t.userInfo.adminId,"onUpdate:modelValue":e[4]||(e[4]=a=>t.userInfo.adminId=a),placeholder:"管理员ID",disabled:""},null,8,["modelValue"])])),_:1})])),_:1}),f(c,{class:"action-section"},{default:u((()=>[f(b,{class:"action-btn primary",onClick:n.handleSave},{default:u((()=>[f(o,{class:"btn-icon"},{default:u((()=>[m("💾")])),_:1}),f(o,{class:"btn-text"},{default:u((()=>[m("保存修改")])),_:1})])),_:1},8,["onClick"]),f(b,{class:"action-btn warning",onClick:n.handleChangePassword},{default:u((()=>[f(o,{class:"btn-icon"},{default:u((()=>[m("🔒")])),_:1}),f(o,{class:"btn-text"},{default:u((()=>[m("修改密码")])),_:1})])),_:1},8,["onClick"]),f(b,{class:"action-btn danger",onClick:n.handleLogout},{default:u((()=>[f(o,{class:"btn-icon"},{default:u((()=>[m("🚪")])),_:1}),f(o,{class:"btn-text"},{default:u((()=>[m("退出登录")])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1})}],["__scopeId","data-v-84aa91ed"]]);export{v as default};
