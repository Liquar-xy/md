<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‰ç«¯æ•°æ®æ˜ å°„æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .data-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        .data-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #007bff;
        }
        .data-item h4 {
            margin: 0 0 10px 0;
            color: #333;
        }
        .data-value {
            font-size: 24px;
            font-weight: bold;
            color: #007bff;
        }
        .data-label {
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }
        .success {
            border-left-color: #28a745;
        }
        .error {
            border-left-color: #dc3545;
        }
        button {
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
        }
        .result {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 15px;
            margin-top: 10px;
            white-space: pre-wrap;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <h1>ğŸ” å‰ç«¯æ•°æ®æ˜ å°„æµ‹è¯•</h1>
    
    <div class="container">
        <h3>ğŸ“Š åç«¯APIè¿”å›çš„æ•°æ®ï¼ˆæ¨¡æ‹Ÿï¼‰</h3>
        <div id="apiData" class="result">
{
  "msg": "æŸ¥è¯¢æˆåŠŸ",
  "pointNum": "19",
  "yesterdayOrderNum": "8",
  "lastOrderPrice": 322,
  "lastOrderNum": "1",
  "mouthPrice": 696,
  "monthNum": "14"
}
        </div>
        <button onclick="testMapping()">ğŸš€ æµ‹è¯•æ•°æ®æ˜ å°„</button>
    </div>

    <div class="container">
        <h3>ğŸ“ˆ å‰ç«¯æ˜¾ç¤ºçš„æ•°æ®</h3>
        <div id="frontendData" class="data-grid"></div>
    </div>

    <div class="container">
        <h3>ğŸ” æ˜ å°„è¿‡ç¨‹</h3>
        <div id="mappingProcess" class="result"></div>
    </div>

    <script>
        // æ¨¡æ‹Ÿåç«¯APIè¿”å›çš„æ•°æ®
        const apiResponse = {
            "msg": "æŸ¥è¯¢æˆåŠŸ",
            "pointNum": "19",
            "yesterdayOrderNum": "8",
            "lastOrderPrice": 322,
            "lastOrderNum": "1",
            "mouthPrice": 696,
            "monthNum": "14"
        };

        function testMapping() {
            console.log('=== å¼€å§‹æ•°æ®æ˜ å°„æµ‹è¯• ===');
            
            // æ¨¡æ‹Ÿå‰ç«¯çš„æ•°æ®æ˜ å°„è¿‡ç¨‹
            const data = apiResponse;
            
            let processLog = '=== æ•°æ®æ˜ å°„è¿‡ç¨‹ ===\n\n';
            
            // 1. è¯»å–åŸå§‹æ•°æ®
            processLog += '1. è¯»å–åŸå§‹æ•°æ®:\n';
            const originalPointNum = data.pointNum;
            const originalLastOrderNum = data.lastOrderNum;
            const originalYesterdayOrderNum = data.yesterdayOrderNum;
            const originalLastOrderPrice = data.lastOrderPrice;
            const originalMouthPrice = data.mouthPrice;
            const originalMonthNum = data.monthNum;
            
            processLog += `   pointNum: ${originalPointNum} (ç±»å‹: ${typeof originalPointNum})\n`;
            processLog += `   lastOrderNum: ${originalLastOrderNum} (ç±»å‹: ${typeof originalLastOrderNum})\n`;
            processLog += `   yesterdayOrderNum: ${originalYesterdayOrderNum} (ç±»å‹: ${typeof originalYesterdayOrderNum})\n`;
            processLog += `   lastOrderPrice: ${originalLastOrderPrice} (ç±»å‹: ${typeof originalLastOrderPrice})\n`;
            processLog += `   mouthPrice: ${originalMouthPrice} (ç±»å‹: ${typeof originalMouthPrice})\n`;
            processLog += `   monthNum: ${originalMonthNum} (ç±»å‹: ${typeof originalMonthNum})\n\n`;
            
            // 2. æ•°æ®è½¬æ¢
            processLog += '2. æ•°æ®è½¬æ¢:\n';
            const pointNum = parseInt(originalPointNum) || 0;
            const lastOrderNum = parseInt(originalLastOrderNum) || 0;
            const yesterdayOrderNum = parseInt(originalYesterdayOrderNum) || 0;
            const lastOrderPrice = parseFloat(originalLastOrderPrice) || 0;
            const mouthPrice = parseFloat(originalMouthPrice) || 0;
            const monthNum = parseInt(originalMonthNum) || 0;
            
            processLog += `   pointNum: ${pointNum}\n`;
            processLog += `   lastOrderNum: ${lastOrderNum}\n`;
            processLog += `   yesterdayOrderNum: ${yesterdayOrderNum}\n`;
            processLog += `   lastOrderPrice: ${lastOrderPrice}\n`;
            processLog += `   mouthPrice: ${mouthPrice}\n`;
            processLog += `   monthNum: ${monthNum}\n\n`;
            
            // 3. æ˜¾ç¤ºç»“æœ
            processLog += '3. æœ€ç»ˆæ˜¾ç¤ºç»“æœ:\n';
            processLog += `   ç½‘ç‚¹æ€»æ•°: ${pointNum}\n`;
            processLog += `   ä»Šæ—¥è®¢å•: ${lastOrderNum}\n`;
            processLog += `   æ˜¨æ—¥è®¢å•: ${yesterdayOrderNum}\n`;
            processLog += `   æ˜¨æ—¥æ”¶ç›Š: ${lastOrderPrice}\n`;
            processLog += `   æœ¬æœˆæ”¶ç›Š: ${mouthPrice}\n`;
            processLog += `   æœ¬æœˆè®¢å•: ${monthNum}\n`;
            
            document.getElementById('mappingProcess').innerHTML = processLog;
            
            // æ˜¾ç¤ºå‰ç«¯æ•°æ®
            const fields = [
                { key: 'pointNum', label: 'ç½‘ç‚¹æ€»æ•°', value: pointNum, prefix: '' },
                { key: 'lastOrderNum', label: 'ä»Šæ—¥è®¢å•', value: lastOrderNum, prefix: '' },
                { key: 'yesterdayOrderNum', label: 'æ˜¨æ—¥è®¢å•', value: yesterdayOrderNum, prefix: '' },
                { key: 'lastOrderPrice', label: 'æ˜¨æ—¥æ”¶ç›Š', value: lastOrderPrice, prefix: 'Â¥' },
                { key: 'mouthPrice', label: 'æœ¬æœˆæ”¶ç›Š', value: mouthPrice, prefix: 'Â¥' },
                { key: 'monthNum', label: 'æœ¬æœˆè®¢å•', value: monthNum, prefix: '' }
            ];

            let html = '';
            
            fields.forEach(field => {
                const isCorrect = field.value > 0; // ç®€å•çš„æ­£ç¡®æ€§æ£€æŸ¥
                html += `
                    <div class="data-item ${isCorrect ? 'success' : 'error'}">
                        <h4>${field.label}</h4>
                        <div class="data-value">${field.prefix}${field.value}</div>
                        <div class="data-label">å­—æ®µ: ${field.key}</div>
                    </div>
                `;
            });
            
            document.getElementById('frontendData').innerHTML = html;
            
            console.log('=== æ•°æ®æ˜ å°„æµ‹è¯•å®Œæˆ ===');
        }

        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æµ‹è¯•
        window.onload = function() {
            testMapping();
        };
    </script>
</body>
</html> 