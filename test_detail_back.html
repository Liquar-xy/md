<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç½‘ç‚¹è¯¦æƒ…è¿”å›åŠŸèƒ½æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        button {
            background: #007aff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        .result {
            margin-top: 10px;
            padding: 10px;
            background: #f5f5f5;
            border-radius: 5px;
            white-space: pre-wrap;
        }
        .success {
            color: #28a745;
            font-weight: bold;
        }
        .error {
            color: #dc3545;
            font-weight: bold;
        }
        .info {
            color: #007bff;
            font-weight: bold;
        }
        .flow-step {
            color: #6c757d;
            font-weight: bold;
        }
        .mock-page {
            background: #e9ecef;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            border: 2px solid #007aff;
        }
        .mock-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: white;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 10px;
        }
        .back-btn {
            background: transparent;
            color: #333;
            border: none;
            font-size: 18px;
            cursor: pointer;
        }
        .title {
            font-weight: bold;
            color: #333;
        }
        .action-btns {
            display: flex;
            gap: 10px;
        }
        .action-btn {
            background: transparent;
            color: #007aff;
            border: 1px solid #007aff;
            padding: 5px 10px;
            border-radius: 3px;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>ç½‘ç‚¹è¯¦æƒ…è¿”å›åŠŸèƒ½æµ‹è¯•</h1>
    
    <div class="test-section">
        <h3>1. æ¨¡æ‹Ÿç½‘ç‚¹è¯¦æƒ…é¡µé¢</h3>
        <div class="mock-page">
            <div class="mock-header">
                <button class="back-btn" onclick="simulateGoBack()">â†</button>
                <div class="title">ç½‘ç‚¹è¯¦æƒ…</div>
                <div class="action-btns">
                    <button class="action-btn">åˆ·æ–°</button>
                    <button class="action-btn">ç¼–è¾‘</button>
                </div>
            </div>
            <div>
                <strong>ç½‘ç‚¹åç§°:</strong> åŒ—äº¬è¥¿ç«™å—å¹¿åœºå¯„å­˜ç‚¹<br>
                <strong>ç½‘ç‚¹åœ°å€:</strong> å—å¹¿åœºè¿›ç«™å£ä¸œä¾§<br>
                <strong>ç½‘ç‚¹ç±»å‹:</strong> ç«è½¦ç«™<br>
                <strong>ç®¡ç†æŸœç»„:</strong> 10ç»„15ä¸»æœº20æŸœé—¨<br>
                <strong>è¥ä¸šæ—¶é—´:</strong> 08:00-22:00<br>
                <strong>ç½‘ç‚¹çŠ¶æ€:</strong> æ­£å¸¸<br>
                <strong>æ”¶è´¹è§„åˆ™:</strong> æŸ¥çœ‹
            </div>
        </div>
        <div id="backResult" class="result"></div>
    </div>
    
    <div class="test-section">
        <h3>2. æ¨¡æ‹Ÿæˆ‘çš„ç½‘ç‚¹åˆ—è¡¨é¡µé¢</h3>
        <div class="mock-page">
            <div class="mock-header">
                <div class="title">æˆ‘çš„ç½‘ç‚¹</div>
                <button class="action-btn">æ–°å¢ç½‘ç‚¹</button>
            </div>
            <div>
                <div style="background: white; padding: 10px; margin: 5px 0; border-radius: 3px;">
                    <strong>åŒ—äº¬è¥¿ç«™å—å¹¿åœºå¯„å­˜ç‚¹</strong><br>
                    å—å¹¿åœºè¿›ç«™å£ä¸œä¾§ | 10ç»„15ä¸»æœº20æŸœé—¨
                </div>
                <div style="background: white; padding: 10px; margin: 5px 0; border-radius: 3px;">
                    <strong>ä¸Šæµ·è™¹æ¡¥ç«™å‡ºå‘å±‚å¯„å­˜ç‚¹</strong><br>
                    å‡ºå‘å±‚A17æ£€ç¥¨å£é™„è¿‘ | 8ç»„12ä¸»æœº18æŸœé—¨
                </div>
            </div>
        </div>
        <div id="listResult" class="result"></div>
    </div>
    
    <div class="test-section">
        <h3>3. æµ‹è¯•ä¸åŒåœºæ™¯çš„è¿”å›é€»è¾‘</h3>
        <button onclick="testFromEdit()">æµ‹è¯•ä»ç¼–è¾‘é¡µé¢è¿”å›</button>
        <button onclick="testFromList()">æµ‹è¯•ä»åˆ—è¡¨é¡µé¢è¿”å›</button>
        <button onclick="testDirectAccess()">æµ‹è¯•ç›´æ¥è®¿é—®è¯¦æƒ…é¡µé¢</button>
        <div id="scenarioResult" class="result"></div>
    </div>

    <script>
        // æ¨¡æ‹Ÿé¡µé¢çŠ¶æ€
        let currentPage = 'detail';
        let fromEdit = false;
        let fromList = false;
        
        // æ¨¡æ‹Ÿè¿”å›åŠŸèƒ½
        function simulateGoBack() {
            console.log('ç‚¹å‡»è¿”å›æŒ‰é’®');
            console.log('å½“å‰é¡µé¢:', currentPage);
            console.log('fromEdit:', fromEdit);
            console.log('fromList:', fromList);
            
            let result = '<strong>è¿”å›é€»è¾‘æ‰§è¡Œ:</strong><br>';
            result += '<span class="flow-step">ğŸ“± æ­¥éª¤1: ç‚¹å‡»è¿”å›æŒ‰é’®</span><br>';
            result += 'å½“å‰é¡µé¢: ' + currentPage + '<br>';
            result += 'fromEdit: ' + fromEdit + '<br>';
            result += 'fromList: ' + fromList + '<br><br>';
            
            // æ¨¡æ‹Ÿuni.reLaunchåˆ°æˆ‘çš„ç½‘ç‚¹é¡µé¢
            result += '<span class="flow-step">ğŸ“± æ­¥éª¤2: æ‰§è¡Œuni.reLaunchåˆ°æˆ‘çš„ç½‘ç‚¹é¡µé¢</span><br>';
            
            // æ¨¡æ‹Ÿè·³è½¬
            setTimeout(() => {
                currentPage = 'list';
                result += '<span class="success">âœ… æˆåŠŸè·³è½¬åˆ°æˆ‘çš„ç½‘ç‚¹é¡µé¢</span><br>';
                result += '<span class="success">âœ… é¡µé¢çŠ¶æ€å·²æ›´æ–°: ' + currentPage + '</span><br><br>';
                
                result += '<span class="flow-step">ğŸ“± æ­¥éª¤3: æˆ‘çš„ç½‘ç‚¹é¡µé¢onShowè¢«è§¦å‘</span><br>';
                result += '<span class="success">âœ… æ£€æŸ¥å…¨å±€æœ€æ–°æ•°æ®</span><br>';
                result += '<span class="success">âœ… æ›´æ–°åˆ—è¡¨æ•°æ®ï¼ˆå¦‚æœæœ‰æœ€æ–°æ•°æ®ï¼‰</span><br>';
                result += '<span class="success">âœ… æ˜¾ç¤ºæœ€æ–°ç½‘ç‚¹åˆ—è¡¨</span><br><br>';
                
                result += '<span class="success">ğŸ‰ è¿”å›åŠŸèƒ½æµ‹è¯•æˆåŠŸï¼</span><br>';
                result += '<span class="flow-step">ğŸ“‹ æµç¨‹æ€»ç»“:</span><br>';
                result += '1. ç‚¹å‡»è¿”å›æŒ‰é’® â†’ è§¦å‘goBackæ–¹æ³•<br>';
                result += '2. æ‰§è¡Œuni.reLaunch â†’ è·³è½¬åˆ°æˆ‘çš„ç½‘ç‚¹é¡µé¢<br>';
                result += '3. æˆ‘çš„ç½‘ç‚¹é¡µé¢onShow â†’ æ£€æŸ¥å¹¶æ›´æ–°æ•°æ®<br>';
                result += '4. æ˜¾ç¤ºæœ€æ–°ç½‘ç‚¹åˆ—è¡¨ â†’ å®Œæˆè¿”å›æµç¨‹';
                
                document.getElementById('backResult').innerHTML = result;
                
                // æ›´æ–°åˆ—è¡¨é¡µé¢æ˜¾ç¤º
                updateListDisplay();
            }, 1000);
            
            document.getElementById('backResult').innerHTML = result + '<span class="info">â³ æ­£åœ¨è·³è½¬...</span>';
        }
        
        // æ›´æ–°åˆ—è¡¨é¡µé¢æ˜¾ç¤º
        function updateListDisplay() {
            let result = '<strong>æˆ‘çš„ç½‘ç‚¹é¡µé¢çŠ¶æ€:</strong><br>';
            result += '<span class="success">âœ… é¡µé¢å·²åŠ è½½</span><br>';
            result += '<span class="success">âœ… ç½‘ç‚¹åˆ—è¡¨å·²æ˜¾ç¤º</span><br>';
            result += '<span class="success">âœ… æ•°æ®å·²æ›´æ–°ï¼ˆå¦‚æœæœ‰æœ€æ–°æ•°æ®ï¼‰</span><br><br>';
            
            result += '<span class="info">ğŸ“± ç°åœ¨å¯ä»¥:</span><br>';
            result += 'â€¢ æŸ¥çœ‹ç½‘ç‚¹åˆ—è¡¨<br>';
            result += 'â€¢ ç‚¹å‡»ç½‘ç‚¹è¿›å…¥è¯¦æƒ…<br>';
            result += 'â€¢ ç‚¹å‡»æ–°å¢ç½‘ç‚¹<br>';
            result += 'â€¢ ç¼–è¾‘ç°æœ‰ç½‘ç‚¹';
            
            document.getElementById('listResult').innerHTML = result;
        }
        
        // æµ‹è¯•ä»ç¼–è¾‘é¡µé¢è¿”å›
        function testFromEdit() {
            fromEdit = true;
            fromList = false;
            currentPage = 'detail';
            
            let result = '<strong>æµ‹è¯•åœºæ™¯: ä»ç¼–è¾‘é¡µé¢è¿”å›</strong><br>';
            result += '<span class="flow-step">ğŸ“ è®¾ç½®åœºæ™¯å‚æ•°:</span><br>';
            result += 'fromEdit: true<br>';
            result += 'fromList: false<br>';
            result += 'currentPage: detail<br><br>';
            
            result += '<span class="info">ğŸ“± åœºæ™¯è¯´æ˜:</span><br>';
            result += '1. ç”¨æˆ·ä»æˆ‘çš„ç½‘ç‚¹åˆ—è¡¨ç‚¹å‡»ç¼–è¾‘<br>';
            result += '2. è¿›å…¥ç¼–è¾‘é¡µé¢ä¿®æ”¹æ•°æ®<br>';
            result += '3. ç‚¹å‡»ä¿å­˜ï¼Œè·³è½¬åˆ°è¯¦æƒ…é¡µé¢<br>';
            result += '4. åœ¨è¯¦æƒ…é¡µé¢ç‚¹å‡»è¿”å›<br>';
            result += '5. åº”è¯¥ç›´æ¥è¿”å›åˆ°æˆ‘çš„ç½‘ç‚¹åˆ—è¡¨é¡µé¢<br><br>';
            
            result += '<span class="success">âœ… åœºæ™¯è®¾ç½®å®Œæˆï¼Œç°åœ¨å¯ä»¥ç‚¹å‡»è¿”å›æŒ‰é’®æµ‹è¯•</span>';
            
            document.getElementById('scenarioResult').innerHTML = result;
        }
        
        // æµ‹è¯•ä»åˆ—è¡¨é¡µé¢è¿”å›
        function testFromList() {
            fromEdit = false;
            fromList = true;
            currentPage = 'detail';
            
            let result = '<strong>æµ‹è¯•åœºæ™¯: ä»åˆ—è¡¨é¡µé¢è¿”å›</strong><br>';
            result += '<span class="flow-step">ğŸ“ è®¾ç½®åœºæ™¯å‚æ•°:</span><br>';
            result += 'fromEdit: false<br>';
            result += 'fromList: true<br>';
            result += 'currentPage: detail<br><br>';
            
            result += '<span class="info">ğŸ“± åœºæ™¯è¯´æ˜:</span><br>';
            result += '1. ç”¨æˆ·ä»æˆ‘çš„ç½‘ç‚¹åˆ—è¡¨ç‚¹å‡»ç½‘ç‚¹<br>';
            result += '2. è¿›å…¥è¯¦æƒ…é¡µé¢æŸ¥çœ‹ä¿¡æ¯<br>';
            result += '3. åœ¨è¯¦æƒ…é¡µé¢ç‚¹å‡»è¿”å›<br>';
            result += '4. åº”è¯¥ç›´æ¥è¿”å›åˆ°æˆ‘çš„ç½‘ç‚¹åˆ—è¡¨é¡µé¢<br><br>';
            
            result += '<span class="success">âœ… åœºæ™¯è®¾ç½®å®Œæˆï¼Œç°åœ¨å¯ä»¥ç‚¹å‡»è¿”å›æŒ‰é’®æµ‹è¯•</span>';
            
            document.getElementById('scenarioResult').innerHTML = result;
        }
        
        // æµ‹è¯•ç›´æ¥è®¿é—®è¯¦æƒ…é¡µé¢
        function testDirectAccess() {
            fromEdit = false;
            fromList = false;
            currentPage = 'detail';
            
            let result = '<strong>æµ‹è¯•åœºæ™¯: ç›´æ¥è®¿é—®è¯¦æƒ…é¡µé¢</strong><br>';
            result += '<span class="flow-step">ğŸ“ è®¾ç½®åœºæ™¯å‚æ•°:</span><br>';
            result += 'fromEdit: false<br>';
            result += 'fromList: false<br>';
            result += 'currentPage: detail<br><br>';
            
            result += '<span class="info">ğŸ“± åœºæ™¯è¯´æ˜:</span><br>';
            result += '1. ç”¨æˆ·ç›´æ¥è®¿é—®ç½‘ç‚¹è¯¦æƒ…é¡µé¢<br>';
            result += '2. åœ¨è¯¦æƒ…é¡µé¢ç‚¹å‡»è¿”å›<br>';
            result += '3. åº”è¯¥ç›´æ¥è·³è½¬åˆ°æˆ‘çš„ç½‘ç‚¹åˆ—è¡¨é¡µé¢<br><br>';
            
            result += '<span class="success">âœ… åœºæ™¯è®¾ç½®å®Œæˆï¼Œç°åœ¨å¯ä»¥ç‚¹å‡»è¿”å›æŒ‰é’®æµ‹è¯•</span>';
            
            document.getElementById('scenarioResult').innerHTML = result;
        }
        
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.onload = function() {
            console.log('æµ‹è¯•é¡µé¢å·²åŠ è½½');
            console.log('å½“å‰é¡µé¢:', currentPage);
            console.log('fromEdit:', fromEdit);
            console.log('fromList:', fromList);
        };
    </script>
</body>
</html> 